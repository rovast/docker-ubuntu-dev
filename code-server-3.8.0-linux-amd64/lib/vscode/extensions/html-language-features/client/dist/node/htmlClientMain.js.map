{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///../node_modules/vscode-languageserver-protocol/lib/node/main.js","webpack:///../node_modules/diagnostic-channel/dist/src/channel.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack:///../node_modules/vscode-jsonrpc/lib/node/main.js","webpack:///../node_modules/applicationinsights/out/Library/Logging.js","webpack:///../node_modules/vscode-languageclient/lib/common/client.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack:///../node_modules/applicationinsights/out/Library/Util.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/is.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/is.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/events.js","webpack:///external \"os\"","webpack:///../node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack:///../node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack:///external \"url\"","webpack:///../node_modules/vscode-languageclient/lib/node/main.js","webpack:///external \"child_process\"","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///../node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack:///./src/requests.ts","webpack:///../node_modules/vscode-languageclient/lib/common/commonClient.js","webpack:///../node_modules/vscode-jsonrpc/node.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack:///external \"util\"","webpack:///../node_modules/vscode-jsonrpc/lib/common/api.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack:///external \"crypto\"","webpack:///../node_modules/vscode-languageclient/lib/common/configuration.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCodeLens.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/uuid.js","webpack:///../node_modules/vscode-languageclient/lib/common/progressPart.js","webpack:///../node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack:///external \"module\"","webpack:///external \"events\"","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack:///./src/node/htmlClientMain.ts","webpack:///./src/node/nodeFs.ts","webpack:///../node_modules/semver/semver.js","webpack:///../node_modules/vscode-jsonrpc/lib/node/ril.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack:///external \"net\"","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack:///../node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.proposed.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/async.js","webpack:///../node_modules/vscode-languageclient/lib/common/colorProvider.js","webpack:///../node_modules/vscode-languageclient/lib/common/implementation.js","webpack:///../node_modules/vscode-languageclient/lib/common/typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/common/workspaceFolders.js","webpack:///../node_modules/vscode-languageclient/lib/common/foldingRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/declaration.js","webpack:///../node_modules/vscode-languageclient/lib/common/selectionRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/progress.js","webpack:///../node_modules/vscode-languageclient/lib/common/callHierarchy.js","webpack:///../node_modules/vscode-languageclient/lib/common/semanticTokens.proposed.js","webpack:///../node_modules/vscode-languageclient/lib/node/processes.js","webpack:///../node_modules/vscode-languageserver-protocol/node.js","webpack:///../node_modules/vscode-languageclient/lib/common/api.js","webpack:///./src/htmlClient.ts","webpack:///../node_modules/vscode-nls/lib/main.js","webpack:///./src/htmlEmptyTagsShared.ts","webpack:///./src/tagClosing.ts","webpack:///./src/customData.ts","webpack:///../node_modules/vscode-languageclient/node.js","webpack:///../node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack:///../node_modules/applicationinsights/out/applicationinsights.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack:///../node_modules/diagnostic-channel/node_modules/semver/semver.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack:///external \"stream\"","webpack:///external \"console\"","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$","webpack:///../node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack:///../node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack:///../node_modules/zone.js/dist/zone-node.js","webpack:///external \"timers\"","webpack:///external \"_http_client\"","webpack:///../node_modules/applicationinsights/out/AutoCollection/Console.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack:///../node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack:///external \"constants\"","webpack:///../node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack:///../node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack:///../node_modules/applicationinsights/out/Library/NodeClient.js","webpack:///../node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack:///../node_modules/applicationinsights/out/Library/Config.js","webpack:///../node_modules/applicationinsights/out/Library/Context.js","webpack:///../node_modules/applicationinsights/out/Library/Channel.js","webpack:///../node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack:///../node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack:///../node_modules/applicationinsights/out/Library/Sender.js","webpack:///external \"zlib\"","webpack:///../node_modules/applicationinsights/out/Library/EnvelopeFactory.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","__export","node_1","createProtocolConnection","input","output","logger","options","createMessageConnection","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","this","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","some","_a","filter","publish","event","standardEvent_1","timestamp","Date","now","data","forEach","listener","e","subscribe","push","unsubscribe","index","length","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","channel","vscode_jsonrpc_1","ProtocolRequestType0","RequestType0","method","super","ProtocolRequestType","RequestType","ProtocolNotificationType","NotificationType","ProtocolNotificationType0","NotificationType0","ril_1","default","install","api_1","path","os","crypto_1","net_1","IPCMessageReader","AbstractMessageReader","process","eventEmitter","on","error","fireError","fireClose","callback","Disposable","off","IPCMessageWriter","AbstractMessageWriter","errorCount","msg","send","undefined","handleError","Promise","resolve","reject","SocketMessageReader","ReadableStreamMessageReader","socket","encoding","stream","asReadableStream","SocketMessageWriter","WriteableStreamMessageWriter","asWritableStream","dispose","destroy","StreamMessageReader","readble","StreamMessageWriter","writable","generateRandomPipeName","randomSuffix","randomBytes","toString","platform","join","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","close","listen","removeListener","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","port","createServerSocketTransport","NullLogger","reader","read","writer","write","end","isMessageWriter","ConnectionStrategy","is","connectionStrategy","Logging","info","message","optionalParams","_i","arguments","enableDebug","console","TAG","warn","disableWarnings","BaseLanguageClient","MessageTransports","TextDocumentFeature","State","RevealOutputChannelOn","CloseAction","ErrorAction","vscode_1","vscode_languageserver_protocol_1","configuration_1","c2p","p2c","Is","async_1","UUID","progressPart_1","ConsoleLogger","RAL","log","ClientState","DefaultErrorHandler","restarts","_error","_message","count","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","shift","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","String","Number","Boolean","Array","Key","Null","EnumMember","Struct","Event","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Text","Unit","Value","Keyword","Snippet","Color","Reference","Folder","SupportedSymbolTags","SymbolTag","Deprecated","ensure","target","DynamicFeature","candidate","func","register","unregister","messages","DocumentNotifiactions","_client","_event","_type","_middleware","_createParams","_selectorFilter","_selectors","Map","selectors","textDocument","selector","languages","match","registerOptions","documentSelector","_listener","set","id","values","sendNotification","notificationSent","_data","delete","size","clear","document","Error","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","type","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","has","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","params","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","sendRequest","then","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","saveOptions","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","isArray","watchers","disposeables","watcher","string","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","_registrations","registration","registerLanguageProvider","provider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","boolean","WorkDoneProgressOptions","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","insertReplaceSupport","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","position","token","context","asCompletionParams","asCompletionResult","handleFailedRequest","provideCompletionItem","resolveCompletionItem","resolveProvider","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","activeParameterSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","element","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","result","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","range","_provideCodeActions","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","keys","ensurePath","current","obj","workspaceFolder","indexOf","getConfiguration","substr","split","toJSONObject","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","args","commands","registerCommand","MessageReader","MessageWriter","OnReady","_resolve","_used","_traceFormat","TraceFormat","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","connectionOptions","_state","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","Emitter","_stateChangeEmitter","_trace","Trace","Off","_tracer","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","oldState","getPublicState","newState","fire","state","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","handler","onRequest","onNotification","onProgress","sendProgress","createOutputChannel","onReady","resolveConnection","connection","trace","traceFormat","ResponseError","responseError","code","stack","showNotification","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","isLSPMessage","append","JSON","stringify","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","clientInfo","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","cancel","number","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","shutdown","exit","cleanUpChannel","diagnostics","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","closeHandler","handleConnectionClosed","createMessageTransports","transports","onError","onClose","tracer","sendNotificationOrTraceOptions","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","fromString","_connection","fileEvents","array","registerRaw","features","feature","registerFeature","request","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","complexDiagnosticCodeSupport","fillClientCapabilities","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","defaultValue","ErrorCodes","RequestCancelled","makeCancelError","ContentModified","Canceled","_ral","ral","Domain","__assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","trim","substring","str","replace","int32ArrayToBase64","toChar","v","fromCharCode","x","map","Buffer","from","random32","Math","random","randomu32","w3cTraceId","tmp","hexValues","oct","a","clockSequenceHi","isError","isPrimitive","propType","isDate","msToTimeSpan","totalms","isNaN","sec","toFixed","min","floor","hour","days","extractError","err","looseError","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","requestUrl","excludedDomains","correlationHeaderExcludedDomains","RegExp","test","parse","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","host","pathname","proxyUrl","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","thenable","typedArray","stringArray","every","elem","check","resolved","ral_1","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","ret","callbacks","slice","contexts","apply","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","Zone","generateContextObject","operationId","parentId","operationName","correlationContextHeader","operation","customProperties","CustomPropertiesImpl","runWithContext","fn","fork","properties","run","wrapCallback","wrap","enable","isNodeVersionCompatible","hasEverEnabled","registerContextPreservation","patchError","patchTimers","disable","nodeVer","versions","node","parseInt","methodNames","methodName","orig","handleId","AppInsightsAsyncCorrelatedErrorWrapper","stackRewrite","prepareStackTrace","stackTrace","foundOne","fileName","getFileName","max","stackFrames","startIndex","props","concat","propertyName","hiddenPropertyName","getOwnPropertyDescriptor","header","addHeaderData","keyvals","keyval","parts","serializeToHeader","getProperty","setProperty","val","bannedCharacters","requestContextSourceKey","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","__createBinding","k","k2","__exportStar","SettingMonitor","LanguageClient","TransportKind","cp","fs","SemVer","commonClient_1","client_1","processes_1","Executable","Transport","NodeModule","StreamInfo","ChildProcessInfo","isSocket","detached","CommonLanguageClient","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","toLowerCase","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","setTimeout","kill","pid","terminate","getEnvironment","env","debugStartWith","debugEquals","assertStdio","stdin","stdout","stderr","json","runDebug","debug","execArgv","arg","startsWith","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","stdio","runtime","ipc","pipe","cwd","silent","sp","execOptions","serverProcess","spawn","_mainGetRootPath","lstat","stats","isDirectory","_setting","primary","rest","needsStart","IsInitialized","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","HttpDependencyParser","CorrelationContextManager_1","AutoCollectHttpDependencies","INSTANCE","isEnabled","_isEnabled","_isInitialized","_initialize","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","telemetry","requestParser","currentContext","uniqueRequestId","requestNumber","getUrl","getHeader","setHeader","correlationId","correlationHeader","components","key_1","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","CorrelationIdManager","queryCorrelationId","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","correlationIdPrefix","correlationIdRetryIntervalMs","cancelCorrelationIdQuery","generateRequestId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","delimiter","requestIdMaxLength","trimPosition","FsContentRequest","FsStatRequest","FsReadDirRequest","param","getContent","readFile","buffer","TextDecoder","decode","uriString","readDirectory","stat","FileType","lastIndexOfSlash","lastIndexOf","Slash","charCodeAt","Dot","isAbsolutePath","normalizePath","newParts","pop","joinPath","paths","with","ProposedFeatures","colorProvider_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","selectionRange_1","progress_1","callHierarchy_1","semanticTokens_proposed_1","registerFeatures","createAll","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","SelectionRangeFeature","ProgressFeature","CallHierarchyFeature","SemanticTokensFeature","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","disposable_1","events_1","cancellation_1","CancellationTokenSource","CancellationToken","messageReader_1","messageWriter_1","connection_1","ConnectionOptions","ProgressType","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionError","CancellationReceiverStrategy","CancellationSenderStrategy","CancellationStrategy","ParseError","InvalidRequest","MethodNotFound","InvalidParams","InternalError","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","MessageWriteError","MessageReadError","setPrototypeOf","AbstractMessageSignature","_numberOfParams","_","isRequestMessage","isNotificationMessage","isResponseMessage","freeze","isCancellationRequested","onCancellationRequested","Cancelled","shortcutEvent","handle","timer","clearTimeout","MutableToken","_isCancelled","_emitter","_token","configuration","ConfigurationRequest","items","scopeUri","ProtocolCompletionItem","CompletionItem","label","ProtocolCodeLens","CodeLens","ProtocolDocumentLink","DocumentLink","isUUID","v4","empty","ValueUUID","_value","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","_chars","_UUIDPattern","_reported","WorkDoneProgress","begin","report","location","cancellable","ProgressLocation","Notification","Window","withProgress","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","delta","increment","semver","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","versionSpecifier","patch","AvailabilityData","Base","ContextTagKeys","Data","DataPoint","DataPointType","Envelope","EventData","ExceptionData","ExceptionDetails","MessageData","MetricData","PageViewData","RemoteDependencyData","RequestData","SeverityLevel","StackFrame","extendStatics","__extends","__proto__","b","__","_super","ver","measurements","AutoCollectPerformance","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","once","_lastRequestExecutionTime","_trackCpu","_trackMemory","_trackNetwork","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","freeMem","freemem","usedMem","memoryUsage","rss","lastRequests","requests","intervalRequests","elapsedMs","elapsedSeconds","requestsPerSec","RequestParser","startTime","_setStatus","status","endTime","duration","_isSuccess","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","tags","getRequestId","getOperationName","getCorrelationContextHeader","wrapOnRequestHandler","requestParser_1","correlationContext","wrapServerEventHandler","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","clientPackageJSON","asAbsolutePath","readFileSync","aiKey","main","getPackageInfo","serverMain","serverModule","startClient","getNodeFSRequestService","ensureFileUri","getScheme","buf","Unknown","ctime","mtime","isFile","Directory","isSymbolicLink","SymbolicLink","getTime","readdir","withFileTypes","children","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","tokens","R","tok","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULLPLAIN","FULL","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","COERCERTL","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","raw","major","minor","num","build","format","valid","clean","compare","compareMain","comparePre","compareIdentifiers","compareBuild","inc","release","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","versionA","versionB","rcompare","sort","list","rsort","parseRange","isSatisfiable","comparators","remainingComparators","testComparator","otherComparator","intersects","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","high","low","comparator","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","anyX","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","rangeComparators","thisComparator","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","rtl","next","exec","lastIndex","util_1","CR","LF","MessageBuffer","_encoding","allocUnsafe","chunk","toAppend","newSize","ceil","nextStart","alloc","copy","ReadableStreamWrapper","WritableStreamWrapper","_ril","messageBuffer","applicationJson","encoder","encode","charset","decoder","ms","setImmediate","clearImmediate","RIL","ResolvedMessageReaderOptions","onPartialMessage","errorEmitter","closeEmitter","partialMessageEmitter","asError","fromOptions","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","_partialMessageTimeout","nextMessageLength","messageToken","timeout","partialMessageTimer","onData","tryReadHeaders","contentLength","body","tryReadBody","setPartialMessageTimer","clearPartialMessageTimer","firePartialMessage","waitingTime","semaphore_1","ResolvedMessageWriterOptions","_b","contentTypeEncoder","contentEncoder","writeSemaphore","Semaphore","byteLength","doWrite","lock","capacity","_capacity","_active","_waiting","thunk","runNext","doRunNext","linkedMap_1","CancelNotification","ProgressNotification","ConnectionState","Messages","Verbose","cancelUndispatched","Message","createCancellationTokenSource","conn","sendCancellation","cleanup","receiver","sender","cancellationStrategy","messageReader","messageWriter","_logger","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","queue","isListening","Listening","isClosed","Closed","isDisposed","Disposed","triggerMessageQueue","requestMessage","reply","resultOrError","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","requestHandler","tokenKey","cancellationSource","handlerResult","numberOfParams","promise","replySuccess","handleRequest","notificationHandler","source","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","strategy","lspMessage","throwIfClosedOrDisposed","undefinedToNull","computeMessageParams","messageParams","notificationMessage","traceSendingNotification","onUnhandledProgress","throwIfNotListening","last","traceSendingRequest","_sendNotification","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","inspect","verbose","Touch","First","AsOld","Last","AsNew","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","iterator","entries","currentSize","LRUCache","limit","ratio","_limit","_ratio","checkTrim","trimOld","round","st","Proposed","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","Position","Location","LocationLink","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","DiagnosticCode","Diagnostic","TextEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","line","character","objectLiteral","one","two","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","Information","Hint","severity","newText","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","InsertTextFormat","InsertReplaceEdit","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolInformation","CodeActionContext","CodeAction","FormattingOptions","SelectionRange","TextEditChangeImpl","all","WorkspaceChange","_textEditChanges","_workspaceEdit","textEditChange","configurable","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","languageId","text","isIncomplete","fromPlainText","plainText","language","contents","documentation","parameters","Read","Write","containerName","detail","selectionRange","deprecated","SourceFixAll","only","commandOrEdit","isPreferred","tabSize","insertSpaces","parent","TextDocument","EOL","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","charAt","offset","mid","lineOffset","nextLineOffset","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","protocol_selectionRange_1","SelectionRangeRequest","protocol_progress_1","WorkDoneProgressCreateRequest","protocol_callHierarchy_1","DocumentFilter","DocumentSelector","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","CallHierarchyPrepareRequest","pattern","Abort","Transactional","Undo","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","resultType","SignatureHelpTriggerKind","ContentChange","resultId","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","InsertReplaceRange","inserting","replacing","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","asCompletionTriggerKind","triggerKind","asSignatureHelpTriggerKind","Invoke","asParameterInformation","asSignatureInformation","asWorkerPosition","asLocation","asDiagnosticSeverity","asDiagnosticTag","tag","asRelatedInformation","asDiagnostic","asDiagnosticCode","converted","asDiagnosticTags","asCompletionItemTag","asTextEdit","asSymbolTag","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","isRetrigger","activeSignatureHelp","signatures","activeSignature","activeParameter","asPositions","protocolItem","original","asDocumentation","filterText","insertText","SnippetString","insertTextFormat","fromEdit","asCompletionTextEdit","fillPrimaryInsertText","originalItemKind","sortText","commitCharacters","preselect","asCompletionItemTags","asSymbolKind","asSymbolTags","includeDeclaration","tooltip","ls","CodeBlock","diagnostic","asDiagnosticRelatedInformation","information","MarkdownString","asCompletionRange","asCompletionInsertText","itemKind","asSignatureInformations","asParameterInformations","asLocationLink","asLocationResult","asDocumentHighlight","asDocumentHighlightKind","asSymbolInformation","fillTags","asDocumentSymbol","child","includes","kindMapping","asCodeActionKind","asColor","asColorInformation","ci","asColorPresentation","presentation","asFoldingRangeKind","Comment","Imports","Region","asFoldingRange","asSelectionRange","asRanges","hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","SignatureHelp","asDeclarationResult","asCommands","asFoldingRanges","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","asSelectionRanges","selectionRanges","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","getRegistration","colorProvider","provideColorPresentations","requestParams","provideDocumentColors","registerColorProvider","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","arrayDiff","access","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","sendInitialEvent","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","registerFoldingRangeProvider","declarationSupport","declarationProvider","provideDeclaration","registerDeclarationProvider","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","protocol2code","code2protocol","asCallHierarchyItem","converter","CallHierarchyItem","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","asCallHierarchyItems","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","CallHierarchyProvider","prepareCallHierarchy","provideCallHierarchyIncomingCalls","provideCallHierarchyOutgoingCalls","provideCallHierarchyOutgingCalls","callHierarchyProvider","registerCallHierarchyProvider","vscode","asSemanticTokensEdit","SemanticTokensEdit","deleteCount","Uint32Array","asSemanticTokens","asSemanticTokensEdits","SemanticTokensEdits","asLegend","tokenTypes","namespace","class","enum","interface","struct","typeParameter","parameter","variable","enumMember","function","member","macro","keyword","modifier","comment","regexp","tokenModifiers","declaration","definition","readonly","static","abstract","modification","defaultLibrary","semanticTokensProvider","documentProvider","provideDocumentSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","rangeProvider","provideDocumentRangeSemanticTokens","legend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","path_1","isWindows","isMacintosh","isLinux","execFileSync","cmd","__dirname","spawnSync","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","isPseudo","isDefined","isNumber","isString","readJsonFileSync","filename","replacement","createScopedLocalizeFunction","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","bundlePath","cacheRoot","hash","useMemoryOnly","writeBundle","flag","utimes","SyntaxError","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","module_2","entry","translations","outDir","resultMessages","messageKey","translatedMessage","createNLSBundle","writeFileSync","loadDefaultNlsBundle","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","root","existsSync","findInTheBoxBundle","loadMessageBundle","ext","extname","messageFormat","both","headerFile","dirname","tryFindMetaDataHeaderFile","nlsBundle","module_3","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","VSCODE_NLS_CONFIG","vscodeOptions_1","availableLanguages","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","exists","writeFile","initializeSettings","opts","bundleFormat","standalone","EMPTY_ELEMENTS","tagProvider","supportedLanguages","configName","activeDocument","activeTextEditor","lastChange","lastCharacter","rangeStart","activeEditor","selections","active","isEqual","insertSnippet","updateEnabledState","onDidChangeActiveTextEditor","editor","getCustomDataPathsInAllWorkspaces","dataPaths","collect","rootFolder","resolvePath","folderUri","customDataInspect","workspaceFolderValue","workspaceFile","workspaceValue","globalValue","getCustomDataPathsFromAllExtensions","extension","extensions","customData","packageJSON","contributes","html","rp","extensionUri","toDispose","pathsInWorkspace","pathsInExtensions","onChange","EventEmitter","newPathsInExtensions","idx","appInsights","TelemetryReporter","extensionId","extensionVersion","userOptIn","logFilePath","logStream","createWriteStream","flags","autoClose","updateUserOptIn","configListener","TELEMETRY_CONFIG_ID","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","sessionId","endpointUrl","sendTelemetryEvent","eventName","trackEvent","flushEventsToLogger","flushEventsToAI","flush","AutoCollectConsole","AutoCollectExceptions","Contracts","_console","_exceptions","_performance","_serverRequests","_clientRequests","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","Configuration","getCorrelationContext","wrapWithCorrelationContext","collectConsoleLog","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","consolePub","diagnostic_channel_1","originalBunyan","originalEmit","_emit","rec","noemit","level","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","mongoCore2","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","requestId","startedData","succeeded","originalMysql","originalMysqlPath","patchObjectFunction","cbWrapper","originalFunc","resultContainer","patchClassMemberFunction","classObject","connectionClass","hrDuration","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","postgres6","originalPg","originalPgPath","originalClientQuery","Client","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","emit","preparable","plan","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","address","startTime_1","originalWinston","curLevels","originalLog","Logger","loggingFilter","meta","levelKind","npm","levels","syslog","filters","f","zoneSpec","_properties","_parent","_zoneDelegate","ZoneDelegate","assertZonePatched","ZoneAwarePromise","_currentZoneFrame","zone","_currentTask","getZoneWith","_callback","intercept","runGuarded","applyThis","applyArgs","ZoneFrame","runTask","runCount","previousTask","isPeriodic","cancelFn","invokeTask","scheduleMicroTask","customSchedule","scheduleTask","ZoneTask","scheduleMacroTask","customCancel","scheduleEventTask","cancelTask","__symbol__","parentDelegate","_taskCounts","microTask","macroTask","eventTask","_parentDelegate","_forkZS","onFork","_forkDlgt","_forkCurrZone","_interceptZS","onIntercept","_interceptDlgt","_interceptCurrZone","_invokeZS","onInvoke","_invokeDlgt","_invokeCurrZone","_handleErrorZS","onHandleError","_handleErrorDlgt","_handleErrorCurrZone","_scheduleTaskZS","onScheduleTask","_scheduleTaskDlgt","_scheduleTaskCurrZone","_invokeTaskZS","onInvokeTask","_invokeTaskDlgt","_invokeTaskCurrZone","_cancelTaskZS","onCancelTask","_cancelTaskDlgt","_cancelTaskCurrZone","_hasTaskZS","onHasTask","_hasTaskDlgt","_hasTaskCurrZone","targetZone","scheduleFn","scheduleQueueDrain","_microTaskQueue","_updateTaskCount","hasTask","counts","prev","self","_numberOfNestedTaskFrames","drainMicroTaskQueue","symbolSetTimeout","symbolPromise","symbolThen","_isDrainingMicrotaskQueue","_uncaughtPromiseErrors","consoleError","rejection","uncaughtPromiseError","isThenable","forwardResolution","forwardRejection","symbolState","symbolValue","makeResolver","resolvePromise","clearRejectedNoCatch","scheduleResolveOrReject","error_1","currentTask","chainPromise","onFulfilled","onRejected","delegate","executor","race","rej","onResolve","onReject","values_1","resolvedValues","values_2","catch","FrameType","NativePromise","patchThen","NativePromiseProtototype","NativePromiseThen","nativePromise","fetchPromise","zoneAwareFrame","NativeError","blackListedStackFrames","ZoneAwareError","createProperty","error_2","createMethodProperty","errorMethod","errorProperties","pKeys","createErrorProperties","getErrorPropertiesForPrototype","newProps","cKeys","cKey","originalStack","frames_1","zoneFrame","frame","frameType","blackList","transition","zoneAwareStack","defineProperties","getPrototypeOf","stackTraceLimit","targetObject","constructorOpt","captureStackTrace","structuredStackTrace","getFunctionName","detectZone","parentZoneDelegate","currentZone","parentZD","frames_2","runFrame","runGuardedFrame","runTaskFrame","fnName","zoneSymbol","_global$1","EVENT_TASKS","findExistingRegisteredTask","capture","eventTasks","useCapturing","defaultListenerMetaCreator","invokeAddFunc","addFnSymbol","invokeRemoveFunc","removeFnSymbol","makeZoneAwareAddListener","addFnName","removeFnName","useCapturingParam","allowDuplicates","isPrepend","metaCreator","defaultUseCapturing","scheduleEventListener","attachRegisteredEvent","cancelEventListener","handleEvent","validZoneHandler","makeZoneAwareRemoveListener","symbol","patchMethod","patchFn","delegateName","createNamedFn","events","callAndReturnFirstParam","zoneAwareAddListener$1","zoneAwarePrependListener","zoneAwareRemoveListener$1","zoneAwareRemoveAllListeners","findAllExistingRegisteredTasks","makeZoneAwareRemoveAllListeners","zoneAwareListeners","patchTimer","setName","cancelName","nameSuffix","setNative","clearNative","tasksByHandleId","clearTask","ref","funcName","callbackIndex","patchMacroTask","crypto","httpClient","_global","timers","patchNextTick","nativeRandomBytes_1","nativePbkdf2_1","pbkdf2","ClientRequest","ClientRequest_1","factory","_methodNames","Contracts_1","clients","subscriber","trackTrace","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","cloudRole","cloudRoleInstance","internalSdkVersion","internalAgentVersion","internalNodeName","Measurement","sampleRate","exceptions","hasFullStack","parsedStack","metrics","success","TelemetryType","telemetryTypeToBaseType","Exception","Metric","Request","Dependency","baseTypeToTelemetryType","baseType","bunyanToAILevelMap","10","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","warning","notice","silly","unknown","_exceptionListenerHandle","reThrow","trackException","exception","isAppCrashing","_rejectionListenerHandle","UNCAUGHT_EXCEPTION_HANDLER_NAME","UNHANDLED_REJECTION_HANDLER_NAME","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","dependencyName","toUpperCase","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","originalOptions_1","parsedQuery","dbName","databaseName","commandName","queryObj","sqlString","sql","connectionConfig","socketPath","q","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connectionRemoteAddress","legacySocketRemoteAddress","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","results","ip","rawHeaders","parseId","userAgent","rootId","cookieValue","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Config","Context","Channel","TelemetryProcessors","Sender","EnvelopeFactory","iKey","_telemetryProcessors","disableAppInsights","maxBatchSize","maxBatchIntervalMs","track","triggerSend","telemetryType","envelope","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","endpointBase","_getInstrumentationKey","samplingPercentage","setCorrelationId","ENV_profileQueryEndpoint","ENV_http_proxy","ENV_https_proxy","_profileQueryEndpoint","endpoint","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","appVersion","packageJson","DefaultRoleName","arch","sdkVersion","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setDiskRetryMode","payload","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","abs","zlib","child_process","_config","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","ICACLS_PATH","withCredentials","gzip","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","windowsHide","signal","_runICACLSSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","mkdir","_getShallowDirectorySize","files","totalSize","fileStats","_getShallowDirectorySizeSync","readdirSync","statSync","TEMPDIR_PREFIX","fileFullPath","mkdirSync","dirSize","tempDir","basename","firstFile","filePath","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","baseData","getTags","severityLevel","remoteDependency","exceptionDetails","typeName","parseStack","requestData","responseCode","metric","Aggregation","stdDev","frames","totalSizeInBytes","_StackFrame","regex","parsedFrame","sizeInBytes","acceptedLeft","acceptedRight","howMany","assembly","matches","baseSize"],"mappings":"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","file":"htmlClientMain.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 52);\n","module.exports = require(\"vscode\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__export(require(\"vscode-jsonrpc/node\"));\n__export(require(\"../common/api\"));\nfunction createProtocolConnection(input, output, logger, options) {\n    return node_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=main.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\n//# sourceMappingURL=messages.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\n__export(require(\"../common/api\"));\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super(ril_1.default().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super(ril_1.default().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readble, encoding) {\n        super(ril_1.default().stream.asReadableStream(readble), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super(ril_1.default().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nfunction generateRandomPipeName() {\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    else {\n        // Mac/Unix: use socket file\n        return path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = net_1.createConnection(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = net_1.createConnection(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isMessageReader(value) {\n    return value.listen !== undefined && value.read === undefined;\n}\nfunction isMessageWriter(value) {\n    return value.write !== undefined && value.end === undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isMessageReader(input) ? input : new StreamMessageReader(input);\n    const writer = isMessageWriter(output) ? output : new StreamMessageWriter(output);\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return api_1.createMessageConnection(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=main.js.map","\"use strict\";\r\nvar Logging = (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logging.enableDebug) {\r\n            console.info(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!Logging.disableWarnings) {\r\n            console.warn(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseLanguageClient = exports.MessageTransports = exports.TextDocumentFeature = exports.State = exports.RevealOutputChannelOn = exports.CloseAction = exports.ErrorAction = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst configuration_1 = require(\"./configuration\");\nconst c2p = require(\"./codeConverter\");\nconst p2c = require(\"./protocolConverter\");\nconst Is = require(\"./utils/is\");\nconst async_1 = require(\"./utils/async\");\nconst UUID = require(\"./utils/uuid\");\nconst progressPart_1 = require(\"./progressPart\");\nclass ConsoleLogger {\n    error(message) {\n        vscode_languageserver_protocol_1.RAL().console.error(message);\n    }\n    warn(message) {\n        vscode_languageserver_protocol_1.RAL().console.warn(message);\n    }\n    info(message) {\n        vscode_languageserver_protocol_1.RAL().console.info(message);\n    }\n    log(message) {\n        vscode_languageserver_protocol_1.RAL().console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler, options) {\n    let logger = new ConsoleLogger();\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger, options);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    let result = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === void 0) {\n                connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\nclass DefaultErrorHandler {\n    constructor(name) {\n        this.name = name;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return ErrorAction.Continue;\n        }\n        return ErrorAction.Shutdown;\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length < 5) {\n            return CloseAction.Restart;\n        }\n        else {\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\n                return CloseAction.DoNotRestart;\n            }\n            else {\n                this.restarts.shift();\n                return CloseAction.Restart;\n            }\n        }\n    }\n}\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\nvar State;\n(function (State) {\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State = exports.State || (exports.State = {}));\nvar ClientState;\n(function (ClientState) {\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\n})(ClientState || (ClientState = {}));\nconst SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nconst SupportedSymbolTags = [\n    vscode_languageserver_protocol_1.SymbolTag.Deprecated\n];\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (DynamicFeature = {}));\nclass DocumentNotifiactions {\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\n        this._client = _client;\n        this._event = _event;\n        this._type = _type;\n        this._middleware = _middleware;\n        this._createParams = _createParams;\n        this._selectorFilter = _selectorFilter;\n        this._selectors = new Map();\n    }\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(data) {\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\n            if (this._middleware) {\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\n            }\n            else {\n                this._client.sendNotification(this._type, this._createParams(data));\n            }\n            this.notificationSent(data);\n        }\n    }\n    notificationSent(_data) {\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getProvider(document) {\n        for (const selector of this._selectors.values()) {\n            if (vscode_1.languages.match(selector, document)) {\n                return {\n                    send: (data) => {\n                        this.callback(data);\n                    }\n                };\n            }\n        }\n        throw new Error(`No provider available for the given text document`);\n    }\n}\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\n        this._syncedDocuments = _syncedDocuments;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    register(message, data) {\n        super.register(message, data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let documentSelector = data.registerOptions.documentSelector;\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            let uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\n                let middleware = this._client.clientOptions.middleware;\n                let didOpen = (textDocument) => {\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                if (middleware.didOpen) {\n                    middleware.didOpen(textDocument, didOpen);\n                }\n                else {\n                    didOpen(textDocument);\n                }\n                this._syncedDocuments.set(uri, textDocument);\n            }\n        });\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n    }\n}\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\n        this._syncedDocuments = _syncedDocuments;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.delete(textDocument.uri.toString());\n    }\n    unregister(id) {\n        let selector = this._selectors.get(id);\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        let selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\n                let middleware = this._client.clientOptions.middleware;\n                let didClose = (textDocument) => {\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                if (middleware.didClose) {\n                    middleware.didClose(textDocument, didClose);\n                }\n                else {\n                    didClose(textDocument);\n                }\n            }\n        });\n    }\n}\nclass DidChangeTextDocumentFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._changeData = new Map();\n        this._forcingDelivery = false;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            documentSelector: data.registerOptions.documentSelector,\n            syncKind: data.registerOptions.syncKind\n        });\n    }\n    callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / undirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\n                let middleware = this._client.clientOptions.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\n                    if (middleware.didChange) {\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\n                    }\n                    else {\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    }\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    let didChange = (event) => {\n                        if (this._changeDelayer) {\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\n                                this.forceDelivery();\n                                this._changeDelayer.uri = event.document.uri.toString();\n                            }\n                            this._changeDelayer.delayer.trigger(() => {\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\n                            });\n                        }\n                        else {\n                            this._changeDelayer = {\n                                uri: event.document.uri.toString(),\n                                delayer: new async_1.Delayer(200)\n                            };\n                            this._changeDelayer.delayer.trigger(() => {\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\n                            }, -1);\n                        }\n                    };\n                    if (middleware.didChange) {\n                        middleware.didChange(event, didChange);\n                    }\n                    else {\n                        didChange(event);\n                    }\n                }\n            }\n        }\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._changeDelayer = undefined;\n        this._forcingDelivery = false;\n        this._changeData.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    forceDelivery() {\n        if (this._forcingDelivery || !this._changeDelayer) {\n            return;\n        }\n        try {\n            this._forcingDelivery = true;\n            this._changeDelayer.delayer.forceDelivery();\n        }\n        finally {\n            this._forcingDelivery = false;\n        }\n    }\n    getProvider(document) {\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\n                return {\n                    send: (event) => {\n                        this.callback(event);\n                    }\n                };\n            }\n        }\n        throw new Error(`No provider available for the given text document`);\n    }\n}\nclass WillSaveFeature extends DocumentNotifiactions {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n}\nclass WillSaveWaitUntilFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._selectors = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(_message, data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(event) {\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\n            let middleware = this._client.clientOptions.middleware;\n            let willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === void 0 ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\n        this._includeText = false;\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            const saveOptions = typeof textDocumentSyncOptions.save === 'boolean'\n                ? { includeText: false }\n                : { includeText: !!textDocumentSyncOptions.save.includeText };\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, saveOptions)\n            });\n        }\n    }\n    register(method, data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(method, data);\n    }\n}\nclass FileSystemWatcherFeature {\n    constructor(_client, _notifyFileEvent) {\n        this._client = _client;\n        this._notifyFileEvent = _notifyFileEvent;\n        this._watchers = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(_method, data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        let disposeables = [];\n        for (let watcher of data.registerOptions.watchers) {\n            if (!Is.string(watcher.globPattern)) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\n            }\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\n            disposeables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposeables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        let disposeables = [];\n        for (let fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\n        }\n        this._watchers.set(id, disposeables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        let disposeables = this._watchers.get(id);\n        if (disposeables) {\n            for (let disposable of disposeables) {\n                disposable.dispose();\n            }\n        }\n    }\n    dispose() {\n        this._watchers.forEach((disposeables) => {\n            for (let disposable of disposeables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nclass TextDocumentFeature {\n    constructor(_client, _message) {\n        this._client = _client;\n        this._message = _message;\n        this._registrations = new Map();\n    }\n    get messages() {\n        return this._message;\n    }\n    register(message, data) {\n        if (message.method !== this.messages.method) {\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\n        }\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    dispose() {\n        this._registrations.forEach((value) => {\n            value.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getRegistration(documentSelector, capability) {\n        if (!capability) {\n            return [undefined, undefined];\n        }\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n            const selector = capability.documentSelector || documentSelector;\n            if (selector) {\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\n            }\n        }\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\n            if (!documentSelector) {\n                return [undefined, undefined];\n            }\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n            return [UUID.generateUuid(), options];\n        }\n        return [undefined, undefined];\n    }\n    getRegistrationOptions(documentSelector, capability) {\n        if (!documentSelector || !capability) {\n            return undefined;\n        }\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n    }\n    getProvider(textDocument) {\n        for (const registration of this._registrations.values()) {\n            let selector = registration.data.registerOptions.documentSelector;\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\n                return registration.provider;\n            }\n        }\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\n    }\n}\nexports.TextDocumentFeature = TextDocumentFeature;\nclass WorkspaceFeature {\n    constructor(_client, _message) {\n        this._client = _client;\n        this._message = _message;\n        this._registrations = new Map();\n    }\n    get messages() {\n        return this._message;\n    }\n    register(message, data) {\n        if (message.method !== this.messages.method) {\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\n        }\n        const registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    dispose() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(registration.provider);\n        }\n        return result;\n    }\n}\nclass CompletionItemFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true,\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] },\n            insertReplaceSupport: true\n        };\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const triggerCharacters = options.triggerCharacters || [];\n        const provider = {\n            provideCompletionItems: (document, position, token, context) => {\n                const client = this._client;\n                const middleware = this._client.clientOptions.middleware;\n                const provideCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error, null);\n                    });\n                };\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.clientOptions.middleware;\n                    const resolveCompletionItem = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error, item);\n                        });\n                    };\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\n    }\n}\nclass HoverFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideHover: (document, position, token) => {\n                const client = this._client;\n                const provideHover = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\n    }\n}\nclass SignatureHelpFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n        config.signatureInformation.activeParameterSupport = true;\n        config.contextSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSignatureHelp: (document, position, token, context) => {\n                const client = this._client;\n                const providerSignatureHelp = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, context, token);\n            }\n        };\n        let disposable;\n        if (options.retriggerCharacters === undefined) {\n            const triggerCharacters = options.triggerCharacters || [];\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\n        }\n        else {\n            const metaData = {\n                triggerCharacters: options.triggerCharacters || [],\n                retriggerCharacters: options.retriggerCharacters || []\n            };\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\n        }\n        return [disposable, provider];\n    }\n}\nclass DefinitionFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\n    }\n}\nclass ReferencesFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideReferences: (document, position, options, token) => {\n                const client = this._client;\n                const _providerReferences = (document, position, options, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\n                    : _providerReferences(document, position, options, token);\n            }\n        };\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentHighlightFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDocumentHighlights: (document, position, token) => {\n                const client = this._client;\n                const _provideDocumentHighlights = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\n                    : _provideDocumentHighlights(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentSymbolFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n        symbolCapabilities.tagSupport = {\n            valueSet: SupportedSymbolTags\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDocumentSymbols: (document, token) => {\n                const client = this._client;\n                const _provideDocumentSymbols = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\n                        if (data === null) {\n                            return undefined;\n                        }\n                        if (data.length === 0) {\n                            return [];\n                        }\n                        else {\n                            let element = data[0];\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\n                            }\n                            else {\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\n                            }\n                        }\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\n                    : _provideDocumentSymbols(document, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\n    }\n}\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: SupportedSymbolKinds\n        };\n        symbolCapabilities.tagSupport = {\n            valueSet: SupportedSymbolTags\n        };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\n        });\n    }\n    registerLanguageProvider(_options) {\n        const provider = {\n            provideWorkspaceSymbols: (query, token) => {\n                const client = this._client;\n                const provideWorkspaceSymbols = (query, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            }\n        };\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\n    }\n}\nclass CodeActionFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.isPreferredSupport = true;\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\n                ]\n            }\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideCodeActions: (document, range, context, token) => {\n                const client = this._client;\n                const _provideCodeActions = (document, range, context, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                        if (values === null) {\n                            return undefined;\n                        }\n                        const result = [];\n                        for (let item of values) {\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\n                                result.push(client.protocol2CodeConverter.asCommand(item));\n                            }\n                            else {\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\n                            }\n                        }\n                        return result;\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\n                    : _provideCodeActions(document, range, context, token);\n            }\n        };\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\n                : undefined)), provider];\n    }\n}\nclass CodeLensFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideCodeLenses: (document, token) => {\n                const client = this._client;\n                const provideCodeLenses = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    const client = this._client;\n                    const resolveCodeLens = (codeLens, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error, codeLens);\n                        });\n                    };\n                    const middleware = client.clientOptions.middleware;\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                const client = this._client;\n                const provideDocumentFormattingEdits = (document, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                const client = this._client;\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error, null);\n                    });\n                };\n                let middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                const client = this._client;\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        ch: ch,\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        };\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\n    }\n}\nclass RenameFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\n        if (!options) {\n            return;\n        }\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideRenameEdits: (document, position, newName, token) => {\n                const client = this._client;\n                const provideRenameEdits = (document, position, newName, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        newName: newName\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    const client = this._client;\n                    const prepareRename = (document, position, token) => {\n                        let params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            position: client.code2ProtocolConverter.asPosition(position),\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\n                                return client.protocol2CodeConverter.asRange(result);\n                            }\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                                return {\n                                    range: client.protocol2CodeConverter.asRange(result.range),\n                                    placeholder: result.placeholder\n                                };\n                            }\n                            // To cancel the rename vscode API expects a rejected promise.\n                            return Promise.reject(new Error(`The element can't be renamed.`));\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error, undefined);\n                        });\n                    };\n                    const middleware = client.clientOptions.middleware;\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\n    }\n}\nclass DocumentLinkFeature extends TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\n        documentLinkCapabilities.dynamicRegistration = true;\n        documentLinkCapabilities.tooltipSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\n        if (!options) {\n            return;\n        }\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDocumentLinks: (document, token) => {\n                const client = this._client;\n                const provideDocumentLinks = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    const client = this._client;\n                    let resolveDocumentLink = (link, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error, link);\n                        });\n                    };\n                    const middleware = client.clientOptions.middleware;\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\n    }\n}\nclass ConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._listeners = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        let section = this._client.clientOptions.synchronize.configurationSection;\n        if (section !== void 0) {\n            this.register(this.messages, {\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(_message, data) {\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== void 0) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== void 0 && event !== void 0) {\n            let affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        let didChangeConfiguration = (sections) => {\n            if (sections === void 0) {\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n                return;\n            }\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n        };\n        let middleware = this.getMiddleware();\n        middleware\n            ? middleware(sections, didChangeConfiguration)\n            : didChangeConfiguration(sections);\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        let resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        let result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(undefined, resource).get(key);\n            }\n            if (config) {\n                let path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = configuration_1.toJSONObject(config);\n            }\n        }\n        return result;\n    }\n    getMiddleware() {\n        let middleware = this._client.clientOptions.middleware;\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\n            return middleware.workspace.didChangeConfiguration;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass ExecuteCommandFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._commands = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register(this.messages, {\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(_message, data) {\n        const client = this._client;\n        const middleware = client.clientOptions.middleware;\n        const executeCommand = (command, args) => {\n            let params = {\n                command,\n                arguments: args\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error, undefined);\n            });\n        };\n        if (data.registerOptions.commands) {\n            const disposeables = [];\n            for (const command of data.registerOptions.commands) {\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    return middleware.executeCommand\n                        ? middleware.executeCommand(command, args, executeCommand)\n                        : executeCommand(command, args);\n                }));\n            }\n            this._commands.set(data.id, disposeables);\n        }\n    }\n    unregister(id) {\n        let disposeables = this._commands.get(id);\n        if (disposeables) {\n            disposeables.forEach(disposable => disposable.dispose());\n        }\n    }\n    dispose() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        let candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\nclass OnReady {\n    constructor(_resolve, _reject) {\n        this._resolve = _resolve;\n        this._reject = _reject;\n        this._used = false;\n    }\n    get isUsed() {\n        return this._used;\n    }\n    resolve() {\n        this._used = true;\n        this._resolve();\n    }\n    reject(error) {\n        this._used = true;\n        this._reject(error);\n    }\n}\nclass BaseLanguageClient {\n    constructor(id, name, clientOptions) {\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        this._features = [];\n        this._method2Message = new Map();\n        this._dynamicFeatures = new Map();\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector || [],\n            synchronize: clientOptions.synchronize || {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName || this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\n            middleware: clientOptions.middleware || {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder,\n            connectionOptions: clientOptions.connectionOptions\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this._state = ClientState.Initial;\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        this._listeners = undefined;\n        this._providers = undefined;\n        this._diagnostics = undefined;\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onReady = new Promise((resolve, reject) => {\n            this._onReadyCallbacks = new OnReady(resolve, reject);\n        });\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.logTrace(messageOrDataObject, data);\n                }\n                else {\n                    this.logObjectTrace(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    get state() {\n        return this._state;\n    }\n    set state(value) {\n        let oldState = this.getPublicState();\n        this._state = value;\n        let newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        if (this.state === ClientState.Running) {\n            return State.Running;\n        }\n        else if (this.state === ClientState.Starting) {\n            return State.Starting;\n        }\n        else {\n            return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    sendRequest(type, ...params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            return this._resolvedConnection.sendRequest(type, ...params);\n        }\n        catch (error) {\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onRequest(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onRequest(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    sendNotification(type, params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            this._resolvedConnection.sendNotification(type, params);\n        }\n        catch (error) {\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onNotification(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onNotification(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onProgress(type, token, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            return this._resolvedConnection.onProgress(type, token, handler);\n        }\n        catch (error) {\n            this.error(`Registering progress handler for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    sendProgress(type, token, value) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            this._resolvedConnection.sendProgress(type, token, value);\n        }\n        catch (error) {\n            this.error(`Sending progress for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        if (this._traceOutputChannel) {\n            return this._traceOutputChannel;\n        }\n        return this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    createDefaultErrorHandler() {\n        return new DefaultErrorHandler(this._name);\n    }\n    set trace(value) {\n        this._trace = value;\n        this.onReady().then(() => {\n            this.resolveConnection().then((connection) => {\n                connection.trace(this._trace, this._tracer, {\n                    sendNotification: false,\n                    traceFormat: this._traceFormat\n                });\n            });\n        }, () => {\n        });\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    info(message, data, showNotification = true) {\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\n            this.showNotificationMessage();\n        }\n    }\n    warn(message, data, showNotification = true) {\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\n            this.showNotificationMessage();\n        }\n    }\n    error(message, data, showNotification = true) {\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\n            this.showNotificationMessage();\n        }\n    }\n    showNotificationMessage() {\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\n            this.outputChannel.show(true);\n        });\n    }\n    logTrace(message, data) {\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.traceOutputChannel.appendLine(this.data2String(data));\n        }\n    }\n    logObjectTrace(data) {\n        if (data.isLSPMessage && data.type) {\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\n        }\n        else {\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\n        }\n        if (data) {\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\n        }\n    }\n    needsStart() {\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\n    }\n    onReady() {\n        return this._onReady;\n    }\n    isConnectionActive() {\n        return this.state === ClientState.Running && !!this._resolvedConnection;\n    }\n    start() {\n        if (this._onReadyCallbacks.isUsed) {\n            this._onReady = new Promise((resolve, reject) => {\n                this._onReadyCallbacks = new OnReady(resolve, reject);\n            });\n        }\n        this._listeners = [];\n        this._providers = [];\n        // If we restart then the diagnostics collection is reused.\n        if (!this._diagnostics) {\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\n                : vscode_1.languages.createDiagnosticCollection();\n        }\n        this.state = ClientState.Starting;\n        this.resolveConnection().then((connection) => {\n            connection.onLogMessage((message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message, undefined, false);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onShowMessage((message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                let actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onTelemetry((data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.listen();\n            // Error is handled in the initialize call.\n            return this.initialize(connection);\n        }).then(undefined, (error) => {\n            this.state = ClientState.StartFailed;\n            this._onReadyCallbacks.reject(error);\n            this.error('Starting client failed', error);\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\n        });\n        return new vscode_1.Disposable(() => {\n            if (this.needsStop()) {\n                this.stop();\n            }\n        });\n    }\n    resolveConnection() {\n        if (!this._connectionPromise) {\n            this._connectionPromise = this.createConnection();\n        }\n        return this._connectionPromise;\n    }\n    initialize(connection) {\n        this.refreshTrace(connection, false);\n        let initOption = this._clientOptions.initializationOptions;\n        let rootPath = this._clientOptions.workspaceFolder\n            ? this._clientOptions.workspaceFolder.uri.fsPath\n            : this._clientGetRootPath();\n        let initParams = {\n            processId: null,\n            clientInfo: {\n                name: 'vscode',\n                version: vscode_1.version\n            },\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: null\n        };\n        this.fillInitializeParams(initParams);\n        if (this._clientOptions.progressOnInitialization) {\n            const token = UUID.generateUuid();\n            const part = new progressPart_1.ProgressPart(connection, token);\n            initParams.workDoneToken = token;\n            return this.doInitialize(connection, initParams).then((result) => {\n                part.done();\n                return result;\n            }, (error) => {\n                part.cancel();\n                throw error;\n            });\n        }\n        else {\n            return this.doInitialize(connection, initParams);\n        }\n    }\n    doInitialize(connection, initParams) {\n        return connection.initialize(initParams).then((result) => {\n            this._resolvedConnection = connection;\n            this._initializeResult = result;\n            this.state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            this._onReadyCallbacks.resolve();\n            return result;\n        }).then(undefined, (error) => {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    this.initialize(connection);\n                }\n                else {\n                    this.stop();\n                    this._onReadyCallbacks.reject(error);\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\n                    if (item && item.id === 'retry') {\n                        this.initialize(connection);\n                    }\n                    else {\n                        this.stop();\n                        this._onReadyCallbacks.reject(error);\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                this.stop();\n                this._onReadyCallbacks.reject(error);\n            }\n            throw error;\n        });\n    }\n    _clientGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop() {\n        this._initializeResult = undefined;\n        if (!this._connectionPromise) {\n            this.state = ClientState.Stopped;\n            return Promise.resolve();\n        }\n        if (this.state === ClientState.Stopping && this._onStop) {\n            return this._onStop;\n        }\n        this.state = ClientState.Stopping;\n        this.cleanUp(false);\n        // unhook listeners\n        return this._onStop = this.resolveConnection().then(connection => {\n            return connection.shutdown().then(() => {\n                connection.exit();\n                connection.dispose();\n                this.state = ClientState.Stopped;\n                this.cleanUpChannel();\n                this._onStop = undefined;\n                this._connectionPromise = undefined;\n                this._resolvedConnection = undefined;\n            });\n        });\n    }\n    cleanUp(channel = true, diagnostics = true) {\n        if (this._listeners) {\n            this._listeners.forEach(listener => listener.dispose());\n            this._listeners = undefined;\n        }\n        if (this._providers) {\n            this._providers.forEach(provider => provider.dispose());\n            this._providers = undefined;\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        for (let handler of this._dynamicFeatures.values()) {\n            handler.dispose();\n        }\n        if (channel) {\n            this.cleanUpChannel();\n        }\n        if (diagnostics && this._diagnostics) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n    }\n    cleanUpChannel() {\n        if (this._outputChannel && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        var _a;\n        const client = this;\n        function didChangeWatchedFile(event) {\n            client._fileEvents.push(event);\n            client._fileEventDelayer.trigger(() => {\n                client.onReady().then(() => {\n                    client.resolveConnection().then(connection => {\n                        if (client.isConnectionActive()) {\n                            client.forceDocumentSync();\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\n                        }\n                        client._fileEvents = [];\n                    });\n                }, (error) => {\n                    client.error(`Notify file events failed.`, error);\n                });\n            });\n        }\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\n        (workSpaceMiddleware === null || workSpaceMiddleware === void 0 ? void 0 : workSpaceMiddleware.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\n    }\n    forceDocumentSync() {\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\n    }\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        let uri = this._p2c.asUri(params.uri);\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\n        let middleware = this.clientOptions.middleware;\n        if (middleware.handleDiagnostics) {\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n        }\n        else {\n            this.setDiagnostics(uri, diagnostics);\n        }\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    createConnection() {\n        let errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count);\n        };\n        let closeHandler = () => {\n            this.handleConnectionClosed();\n        };\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler, this._clientOptions.connectionOptions);\n        });\n    }\n    handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._resolvedConnection) {\n                this._resolvedConnection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let action = CloseAction.DoNotRestart;\n        try {\n            action = this._clientOptions.errorHandler.closed();\n        }\n        catch (error) {\n            // Ignore errors coming from the error handler.\n        }\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        if (action === CloseAction.DoNotRestart) {\n            this.error('Connection to server got closed. Server will not be restarted.');\n            this.state = ClientState.Stopped;\n            this.cleanUp(false, true);\n        }\n        else if (action === CloseAction.Restart) {\n            this.info('Connection to server got closed. Server will restart.');\n            this.cleanUp(false, false);\n            this.state = ClientState.Initial;\n            this.start();\n        }\n    }\n    handleConnectionError(error, message, count) {\n        let action = this._clientOptions.errorHandler.error(error, message, count);\n        if (action === ErrorAction.Shutdown) {\n            this.error('Connection to server is erroring. Shutting down server.');\n            this.stop();\n        }\n    }\n    hookConfigurationChanged(connection) {\n        vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        });\n    }\n    refreshTrace(connection, sendNotification = false) {\n        let config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config) {\n            const traceConfig = config.get('trace.server', 'off');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        });\n    }\n    hookFileEvents(_connection) {\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    registerFeatures(features) {\n        for (let feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (DynamicFeature.is(feature)) {\n            let messages = feature.messages;\n            if (Array.isArray(messages)) {\n                for (let message of messages) {\n                    this._method2Message.set(message.method, message);\n                    this._dynamicFeatures.set(message.method, feature);\n                }\n            }\n            else {\n                this._method2Message.set(messages.method, messages);\n                this._dynamicFeatures.set(messages.method, feature);\n            }\n        }\n    }\n    getFeature(request) {\n        return this._dynamicFeatures.get(request);\n    }\n    registerBuiltinFeatures() {\n        this.registerFeature(new ConfigurationFeature(this));\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\n        this.registerFeature(new WillSaveFeature(this));\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new CompletionItemFeature(this));\n        this.registerFeature(new HoverFeature(this));\n        this.registerFeature(new SignatureHelpFeature(this));\n        this.registerFeature(new DefinitionFeature(this));\n        this.registerFeature(new ReferencesFeature(this));\n        this.registerFeature(new DocumentHighlightFeature(this));\n        this.registerFeature(new DocumentSymbolFeature(this));\n        this.registerFeature(new WorkspaceSymbolFeature(this));\n        this.registerFeature(new CodeActionFeature(this));\n        this.registerFeature(new CodeLensFeature(this));\n        this.registerFeature(new DocumentFormattingFeature(this));\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new RenameFeature(this));\n        this.registerFeature(new DocumentLinkFeature(this));\n        this.registerFeature(new ExecuteCommandFeature(this));\n    }\n    fillInitializeParams(params) {\n        for (let feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        let result = {};\n        ensure(result, 'workspace').applyEdit = true;\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.versionSupport = false;\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        diagnostics.complexDiagnosticCodeSupport = true;\n        for (let feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        let documentSelector = this._clientOptions.documentSelector;\n        for (let feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    handleRegistrationRequest(params) {\n        return new Promise((resolve, reject) => {\n            for (let registration of params.registrations) {\n                const feature = this._dynamicFeatures.get(registration.method);\n                if (!feature) {\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n                    return;\n                }\n                const options = registration.registerOptions || {};\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\n                const data = {\n                    id: registration.id,\n                    registerOptions: options\n                };\n                feature.register(this._method2Message.get(registration.method), data);\n            }\n            resolve();\n        });\n    }\n    handleUnregistrationRequest(params) {\n        return new Promise((resolve, reject) => {\n            for (let unregistration of params.unregisterations) {\n                const feature = this._dynamicFeatures.get(unregistration.method);\n                if (!feature) {\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n                    return;\n                }\n                feature.unregister(unregistration.id);\n            }\n            resolve();\n        });\n    }\n    handleApplyWorkspaceEdit(params) {\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        let workspaceEdit = params.edit;\n        let openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\n    }\n    handleFailedRequest(type, error, defaultValue) {\n        // If we get a request cancel or a content modified don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError) {\n            if (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\n                throw this.makeCancelError();\n            }\n            else if (error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified) {\n                return defaultValue;\n            }\n        }\n        this.error(`Request ${type.method} failed.`, error);\n        throw error;\n    }\n    makeCancelError() {\n        const result = new Error(BaseLanguageClient.Canceled);\n        result.name = BaseLanguageClient.Canceled;\n        return result;\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nBaseLanguageClient.Canceled = 'Canceled';\n//# sourceMappingURL=client.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Constants\"));\r\n__export(require(\"./Generated\"));\r\n__export(require(\"./TelemetryTypes\"));\r\n//# sourceMappingURL=index.js.map","module.exports = require(\"path\");","module.exports = require(\"fs\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n//# sourceMappingURL=ral.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar Util = (function () {\r\n    function Util() {\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return obj instanceof Error;\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\",\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = '';\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(url.parse(requestUrl).hostname)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\r\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\r\n            requestUrl = 'https:' + requestUrl;\r\n        }\r\n        var requestUrlParsed = url.parse(requestUrl);\r\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (requestUrlParsed.protocol === 'https:') {\r\n            proxyUrl = config.proxyHttpsUrl || undefined;\r\n        }\r\n        if (requestUrlParsed.protocol === 'http:') {\r\n            proxyUrl = config.proxyHttpUrl || undefined;\r\n        }\r\n        if (proxyUrl) {\r\n            if (proxyUrl.indexOf('//') === 0) {\r\n                proxyUrl = 'http:' + proxyUrl;\r\n            }\r\n            var proxyUrlParsed = url.parse(proxyUrl);\r\n            // https is not supported at the moment\r\n            if (proxyUrlParsed.protocol === 'https:') {\r\n                Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                proxyUrl = undefined;\r\n            }\r\n            else {\r\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\r\n        if (isHttps && config.httpsAgent !== undefined) {\r\n            options.agent = config.httpsAgent;\r\n        }\r\n        else if (!isHttps && config.httpAgent !== undefined) {\r\n            options.agent = config.httpAgent;\r\n        }\r\n        else if (isHttps) {\r\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n            options.agent = Util.tlsRestrictedAgent;\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    ;\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asPromise = exports.thenable = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\nfunction asPromise(value) {\n    if (value instanceof Promise) {\n        return value;\n    }\n    else if (thenable(value)) {\n        return new Promise((resolve, reject) => {\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\n        });\n    }\n    else {\n        return Promise.resolve(value);\n    }\n}\nexports.asPromise = asPromise;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                ral_1.default().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n//# sourceMappingURL=events.js.map","module.exports = require(\"os\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar CorrelationContextManager = (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        return Zone.current.get(\"context\");\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            var newZone = Zone.current.fork({\r\n                name: \"AI-\" + ((context && context.operation.parentId) || \"Unknown\"),\r\n                properties: { context: context }\r\n            });\r\n            newZone.run(fn);\r\n        }\r\n        else {\r\n            fn();\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            return Zone.current.wrap(fn, \"User-wrapped method\");\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function () {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        // Run patches for Zone.js\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.hasEverEnabled = true;\r\n            // Load in Zone.js\r\n            try {\r\n                // Require zone if we can't detect its presence - guarded because of issue #346\r\n                // Note that usually multiple requires of zone.js does not error - but we see reports of it happening\r\n                // in the Azure Functions environment.\r\n                // This indicates that the file is being included multiple times in the same global scope,\r\n                // averting require's cache somehow.\r\n                if (typeof Zone === \"undefined\") {\r\n                    require(\"zone.js\");\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Zone was already loaded even though we couldn't find its global variable\r\n                Logging.warn(\"Failed to require zone.js\");\r\n            }\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                return Zone.current.wrap(cb, \"AI-ContextPreservation\");\r\n            });\r\n            this.patchError();\r\n            this.patchTimers([\"setTimeout\", \"setInterval\"]);\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     *  Reports if the CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        // Unit tests warn of errors < 3.3 from timer patching. All versions before 4 were 0.x\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    // Zone.js breaks concatenation of timer return values.\r\n    // This fixes that.\r\n    CorrelationContextManager.patchTimers = function (methodNames) {\r\n        methodNames.forEach(function (methodName) {\r\n            var orig = global[methodName];\r\n            global[methodName] = function () {\r\n                var ret = orig.apply(this, arguments);\r\n                ret.toString = function () {\r\n                    if (this.data && typeof this.data.handleId !== 'undefined') {\r\n                        return this.data.handleId.toString();\r\n                    }\r\n                    else {\r\n                        return Object.prototype.toString.call(this);\r\n                    }\r\n                };\r\n                return ret;\r\n            };\r\n        });\r\n    };\r\n    // Zone.js breaks deepEqual on error objects (by making internal properties enumerable).\r\n    // This fixes that by subclassing the error object and making all properties not enumerable\r\n    CorrelationContextManager.patchError = function () {\r\n        var orig = global.Error;\r\n        // New error handler\r\n        function AppInsightsAsyncCorrelatedErrorWrapper() {\r\n            if (!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper)) {\r\n                return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype), arguments);\r\n            }\r\n            // Is this object set to rewrite the stack?\r\n            // If so, we should turn off some Zone stuff that is prone to break\r\n            var stackRewrite = orig.stackRewrite;\r\n            if (orig.prepareStackTrace) {\r\n                orig.stackRewrite = false;\r\n                var stackTrace = orig.prepareStackTrace;\r\n                orig.prepareStackTrace = function (e, s) {\r\n                    // Remove some AI and Zone methods from the stack trace\r\n                    // Otherwise we leave side-effects\r\n                    // Algorithm is to find the first frame on the stack after the first instance(s)\r\n                    // of AutoCollection/CorrelationContextManager\r\n                    // Eg. this should return the User frame on an array like below:\r\n                    //  Zone | Zone | CorrelationContextManager | CorrelationContextManager | User\r\n                    var foundOne = false;\r\n                    for (var i = 0; i < s.length; i++) {\r\n                        var fileName = s[i].getFileName();\r\n                        if (fileName) {\r\n                            if (fileName.indexOf(\"AutoCollection/CorrelationContextManager\") === -1 &&\r\n                                fileName.indexOf(\"AutoCollection\\\\CorrelationContextManager\") === -1) {\r\n                                if (foundOne) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            else {\r\n                                foundOne = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Loop above goes one extra step\r\n                    i = Math.max(0, i - 1);\r\n                    if (foundOne) {\r\n                        s.splice(0, i);\r\n                    }\r\n                    return stackTrace(e, s);\r\n                };\r\n            }\r\n            // Apply the error constructor\r\n            orig.apply(this, arguments);\r\n            // Restore Zone stack rewriting settings\r\n            orig.stackRewrite = stackRewrite;\r\n            // Remove unexpected bits from stack trace\r\n            if (this.stack && typeof this.stack === \"string\") {\r\n                var stackFrames = this.stack.split(\"\\n\");\r\n                // Remove this class\r\n                if (stackFrames.length > 3) {\r\n                    if (stackFrames[2].trim().indexOf(\"at Error.AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(2, 1);\r\n                    }\r\n                    else if (stackFrames[1].trim().indexOf(\"at AppInsightsAsyncCorrelatedErrorWrapper.ZoneAwareError\") === 0\r\n                        && stackFrames[2].trim().indexOf(\"at new AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(1, 2);\r\n                    }\r\n                }\r\n                // Remove AI correlation ids\r\n                this.stack = stackFrames.map(function (v) {\r\n                    var startIndex = v.indexOf(\") [\");\r\n                    if (startIndex > -1) {\r\n                        v = v.substr(0, startIndex + 1);\r\n                    }\r\n                    return v;\r\n                }).join(\"\\n\");\r\n            }\r\n            // getOwnPropertyNames should be a superset of Object.keys...\r\n            // This appears to not always be the case\r\n            var props = Object.getOwnPropertyNames(this).concat(Object.keys(this));\r\n            // Zone.js will automatically create some hidden properties at read time.\r\n            // We need to proactively make those not enumerable as well as the currently visible properties\r\n            for (var i = 0; i < props.length; i++) {\r\n                var propertyName = props[i];\r\n                var hiddenPropertyName = Zone['__symbol__'](propertyName);\r\n                Object.defineProperty(this, propertyName, { enumerable: false });\r\n                Object.defineProperty(this, hiddenPropertyName, { enumerable: false, writable: true });\r\n            }\r\n            return this;\r\n        }\r\n        // Inherit from the Zone.js error handler\r\n        AppInsightsAsyncCorrelatedErrorWrapper.prototype = orig.prototype;\r\n        // We need this loop to copy outer methods like Error.captureStackTrace\r\n        var props = Object.getOwnPropertyNames(orig);\r\n        for (var i = 0; i < props.length; i++) {\r\n            var propertyName = props[i];\r\n            if (!AppInsightsAsyncCorrelatedErrorWrapper[propertyName]) {\r\n                Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper, propertyName, Object.getOwnPropertyDescriptor(orig, propertyName));\r\n            }\r\n        }\r\n        // explicit cast to <any> required to avoid type error for captureStackTrace\r\n        // with latest node.d.ts (despite workaround above)\r\n        global.Error = AppInsightsAsyncCorrelatedErrorWrapper;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immidiate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * accross transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","module.exports = require(\"url\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingMonitor = exports.LanguageClient = exports.TransportKind = void 0;\nconst cp = require(\"child_process\");\nconst fs = require(\"fs\");\nconst SemVer = require(\"semver\");\nconst vscode_1 = require(\"vscode\");\nconst Is = require(\"../common/utils/is\");\nconst commonClient_1 = require(\"../common/commonClient\");\nconst client_1 = require(\"../common/client\");\nconst processes_1 = require(\"./processes\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n__exportStar(require(\"../common/api\"), exports);\nconst REQUIRED_VSCODE_VERSION = '^1.44.0'; // do not change format, updated by `updateVSCode` script\nvar Executable;\n(function (Executable) {\n    function is(value) {\n        return Is.string(value.command);\n    }\n    Executable.is = is;\n})(Executable || (Executable = {}));\nvar TransportKind;\n(function (TransportKind) {\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\nvar Transport;\n(function (Transport) {\n    function isSocket(value) {\n        let candidate = value;\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\n    }\n    Transport.isSocket = isSocket;\n})(Transport || (Transport = {}));\nvar NodeModule;\n(function (NodeModule) {\n    function is(value) {\n        return Is.string(value.module);\n    }\n    NodeModule.is = is;\n})(NodeModule || (NodeModule = {}));\nvar StreamInfo;\n(function (StreamInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\n    }\n    StreamInfo.is = is;\n})(StreamInfo || (StreamInfo = {}));\nvar ChildProcessInfo;\n(function (ChildProcessInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\n    }\n    ChildProcessInfo.is = is;\n})(ChildProcessInfo || (ChildProcessInfo = {}));\nclass LanguageClient extends commonClient_1.CommonLanguageClient {\n    constructor(arg1, arg2, arg3, arg4, arg5) {\n        let id;\n        let name;\n        let serverOptions;\n        let clientOptions;\n        let forceDebug;\n        if (Is.string(arg2)) {\n            id = arg1;\n            name = arg2;\n            serverOptions = arg3;\n            clientOptions = arg4;\n            forceDebug = !!arg5;\n        }\n        else {\n            id = arg1.toLowerCase();\n            name = arg1;\n            serverOptions = arg2;\n            clientOptions = arg3;\n            forceDebug = arg4;\n        }\n        if (forceDebug === void 0) {\n            forceDebug = false;\n        }\n        super(id, name, clientOptions);\n        this._serverOptions = serverOptions;\n        this._forceDebug = forceDebug;\n        try {\n            this.checkVersion();\n        }\n        catch (error) {\n            if (Is.string(error.message)) {\n                this.outputChannel.appendLine(error.message);\n            }\n            throw error;\n        }\n    }\n    checkVersion() {\n        let codeVersion = SemVer.parse(vscode_1.version);\n        if (!codeVersion) {\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\n        }\n        // Remove the insider pre-release since we stay API compatible.\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\n            codeVersion.prerelease = [];\n        }\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\n        }\n    }\n    stop() {\n        return super.stop().then(() => {\n            if (this._serverProcess) {\n                let toCheck = this._serverProcess;\n                this._serverProcess = undefined;\n                if (this._isDetached === void 0 || !this._isDetached) {\n                    this.checkProcessDied(toCheck);\n                }\n                this._isDetached = undefined;\n            }\n        });\n    }\n    checkProcessDied(childProcess) {\n        if (!childProcess) {\n            return;\n        }\n        setTimeout(() => {\n            // Test if the process is still alive. Throws an exception if not\n            try {\n                process.kill(childProcess.pid, 0);\n                processes_1.terminate(childProcess);\n            }\n            catch (error) {\n                // All is fine.\n            }\n        }, 2000);\n    }\n    handleConnectionClosed() {\n        this._serverProcess = undefined;\n        super.handleConnectionClosed();\n    }\n    fillInitializeParams(params) {\n        super.fillInitializeParams(params);\n        if (params.processId === null) {\n            params.processId = process.pid;\n        }\n    }\n    createMessageTransports(encoding) {\n        function getEnvironment(env, fork) {\n            if (!env && !fork) {\n                return undefined;\n            }\n            let result = Object.create(null);\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\n            if (fork) {\n                result['ELECTRON_RUN_AS_NODE'] = '1';\n                result['ELECTRON_NO_ASAR'] = '1';\n            }\n            if (env) {\n                Object.keys(env).forEach(key => result[key] = env[key]);\n            }\n            return result;\n        }\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\n        function startedInDebugMode() {\n            let args = process.execArgv;\n            if (args) {\n                return args.some((arg) => {\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\n                        debugEquals.some(value => arg === value);\n                });\n            }\n            return false;\n        }\n        function assertStdio(process) {\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\n                throw new Error('Process created without stdio streams');\n            }\n        }\n        let server = this._serverOptions;\n        // We got a function.\n        if (Is.func(server)) {\n            return server().then((result) => {\n                if (client_1.MessageTransports.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return result;\n                }\n                else if (StreamInfo.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return { reader: new node_1.StreamMessageReader(result.reader), writer: new node_1.StreamMessageWriter(result.writer) };\n                }\n                else {\n                    let cp;\n                    if (ChildProcessInfo.is(result)) {\n                        cp = result.process;\n                        this._isDetached = result.detached;\n                    }\n                    else {\n                        cp = result;\n                        this._isDetached = false;\n                    }\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    return { reader: new node_1.StreamMessageReader(cp.stdout), writer: new node_1.StreamMessageWriter(cp.stdin) };\n                }\n            });\n        }\n        let json;\n        let runDebug = server;\n        if (runDebug.run || runDebug.debug) {\n            if (this._forceDebug || startedInDebugMode()) {\n                json = runDebug.debug;\n            }\n            else {\n                json = runDebug.run;\n            }\n        }\n        else {\n            json = server;\n        }\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\n            if (NodeModule.is(json) && json.module) {\n                let node = json;\n                let transport = node.transport || TransportKind.stdio;\n                if (node.runtime) {\n                    let args = [];\n                    let options = node.options || Object.create(null);\n                    if (options.execArgv) {\n                        options.execArgv.forEach(element => args.push(element));\n                    }\n                    args.push(node.module);\n                    if (node.args) {\n                        node.args.forEach(element => args.push(element));\n                    }\n                    let execOptions = Object.create(null);\n                    execOptions.cwd = serverWorkingDir;\n                    execOptions.env = getEnvironment(options.env, false);\n                    let pipeName = undefined;\n                    if (transport === TransportKind.ipc) {\n                        // exec options not correctly typed in lib\n                        execOptions.stdio = [null, null, null, 'ipc'];\n                        args.push('--node-ipc');\n                    }\n                    else if (transport === TransportKind.stdio) {\n                        args.push('--stdio');\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        pipeName = node_1.generateRandomPipeName();\n                        args.push(`--pipe=${pipeName}`);\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        args.push(`--socket=${transport.port}`);\n                    }\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        if (transport === TransportKind.ipc) {\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return Promise.resolve({ reader: new node_1.IPCMessageReader(serverProcess), writer: new node_1.IPCMessageWriter(serverProcess) });\n                        }\n                        else {\n                            return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n                        }\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        return node_1.createClientPipeTransport(pipeName).then((transport) => {\n                            let process = cp.spawn(node.runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        return node_1.createClientSocketTransport(transport.port).then((transport) => {\n                            let process = cp.spawn(node.runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                }\n                else {\n                    let pipeName = undefined;\n                    return new Promise((resolve, _reject) => {\n                        let args = node.args && node.args.slice() || [];\n                        if (transport === TransportKind.ipc) {\n                            args.push('--node-ipc');\n                        }\n                        else if (transport === TransportKind.stdio) {\n                            args.push('--stdio');\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            pipeName = node_1.generateRandomPipeName();\n                            args.push(`--pipe=${pipeName}`);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            args.push(`--socket=${transport.port}`);\n                        }\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\n                        let options = node.options || Object.create(null);\n                        options.env = getEnvironment(options.env, true);\n                        options.execArgv = options.execArgv || [];\n                        options.cwd = serverWorkingDir;\n                        options.silent = true;\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                            let sp = cp.fork(node.module, args || [], options);\n                            assertStdio(sp);\n                            this._serverProcess = sp;\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            if (transport === TransportKind.ipc) {\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                resolve({ reader: new node_1.IPCMessageReader(this._serverProcess), writer: new node_1.IPCMessageWriter(this._serverProcess) });\n                            }\n                            else {\n                                resolve({ reader: new node_1.StreamMessageReader(sp.stdout), writer: new node_1.StreamMessageWriter(sp.stdin) });\n                            }\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            node_1.createClientPipeTransport(pipeName).then((transport) => {\n                                let sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                });\n                            });\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            node_1.createClientSocketTransport(transport.port).then((transport) => {\n                                let sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                });\n                            });\n                        }\n                    });\n                }\n            }\n            else if (Executable.is(json) && json.command) {\n                let command = json;\n                let args = command.args || [];\n                let options = Object.assign({}, command.options);\n                options.cwd = options.cwd || serverWorkingDir;\n                let serverProcess = cp.spawn(command.command, args, options);\n                if (!serverProcess || !serverProcess.pid) {\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\n                }\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                this._serverProcess = serverProcess;\n                this._isDetached = !!options.detached;\n                return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n            }\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\n        });\n    }\n    _mainGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    _getServerWorkingDir(options) {\n        let cwd = options && options.cwd;\n        if (!cwd) {\n            cwd = this.clientOptions.workspaceFolder\n                ? this.clientOptions.workspaceFolder.uri.fsPath\n                : this._mainGetRootPath();\n        }\n        if (cwd) {\n            // make sure the folder exists otherwise creating the process will fail\n            return new Promise(s => {\n                fs.lstat(cwd, (err, stats) => {\n                    s(!err && stats.isDirectory() ? cwd : undefined);\n                });\n            });\n        }\n        return Promise.resolve(undefined);\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass SettingMonitor {\n    constructor(_client, _setting) {\n        this._client = _client;\n        this._setting = _setting;\n        this._listeners = [];\n    }\n    start() {\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\n        this.onDidChangeConfiguration();\n        return new vscode_1.Disposable(() => {\n            if (this._client.needsStop()) {\n                this._client.stop();\n            }\n        });\n    }\n    onDidChangeConfiguration() {\n        let index = this._setting.indexOf('.');\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\n        if (enabled && this._client.needsStart()) {\n            this._client.start();\n        }\n        else if (!enabled && this._client.needsStop()) {\n            this._client.stop();\n        }\n    }\n}\nexports.SettingMonitor = SettingMonitor;\n//# sourceMappingURL=main.js.map","module.exports = require(\"child_process\");","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n        }\r\n    }\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectHttpDependencies = (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalGet = http.get;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n            if (request && options && shouldCollect) {\r\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n        https.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                if (correlationHeader) {\r\n                    var components = correlationHeader.split(\",\");\r\n                    var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                    if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                    }\r\n                }\r\n                else {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            if (currentContext && currentContext.operation) {\r\n                telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                // Also set legacy headers\r\n                telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                if (correlationContextHeader) {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on('response', function (response) {\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on('error', function (e) {\r\n                requestParser.onError(e);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","module.exports = require(\"http\");","module.exports = require(\"https\");","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar CorrelationIdManager = (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\r\n        // If it 404s, the iKey is bad and we should give up\r\n        // If it fails otherwise, try again later\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\r\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\r\n            return;\r\n        }\r\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\r\n            return;\r\n        }\r\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\r\n        var fetchAppId = function () {\r\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                // This query has been cancelled.\r\n                return;\r\n            }\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                // Ensure this request is not captured by auto-collection.\r\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\r\n                disableAppInsightsAutoCollection: true\r\n            };\r\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\r\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\r\n                if (res.statusCode === 200) {\r\n                    // Success; extract the appId from the body\r\n                    var appId_1 = \"\";\r\n                    res.setEncoding(\"utf-8\");\r\n                    res.on('data', function (data) {\r\n                        appId_1 += data;\r\n                    });\r\n                    res.on('end', function () {\r\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\r\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\r\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\r\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\r\n                        }\r\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                    });\r\n                }\r\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\r\n                    // Not found, probably a bad key. Do not try again.\r\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\r\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                }\r\n                else {\r\n                    // Retry after timeout.\r\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\r\n                }\r\n            });\r\n            if (req) {\r\n                req.on('error', function (error) {\r\n                    // Unable to contact endpoint.\r\n                    // Do nothing for now.\r\n                    Logging.warn(CorrelationIdManager.TAG, error);\r\n                });\r\n                req.end();\r\n            }\r\n        };\r\n        setTimeout(fetchAppId, 0);\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\r\n        if (pendingLookups) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\r\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\r\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\r\n            if (parentId[parentId.length - 1] !== '.') {\r\n                parentId += '.';\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf('.');\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === '|' ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return '|' + Util.w3cTraceId() + '.';\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === '.' || c === '_') {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = '0' + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + '#';\r\n    };\r\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\r\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\r\n    CorrelationIdManager.pendingLookups = {};\r\n    CorrelationIdManager.completedLookups = {};\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Uri, workspace } from 'vscode';\nimport { RequestType, CommonLanguageClient } from 'vscode-languageclient';\nimport { Runtime } from './htmlClient';\n\nexport namespace FsContentRequest {\n\texport const type: RequestType<{ uri: string; encoding?: string; }, string, any, any> = new RequestType('fs/content');\n}\nexport namespace FsStatRequest {\n\texport const type: RequestType<string, FileStat, any, any> = new RequestType('fs/stat');\n}\n\nexport namespace FsReadDirRequest {\n\texport const type: RequestType<string, [string, FileType][], any, any> = new RequestType('fs/readDir');\n}\n\nexport function serveFileSystemRequests(client: CommonLanguageClient, runtime: Runtime) {\n\tclient.onRequest(FsContentRequest.type, (param: { uri: string; encoding?: string; }) => {\n\t\tconst uri = Uri.parse(param.uri);\n\t\tif (uri.scheme === 'file' && runtime.fs) {\n\t\t\treturn runtime.fs.getContent(param.uri);\n\t\t}\n\t\treturn workspace.fs.readFile(uri).then(buffer => {\n\t\t\treturn new runtime.TextDecoder(param.encoding).decode(buffer);\n\t\t});\n\t});\n\tclient.onRequest(FsReadDirRequest.type, (uriString: string) => {\n\t\tconst uri = Uri.parse(uriString);\n\t\tif (uri.scheme === 'file' && runtime.fs) {\n\t\t\treturn runtime.fs.readDirectory(uriString);\n\t\t}\n\t\treturn workspace.fs.readDirectory(uri);\n\t});\n\tclient.onRequest(FsStatRequest.type, (uriString: string) => {\n\t\tconst uri = Uri.parse(uriString);\n\t\tif (uri.scheme === 'file' && runtime.fs) {\n\t\t\treturn runtime.fs.stat(uriString);\n\t\t}\n\t\treturn workspace.fs.stat(uri);\n\t});\n}\n\nexport enum FileType {\n\t/**\n\t * The file type is unknown.\n\t */\n\tUnknown = 0,\n\t/**\n\t * A regular file.\n\t */\n\tFile = 1,\n\t/**\n\t * A directory.\n\t */\n\tDirectory = 2,\n\t/**\n\t * A symbolic link to a file.\n\t */\n\tSymbolicLink = 64\n}\nexport interface FileStat {\n\t/**\n\t * The type of the file, e.g. is a regular file, a directory, or symbolic link\n\t * to a file.\n\t */\n\ttype: FileType;\n\t/**\n\t * The creation timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n\t */\n\tctime: number;\n\t/**\n\t * The modification timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n\t */\n\tmtime: number;\n\t/**\n\t * The size in bytes.\n\t */\n\tsize: number;\n}\n\nexport interface RequestService {\n\tgetContent(uri: string, encoding?: string): Promise<string>;\n\n\tstat(uri: string): Promise<FileStat>;\n\treadDirectory(uri: string): Promise<[string, FileType][]>;\n}\n\nexport function getScheme(uri: string) {\n\treturn uri.substr(0, uri.indexOf(':'));\n}\n\nexport function dirname(uri: string) {\n\tconst lastIndexOfSlash = uri.lastIndexOf('/');\n\treturn lastIndexOfSlash !== -1 ? uri.substr(0, lastIndexOfSlash) : '';\n}\n\nexport function basename(uri: string) {\n\tconst lastIndexOfSlash = uri.lastIndexOf('/');\n\treturn uri.substr(lastIndexOfSlash + 1);\n}\n\nconst Slash = '/'.charCodeAt(0);\nconst Dot = '.'.charCodeAt(0);\n\nexport function isAbsolutePath(path: string) {\n\treturn path.charCodeAt(0) === Slash;\n}\n\nexport function resolvePath(uri: Uri, path: string): Uri {\n\tif (isAbsolutePath(path)) {\n\t\treturn uri.with({ path: normalizePath(path.split('/')) });\n\t}\n\treturn joinPath(uri, path);\n}\n\nexport function normalizePath(parts: string[]): string {\n\tconst newParts: string[] = [];\n\tfor (const part of parts) {\n\t\tif (part.length === 0 || part.length === 1 && part.charCodeAt(0) === Dot) {\n\t\t\t// ignore\n\t\t} else if (part.length === 2 && part.charCodeAt(0) === Dot && part.charCodeAt(1) === Dot) {\n\t\t\tnewParts.pop();\n\t\t} else {\n\t\t\tnewParts.push(part);\n\t\t}\n\t}\n\tif (parts.length > 1 && parts[parts.length - 1].length === 0) {\n\t\tnewParts.push('');\n\t}\n\tlet res = newParts.join('/');\n\tif (parts[0].length === 0) {\n\t\tres = '/' + res;\n\t}\n\treturn res;\n}\n\n\nexport function joinPath(uri: Uri, ...paths: string[]): Uri {\n\tconst parts = uri.path.split('/');\n\tfor (let path of paths) {\n\t\tparts.push(...path.split('/'));\n\t}\n\treturn uri.with({ path: normalizePath(parts) });\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.CommonLanguageClient = void 0;\nconst client_1 = require(\"./client\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst configuration_1 = require(\"./configuration\");\nconst implementation_1 = require(\"./implementation\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst progress_1 = require(\"./progress\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_proposed_1 = require(\"./semanticTokens.proposed\");\nclass CommonLanguageClient extends client_1.BaseLanguageClient {\n    constructor(id, name, clientOptions) {\n        super(id, name, clientOptions);\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    registerBuiltinFeatures() {\n        super.registerBuiltinFeatures();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\n        this.registerFeature(new progress_1.ProgressFeature(this));\n        this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));\n    }\n}\nexports.CommonLanguageClient = CommonLanguageClient;\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(client) {\n        let result = [\n            new semanticTokens_proposed_1.SemanticTokensFeature(client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n//# sourceMappingURL=commonClient.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n//# sourceMappingURL=disposable.js.map","module.exports = require(\"util\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"../common/messages\");\nexports.RequestType = messages_1.RequestType;\nexports.RequestType0 = messages_1.RequestType0;\nexports.RequestType1 = messages_1.RequestType1;\nexports.RequestType2 = messages_1.RequestType2;\nexports.RequestType3 = messages_1.RequestType3;\nexports.RequestType4 = messages_1.RequestType4;\nexports.RequestType5 = messages_1.RequestType5;\nexports.RequestType6 = messages_1.RequestType6;\nexports.RequestType7 = messages_1.RequestType7;\nexports.RequestType8 = messages_1.RequestType8;\nexports.RequestType9 = messages_1.RequestType9;\nexports.ResponseError = messages_1.ResponseError;\nexports.ErrorCodes = messages_1.ErrorCodes;\nexports.NotificationType = messages_1.NotificationType;\nexports.NotificationType0 = messages_1.NotificationType0;\nexports.NotificationType1 = messages_1.NotificationType1;\nexports.NotificationType2 = messages_1.NotificationType2;\nexports.NotificationType3 = messages_1.NotificationType3;\nexports.NotificationType4 = messages_1.NotificationType4;\nexports.NotificationType5 = messages_1.NotificationType5;\nexports.NotificationType6 = messages_1.NotificationType6;\nexports.NotificationType7 = messages_1.NotificationType7;\nexports.NotificationType8 = messages_1.NotificationType8;\nexports.NotificationType9 = messages_1.NotificationType9;\nconst disposable_1 = require(\"../common/disposable\");\nexports.Disposable = disposable_1.Disposable;\nconst events_1 = require(\"../common/events\");\nexports.Event = events_1.Event;\nexports.Emitter = events_1.Emitter;\nconst cancellation_1 = require(\"../common/cancellation\");\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\nexports.CancellationToken = cancellation_1.CancellationToken;\nconst messageReader_1 = require(\"../common/messageReader\");\nexports.MessageReader = messageReader_1.MessageReader;\nexports.AbstractMessageReader = messageReader_1.AbstractMessageReader;\nexports.ReadableStreamMessageReader = messageReader_1.ReadableStreamMessageReader;\nconst messageWriter_1 = require(\"../common/messageWriter\");\nexports.MessageWriter = messageWriter_1.MessageWriter;\nexports.AbstractMessageWriter = messageWriter_1.AbstractMessageWriter;\nexports.WriteableStreamMessageWriter = messageWriter_1.WriteableStreamMessageWriter;\nconst connection_1 = require(\"../common/connection\");\nexports.ConnectionStrategy = connection_1.ConnectionStrategy;\nexports.ConnectionOptions = connection_1.ConnectionOptions;\nexports.NullLogger = connection_1.NullLogger;\nexports.createMessageConnection = connection_1.createMessageConnection;\nexports.ProgressType = connection_1.ProgressType;\nexports.Trace = connection_1.Trace;\nexports.TraceFormat = connection_1.TraceFormat;\nexports.SetTraceNotification = connection_1.SetTraceNotification;\nexports.LogTraceNotification = connection_1.LogTraceNotification;\nexports.ConnectionErrors = connection_1.ConnectionErrors;\nexports.ConnectionError = connection_1.ConnectionError;\nexports.CancellationReceiverStrategy = connection_1.CancellationReceiverStrategy;\nexports.CancellationSenderStrategy = connection_1.CancellationSenderStrategy;\nexports.CancellationStrategy = connection_1.CancellationStrategy;\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    ErrorCodes.serverErrorStart = -32099;\n    ErrorCodes.serverErrorEnd = -32000;\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    // Defined by the protocol.\n    ErrorCodes.RequestCancelled = -32800;\n    ErrorCodes.ContentModified = -32801;\n    // Defined by VSCode library.\n    ErrorCodes.MessageWriteError = 1;\n    ErrorCodes.MessageReadError = 2;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        return {\n            code: this.code,\n            message: this.message,\n            data: this.data,\n        };\n    }\n}\nexports.ResponseError = ResponseError;\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(_method, _numberOfParams) {\n        this._method = _method;\n        this._numberOfParams = _numberOfParams;\n    }\n    get method() {\n        return this._method;\n    }\n    get numberOfParams() {\n        return this._numberOfParams;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n *\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\n/**\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n        this._ = undefined;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\n/**\n * Tests if the given message is a request message\n */\nfunction isRequestMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n}\nexports.isRequestMessage = isRequestMessage;\n/**\n * Tests if the given message is a notification message\n */\nfunction isNotificationMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && message.id === void 0;\n}\nexports.isNotificationMessage = isNotificationMessage;\n/**\n * Tests if the given message is a response message\n */\nfunction isResponseMessage(message) {\n    const candidate = message;\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n}\nexports.isResponseMessage = isResponseMessage;\n//# sourceMappingURL=messages.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = ral_1.default().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { ral_1.default().timer.clearTimeout(handle); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n//# sourceMappingURL=cancellation.js.map","module.exports = require(\"crypto\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toJSONObject = exports.ConfigurationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass ConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            let configuration = (params) => {\n                let result = [];\n                for (let item of params.items) {\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            let index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = toJSONObject(vscode_1.workspace.getConfiguration(undefined, resource).get(section));\n            }\n            else {\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = toJSONObject(config.get(section.substr(index + 1)));\n                }\n            }\n        }\n        else {\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (let key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = toJSONObject(config.get(key));\n                }\n            }\n        }\n        if (result === undefined) {\n            result = null;\n        }\n        return result;\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\nfunction toJSONObject(obj) {\n    if (obj) {\n        if (Array.isArray(obj)) {\n            return obj.map(toJSONObject);\n        }\n        else if (typeof obj === 'object') {\n            const res = Object.create(null);\n            for (const key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    res[key] = toJSONObject(obj[key]);\n                }\n            }\n            return res;\n        }\n    }\n    return obj;\n}\nexports.toJSONObject = toJSONObject;\n//# sourceMappingURL=configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCompletionItem extends code.CompletionItem {\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n//# sourceMappingURL=protocolCompletionItem.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCodeLens extends code.CodeLens {\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n//# sourceMappingURL=protocolCodeLens.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolDocumentLink extends code.DocumentLink {\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n//# sourceMappingURL=protocolDocumentLink.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUuid = exports.parse = exports.isUUID = exports.v4 = exports.empty = void 0;\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n//# sourceMappingURL=uuid.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressPart = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nclass ProgressPart {\n    constructor(_client, _token) {\n        this._client = _client;\n        this._token = _token;\n        this._reported = 0;\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\n            switch (value.kind) {\n                case 'begin':\n                    this.begin(value);\n                    break;\n                case 'report':\n                    this.report(value);\n                    break;\n                case 'end':\n                    this.done();\n                    break;\n            }\n        });\n    }\n    begin(params) {\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\n            this._progress = progress;\n            this._infinite = params.percentage === undefined;\n            this._cancellationToken = cancellationToken;\n            this._cancellationToken.onCancellationRequested(() => {\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        });\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\n            let delta = Math.max(0, percentage - this._reported);\n            this._progress.report({ message: params.message, increment: delta });\n            this._reported += delta;\n        }\n    }\n    cancel() {\n        if (this._disposable) {\n            this._disposable.dispose();\n            this._disposable = undefined;\n        }\n        if (this._reject) {\n            this._reject();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    done() {\n        if (this._disposable) {\n            this._disposable.dispose();\n            this._disposable = undefined;\n        }\n        if (this._resolve) {\n            this._resolve();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n}\nexports.ProgressPart = ProgressPart;\n//# sourceMappingURL=progressPart.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","module.exports = require(\"events\");","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectPerformance = (function () {\r\n    function AutoCollectPerformance(client) {\r\n        if (!!AutoCollectPerformance.INSTANCE) {\r\n            throw new Error(\"Performance tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectPerformance.INSTANCE = this;\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === 'function') {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, 60000);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (request, response) {\r\n        var _this = this;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        var start = +new Date;\r\n        if (!request || !response) {\r\n            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);\r\n            return;\r\n        }\r\n        // response listeners\r\n        if (typeof response.once === \"function\") {\r\n            response.once(\"finish\", function () {\r\n                var end = +new Date;\r\n                _this._lastRequestExecutionTime = end - start;\r\n                AutoCollectPerformance._totalRequestCount++;\r\n                if (response.statusCode >= 400) {\r\n                    AutoCollectPerformance._totalFailedRequestCount++;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === 'function') {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: \"\\\\Processor(_Total)\\\\% Processor Time\", value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\", value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\", value: usedMem });\r\n        this._client.trackMetric({ name: \"\\\\Memory\\\\Available Bytes\", value: freeMem });\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\", value: requestsPerSec });\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\", value: AutoCollectPerformance._lastRequestExecutionTime });\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP requst/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable();\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader());\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== 'function') {\r\n                throw new Error('onRequest handler must be a function');\r\n            }\r\n            return function (request, response) {\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    // Set up correlation context\r\n                    var requestParser_1 = new HttpRequestParser(request);\r\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\r\n                    // Note: Check for if correlation is enabled happens within this method.\r\n                    // If not enabled, function will directly call the callback.\r\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                        if (_this._isEnabled) {\r\n                            // Mark as auto collected\r\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                            // Auto collect request\r\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\r\n                        }\r\n                        // Add this request to the performance counter\r\n                        // Note: Check for if perf counters are enabled happens within this method.\r\n                        // TODO: Refactor common bits between trackRequest and countRequest so they can\r\n                        // be used together, even when perf counters are on, and request tracking is off\r\n                        AutoCollectPerformance.countRequest(request, response);\r\n                        if (typeof onRequest === \"function\") {\r\n                            onRequest(request, response);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case 'request':\r\n                    case 'checkContinue':\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        http.createServer = function (onRequest) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            if (correlationHeader) {\r\n                var components = correlationHeader.split(\",\");\r\n                var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                    response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            else {\r\n                response.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n            }\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getNodeFSRequestService } from './nodeFs';\nimport { ExtensionContext } from 'vscode';\nimport { startClient, LanguageClientConstructor } from '../htmlClient';\nimport { ServerOptions, TransportKind, LanguageClientOptions, LanguageClient } from 'vscode-languageclient/node';\nimport { TextDecoder } from 'util';\nimport * as fs from 'fs';\nimport TelemetryReporter from 'vscode-extension-telemetry';\n\n\nlet telemetry: TelemetryReporter | undefined;\n\n// this method is called when vs code is activated\nexport function activate(context: ExtensionContext) {\n\n\tlet clientPackageJSON = getPackageInfo(context);\n\ttelemetry = new TelemetryReporter(clientPackageJSON.name, clientPackageJSON.version, clientPackageJSON.aiKey);\n\n\tconst serverMain = `./server/${clientPackageJSON.main.indexOf('/dist/') !== -1 ? 'dist' : 'out'}/node/htmlServerMain`;\n\tconst serverModule = context.asAbsolutePath(serverMain);\n\n\t// The debug options for the server\n\tconst debugOptions = { execArgv: ['--nolazy', '--inspect=6044'] };\n\n\t// If the extension is launch in debug mode the debug server options are use\n\t// Otherwise the run options are used\n\tconst serverOptions: ServerOptions = {\n\t\trun: { module: serverModule, transport: TransportKind.ipc },\n\t\tdebug: { module: serverModule, transport: TransportKind.ipc, options: debugOptions }\n\t};\n\n\tconst newLanguageClient: LanguageClientConstructor = (id: string, name: string, clientOptions: LanguageClientOptions) => {\n\t\treturn new LanguageClient(id, name, serverOptions, clientOptions);\n\t};\n\n\tstartClient(context, newLanguageClient, { fs: getNodeFSRequestService(), TextDecoder, telemetry });\n}\n\ninterface IPackageInfo {\n\tname: string;\n\tversion: string;\n\taiKey: string;\n\tmain: string;\n}\n\nfunction getPackageInfo(context: ExtensionContext): IPackageInfo {\n\tconst location = context.asAbsolutePath('./package.json');\n\ttry {\n\t\treturn JSON.parse(fs.readFileSync(location).toString());\n\t} catch (e) {\n\t\tconsole.log(`Problems reading ${location}: ${e}`);\n\t\treturn { name: '', version: '', aiKey: '', main: '' };\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { Uri } from 'vscode';\nimport { getScheme, RequestService, FileType } from '../requests';\n\nexport function getNodeFSRequestService(): RequestService {\n\tfunction ensureFileUri(location: string) {\n\t\tif (getScheme(location) !== 'file') {\n\t\t\tthrow new Error('fileRequestService can only handle file URLs');\n\t\t}\n\t}\n\treturn {\n\t\tgetContent(location: string, encoding?: string) {\n\t\t\tensureFileUri(location);\n\t\t\treturn new Promise((c, e) => {\n\t\t\t\tconst uri = Uri.parse(location);\n\t\t\t\tfs.readFile(uri.fsPath, encoding, (err, buf) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn e(err);\n\t\t\t\t\t}\n\t\t\t\t\tc(buf.toString());\n\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tstat(location: string) {\n\t\t\tensureFileUri(location);\n\t\t\treturn new Promise((c, e) => {\n\t\t\t\tconst uri = Uri.parse(location);\n\t\t\t\tfs.stat(uri.fsPath, (err, stats) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code === 'ENOENT') {\n\t\t\t\t\t\t\treturn c({ type: FileType.Unknown, ctime: -1, mtime: -1, size: -1 });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn e(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet type = FileType.Unknown;\n\t\t\t\t\tif (stats.isFile()) {\n\t\t\t\t\t\ttype = FileType.File;\n\t\t\t\t\t} else if (stats.isDirectory()) {\n\t\t\t\t\t\ttype = FileType.Directory;\n\t\t\t\t\t} else if (stats.isSymbolicLink()) {\n\t\t\t\t\t\ttype = FileType.SymbolicLink;\n\t\t\t\t\t}\n\n\t\t\t\t\tc({\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tctime: stats.ctime.getTime(),\n\t\t\t\t\t\tmtime: stats.mtime.getTime(),\n\t\t\t\t\t\tsize: stats.size\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\treadDirectory(location: string) {\n\t\t\tensureFileUri(location);\n\t\t\treturn new Promise((c, e) => {\n\t\t\t\tconst path = Uri.parse(location).fsPath;\n\n\t\t\t\tfs.readdir(path, { withFileTypes: true }, (err, children) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn e(err);\n\t\t\t\t\t}\n\t\t\t\t\tc(children.map(stat => {\n\t\t\t\t\t\tif (stat.isSymbolicLink()) {\n\t\t\t\t\t\t\treturn [stat.name, FileType.SymbolicLink];\n\t\t\t\t\t\t} else if (stat.isDirectory()) {\n\t\t\t\t\t\t\treturn [stat.name, FileType.Directory];\n\t\t\t\t\t\t} else if (stat.isFile()) {\n\t\t\t\t\t\t\treturn [stat.name, FileType.File];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn [stat.name, FileType.Unknown];\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"../common/ral\");\nconst disposable_1 = require(\"../common/disposable\");\nconst util_1 = require(\"util\");\nconst DefaultSize = 8192;\nconst CR = Buffer.from('\\r', 'ascii')[0];\nconst LF = Buffer.from('\\n', 'ascii')[0];\nconst CRLF = '\\r\\n';\nclass MessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this.index = 0;\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        let toAppend;\n        if (typeof chunk === 'string') {\n            toAppend = Buffer.from(chunk, this._encoding);\n        }\n        else {\n            toAppend = chunk;\n        }\n        if (this.buffer.length - this.index >= toAppend.length) {\n            this.buffer.set(toAppend, this.index);\n        }\n        else {\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\n            if (this.index === 0) {\n                this.buffer = Buffer.allocUnsafe(newSize);\n                this.buffer.set(toAppend);\n            }\n            else {\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\n            }\n        }\n        this.index += toAppend.length;\n    }\n    tryReadHeaders() {\n        let current = 0;\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\n            current++;\n        }\n        // No header / body separator found (e.g CRLFCRLF)\n        if (current + 3 >= this.index) {\n            return undefined;\n        }\n        const result = new Map();\n        const headers = this.buffer.toString('ascii', 0, current).split(CRLF);\n        headers.forEach((header) => {\n            let index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            let key = header.substr(0, index);\n            let value = header.substr(index + 1).trim();\n            result.set(key, value);\n        });\n        let nextStart = current + 4;\n        this.buffer = this.buffer.slice(nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    tryReadBody(length) {\n        if (this.index < length) {\n            return undefined;\n        }\n        const result = Buffer.alloc(length);\n        this.buffer.copy(result, 0, 0, length);\n        const nextStart = length;\n        this.buffer.copy(this.buffer, 0, nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    get numberOfBytes() {\n        return this.index;\n    }\n}\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (buffer instanceof Buffer) {\n                    return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                }\n                else {\n                    return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            return setTimeout(callback, ms, ...args);\n        },\n        clearTimeout(handle) {\n            clearTimeout(handle);\n        },\n        setImmediate(callback, ...args) {\n            return setImmediate(callback, ...args);\n        },\n        clearImmediate(handle) {\n            clearImmediate(handle);\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        ral_1.default.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n//# sourceMappingURL=ril.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        var _a;\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options !== null && options !== void 0 ? options : 'utf-8';\n        }\n        else {\n            charset = (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = ral_1.default().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = ral_1.default().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders();\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('Content-Length');\n                if (!contentLength) {\n                    throw new Error('Header must provide a Content-Length property.');\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    throw new Error('Content-Length value must be a number.');\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            let p;\n            if (this.options.contentDecoder !== undefined) {\n                p = this.options.contentDecoder.decode(body);\n            }\n            else {\n                p = Promise.resolve(body);\n            }\n            p.then((value) => {\n                this.options.contentTypeDecoder.decode(value, this.options).then((msg) => {\n                    this.callback(msg);\n                }, (error) => {\n                    this.fireError(error);\n                });\n            }, (error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            ral_1.default().timer.clearTimeout(this.partialMessageTimer);\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = ral_1.default().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n//# sourceMappingURL=messageReader.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        var _a, _b;\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options !== null && options !== void 0 ? options : 'utf-8', contentTypeEncoder: ral_1.default().applicationJson.encoder };\n        }\n        else {\n            return { charset: (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: (_b = options.contentTypeEncoder) !== null && _b !== void 0 ? _b : ral_1.default().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n            if (this.options.contentEncoder !== undefined) {\n                return this.options.contentEncoder.encode(buffer);\n            }\n            else {\n                return buffer;\n            }\n        });\n        return payload.then((buffer) => {\n            const headers = [];\n            headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n            headers.push(CRLF);\n            return this.doWrite(msg, headers, buffer);\n        }, (error) => {\n            this.fireError(error);\n            throw error;\n        });\n    }\n    doWrite(msg, headers, data) {\n        return this.writeSemaphore.lock(async () => {\n            try {\n                await this.writable.write(headers.join(''), 'ascii');\n                return this.writable.write(data);\n            }\n            catch (error) {\n                this.handleError(error, msg);\n            }\n        });\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n//# sourceMappingURL=messageWriter.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        ral_1.default().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n//# sourceMappingURL=semaphore.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.createCancellationTokenSource);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSquenceNumber = 0;\n    let unknownResponseSquenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = Object.create(null);\n    let starNotificationHandler = undefined;\n    const notificationHandlers = Object.create(null);\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = Object.create(null);\n    let requestTokens = Object.create(null);\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSquenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.isRequestMessage(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.isResponseMessage(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = ral_1.default().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            if (messages_1.isRequestMessage(message)) {\n                handleRequest(message);\n            }\n            else if (messages_1.isNotificationMessage(message)) {\n                handleNotification(message);\n            }\n            else if (messages_1.isResponseMessage(message)) {\n                handleResponse(message);\n            }\n            else {\n                handleInvalidMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\n                const key = createRequestQueueKey(message.params.id);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.isRequestMessage(toCancel)) {\n                    const strategy = options === null || options === void 0 ? void 0 : options.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response);\n                        return;\n                    }\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers[requestMessage.method];\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = String(requestMessage.id);\n            const cancellationSource = cancellationStrategy.receiver.createCancellationTokenSource(tokenKey);\n            requestTokens[tokenKey] = cancellationSource;\n            try {\n                let handlerResult;\n                if (requestMessage.params === undefined || (type !== undefined && type.numberOfParams === 0)) {\n                    handlerResult = requestHandler\n                        ? requestHandler(cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\n                }\n                else if (Is.array(requestMessage.params) && (type === undefined || type.numberOfParams > 1)) {\n                    handlerResult = requestHandler\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\n                }\n                else {\n                    handlerResult = requestHandler\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    delete requestTokens[tokenKey];\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        delete requestTokens[tokenKey];\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        delete requestTokens[tokenKey];\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    delete requestTokens[tokenKey];\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                delete requestTokens[tokenKey];\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = String(responseMessage.id);\n            const responsePromise = responsePromises[key];\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise) {\n                delete responsePromises[key];\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            notificationHandler = (params) => {\n                const id = params.id;\n                const source = requestTokens[String(id)];\n                if (source) {\n                    source.cancel();\n                }\n            };\n        }\n        else {\n            const element = notificationHandlers[message.method];\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (message.params === undefined || (type !== undefined && type.numberOfParams === 0)) {\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\n                }\n                else if (Is.array(message.params) && (type === undefined || type.numberOfParams > 1)) {\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\n                }\n                else {\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = String(responseMessage.id);\n            const responseHandler = responsePromises[key];\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = null;\n                break;\n            case 1:\n                result = undefinedToNull(params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...params) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                switch (params.length) {\n                    case 0:\n                        messageParams = null;\n                        break;\n                    case 1:\n                        messageParams = params[0];\n                        break;\n                    default:\n                        messageParams = params;\n                        break;\n                }\n            }\n            else {\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            messageWriter.write(notificationMessage);\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    notificationHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    notificationHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...params) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                switch (params.length) {\n                    case 0:\n                        messageParams = null;\n                        break;\n                    case 1:\n                        // The cancellation token is optional so it can also be undefined.\n                        if (cancellation_1.CancellationToken.is(params[0])) {\n                            messageParams = null;\n                            token = params[0];\n                        }\n                        else {\n                            messageParams = undefinedToNull(params[0]);\n                        }\n                        break;\n                    default:\n                        const last = params.length - 1;\n                        if (cancellation_1.CancellationToken.is(params[last])) {\n                            token = params[last];\n                            if (params.length === 2) {\n                                messageParams = undefinedToNull(params[0]);\n                            }\n                            else {\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\n                            }\n                        }\n                        else {\n                            messageParams = params.map(value => undefinedToNull(value));\n                        }\n                        break;\n                }\n            }\n            else {\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    cancellationStrategy.sender.sendCancellation(connection, id);\n                });\n            }\n            const result = new Promise((resolve, reject) => {\n                const requestMessage = {\n                    jsonrpc: version,\n                    id: id,\n                    method: method,\n                    params: messageParams\n                };\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                let responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                traceSendingRequest(requestMessage);\n                try {\n                    messageWriter.write(requestMessage);\n                }\n                catch (e) {\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\n                    responsePromise = null;\n                }\n                if (responsePromise) {\n                    responsePromises[String(id)] = responsePromise;\n                }\n            });\n            return result;\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (Is.func(type)) {\n                starRequestHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    requestHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    requestHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new Error('Connection got disposed.');\n            Object.keys(responsePromises).forEach((key) => {\n                responsePromises[key].reject(error);\n            });\n            responsePromises = Object.create(null);\n            requestTokens = Object.create(null);\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            ral_1.default().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[Symbol.toStringTag] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        var _a;\n        return (_a = this._head) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get last() {\n        var _a;\n        return (_a = this._tail) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=linkedMap.js.map","module.exports = require(\"net\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"vscode-jsonrpc\"));\n__export(require(\"vscode-languageserver-types\"));\n__export(require(\"./messages\"));\n__export(require(\"./protocol\"));\nvar connection_1 = require(\"./connection\");\nexports.createProtocolConnection = connection_1.createProtocolConnection;\nconst st = require(\"./protocol.semanticTokens.proposed\");\nvar Proposed;\n(function (Proposed) {\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\n    Proposed.SemanticTokens = st.SemanticTokens;\n    let SemanticTokensRequest;\n    (function (SemanticTokensRequest) {\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\n    let SemanticTokensEditsRequest;\n    (function (SemanticTokensEditsRequest) {\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\n    let SemanticTokensRangeRequest;\n    (function (SemanticTokensRangeRequest) {\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\n//# sourceMappingURL=api.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * [LocationLink](#LocationLink) literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [Color](#Color) literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.red)\n            && Is.number(candidate.green)\n            && Is.number(candidate.blue)\n            && Is.number(candidate.alpha);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * [ColorInformation](#ColorInformation) literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [ColorPresentation](#ColorPresentation) literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * Enum of known range kinds\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * [FoldingRange](#FoldingRange) literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The DiagnosticCode namespace provides functions to deal with complex diagnostic codes.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var DiagnosticCode;\n(function (DiagnosticCode) {\n    /**\n     * Checks whether the given liternal conforms to the [DiagnosticCode](#DiagnosticCode) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (DiagnosticCode = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'create',\n            uri: uri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options) {\n        var result = {\n            kind: 'rename',\n            oldUri: oldUri,\n            newUri: newUri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'delete',\n            uri: uri\n        };\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits) {\n        this.edits = edits;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\n        this.edits.push(TextEdit.insert(position, newText));\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\n        this.edits.push(TextEdit.replace(range, newText));\n    };\n    TextEditChangeImpl.prototype.delete = function (range) {\n        this.edits.push(TextEdit.del(range));\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                workspaceEdit.documentChanges.forEach(function (change) {\n                    if (TextDocumentEdit.is(change)) {\n                        var textEditChange = new TextEditChangeImpl(change.edits);\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            if (this._workspaceEdit === undefined) {\n                return { documentChanges: [] };\n            }\n            return this._workspaceEdit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (VersionedTextDocumentIdentifier.is(key)) {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    documentChanges: []\n                };\n            }\n            if (!this._workspaceEdit.documentChanges) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var textDocument = key;\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    changes: Object.create(null)\n                };\n            }\n            if (!this._workspaceEdit.changes) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    WorkspaceChange.prototype.createFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\n    };\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param uri The document's text.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n(function (MarkupKind) {\n    /**\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText: newText, insert: insert, replace: replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [InsertReplaceEdit](#InsertReplaceEdit) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n * @since 3.15\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== void 0) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === void 0 || Array.isArray(candidate.children)) &&\n            (candidate.tags === void 0 || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only) {\n        var result = { diagnostics: diagnostics };\n        if (only !== void 0 && only !== null) {\n            result.only = only;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, commandOrEdit, kind) {\n        var result = { title: title };\n        if (Command.is(commandOrEdit)) {\n            result.command = commandOrEdit;\n        }\n        else {\n            result.edit = commandOrEdit;\n        }\n        if (kind !== void 0) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range: range, parent: parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"./utils/is\");\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\nconst protocol_progress_1 = require(\"./protocol.progress\");\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nexports.CallHierarchyIncomingCallsRequest = protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest;\nexports.CallHierarchyOutgoingCallsRequest = protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest;\nexports.CallHierarchyPrepareRequest = protocol_callHierarchy_1.CallHierarchyPrepareRequest;\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * The DocumentFilter namespace provides helper functions to work with\n * [DocumentFilter](#DocumentFilter) literals.\n */\nvar DocumentFilter;\n(function (DocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    DocumentFilter.is = is;\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * [DocumentSelector](#DocumentSelector)s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling startegy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type [InitializeParams](#InitializeParams)\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeError`;\n */\nvar InitializeError;\n(function (InitializeError) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeError.unknownProtocolVersion = 1;\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\n/**\n * The intialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n    /** @deprecated Use CompletionRequest.type */\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type [CompletionItem](#CompletionItem) the response\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\n * type [Hover](#Hover) or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\n * to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n    /** @deprecated Use DefinitionRequest.type */\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type [ReferenceParams](#ReferenceParams) the response is of type\n * [Location[]](#Location) or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n    /** @deprecated Use ReferencesRequest.type */\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n/**\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n    /** @deprecated Use DocumentHighlightRequest.type */\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n    /** @deprecated Use DocumentSymbolRequest.type */\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n    /** @deprecated Use CodeActionRequest.type */\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\n * resolves to such.\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n    /** @deprecated Use WorkspaceSymbolRequest.type */\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\n    /** @deprecated Use CodeLensRequest.type */\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n    /** @deprecated Use DocumentLinkRequest.type */\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type [DocumentLink](#DocumentLink) the response\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n//# sourceMappingURL=protocol.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n    /** @deprecated Use ImplementationRequest.type */\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\n//# sourceMappingURL=protocol.implementation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n    /** @deprecated Use TypeDefinitionRequest.type */\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\n//# sourceMappingURL=protocol.typeDefinition.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\n//# sourceMappingURL=protocol.workspaceFolders.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\n//# sourceMappingURL=protocol.configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n    /** @deprecated Use DocumentColorRequest.type */\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\n//# sourceMappingURL=protocol.colorProvider.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * Enum of known range kinds\n */\nvar FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n    /** @deprecated Use FoldingRangeRequest.type */\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\n//# sourceMappingURL=protocol.foldingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\n * to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n    /** @deprecated Use DeclarationRequest.type */\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\n//# sourceMappingURL=protocol.declaration.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n    /** @deprecated  Use SelectionRangeRequest.type */\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\n//# sourceMappingURL=protocol.selectionRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\n//# sourceMappingURL=protocol.progress.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to a incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\n//# sourceMappingURL=protocol.callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return vscode_jsonrpc_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"member\"] = \"member\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensEditsRequest;\n(function (SemanticTokensEditsRequest) {\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\n//# sourceMappingURL=protocol.semanticTokens.proposed.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nvar InsertReplaceRange;\n(function (InsertReplaceRange) {\n    function is(value) {\n        const candidate = value;\n        return candidate && !!candidate.inserting && !!candidate.replacing;\n    }\n    InsertReplaceRange.is = is;\n})(InsertReplaceRange || (InsertReplaceRange = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: {\n                uri: _uriConverter(textDocument.uri),\n                languageId: textDocument.languageId,\n                version: textDocument.version,\n                text: textDocument.getText()\n            }\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        let candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        let candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg) {\n        if (isTextDocument(arg)) {\n            let result = {\n                textDocument: {\n                    uri: _uriConverter(arg.uri),\n                    version: arg.version\n                },\n                contentChanges: [{ text: arg.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg)) {\n            let document = arg.document;\n            let result = {\n                textDocument: {\n                    uri: _uriConverter(document.uri),\n                    version: document.version\n                },\n                contentChanges: arg.contentChanges.map((change) => {\n                    let range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        let result = {\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.SignatureHelpTriggerKind.Invoke:\n                return proto.SignatureHelpTriggerKind.Invoked;\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\n            case code.SignatureHelpTriggerKind.ContentChange:\n                return proto.SignatureHelpTriggerKind.ContentChange;\n        }\n    }\n    function asParameterInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label\n        };\n    }\n    function asParameterInformations(values) {\n        return values.map(asParameterInformation);\n    }\n    function asSignatureInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label,\n            parameters: asParameterInformations(value.parameters)\n        };\n    }\n    function asSignatureInformations(values) {\n        return values.map(asSignatureInformation);\n    }\n    function asSignatureHelp(value) {\n        if (value === undefined) {\n            return value;\n        }\n        return {\n            signatures: asSignatureInformations(value.signatures),\n            activeSignature: value.activeSignature,\n            activeParameter: value.activeParameter\n        };\n    }\n    function asSignatureHelpParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                isRetrigger: context.isRetrigger,\n                triggerCharacter: context.triggerCharacter,\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { line: value.line, character: value.character };\n    }\n    function asPositions(value) {\n        let result = [];\n        for (let elem of value) {\n            result.push(asPosition(elem));\n        }\n        return result;\n    }\n    function asRange(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asLocation(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            case code.DiagnosticTag.Deprecated:\n                return proto.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asRelatedInformation(item) {\n        return {\n            message: item.message,\n            location: asLocation(item.location)\n        };\n    }\n    function asRelatedInformations(items) {\n        return items.map(asRelatedInformation);\n    }\n    function asDiagnosticCode(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        if (Is.number(value) || Is.string(value)) {\n            return value;\n        }\n        return { value: value.value, target: asUri(value.target) };\n    }\n    function asDiagnostic(item) {\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        result.code = asDiagnosticCode(item.code);\n        {\n            if (Array.isArray(item.tags)) {\n                result.tags = asDiagnosticTags(item.tags);\n            }\n        }\n        if (item.relatedInformation) {\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\n        }\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case code.CompletionItemTag.Deprecated:\n                return proto.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined) {\n            return tags;\n        }\n        const result = [];\n        for (let tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item) {\n        let result = { label: item.label };\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const tags = asCompletionItemTags(item.tags);\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\n                    if (index !== -1) {\n                        tags.splice(index, 1);\n                    }\n                }\n                result.deprecated = protocolItem.deprecated;\n            }\n        }\n        if (tags !== undefined && tags.length > 0) {\n            result.tags = tags;\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text = undefined;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = source.textEdit.range;\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = source.range;\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text !== undefined && range !== undefined) {\n            target.textEdit = asCompletionTextEdit(text, range);\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asCompletionTextEdit(newText, range) {\n        if (InsertReplaceRange.is(range)) {\n            return proto.InsertReplaceEdit.create(newText, asRange(range.inserting), asRange(range.replacing));\n        }\n        else {\n            return { newText, range: asRange(range) };\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === undefined || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asSymbolKind(item) {\n        if (item <= code.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return (item + 1);\n        }\n        return proto.SymbolKind.Property;\n    }\n    function asSymbolTag(item) {\n        return item;\n    }\n    function asSymbolTags(items) {\n        return items.map(asSymbolTag);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    function asCodeActionContext(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\n    }\n    function asCommand(item) {\n        let result = proto.Command.create(item.title, item.command);\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        let result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n        }\n        return result;\n    }\n    function asFormattingOptions(item) {\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        let result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = item.tooltip;\n        }\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asSignatureHelpParams,\n        asWorkerPosition,\n        asRange,\n        asPosition,\n        asPositions,\n        asLocation,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asDiagnostic,\n        asDiagnostics,\n        asCompletionItem,\n        asTextEdit,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asReferenceParams,\n        asCodeActionContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams\n    };\n}\nexports.createConverter = createConverter;\n//# sourceMappingURL=codeConverter.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst ls = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDiagnostics(diagnostics) {\n        return diagnostics.map(asDiagnostic);\n    }\n    function asDiagnostic(diagnostic) {\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\n            result.code = diagnostic.code;\n        }\n        if (ls.DiagnosticCode.is(diagnostic.code)) {\n            result.code = { value: diagnostic.code.value, target: asUri(diagnostic.code.target) };\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        return relatedInformation.map(asDiagnosticRelatedInformation);\n    }\n    function asDiagnosticRelatedInformation(information) {\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            case ls.DiagnosticTag.Deprecated:\n                return code.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        if (!value) {\n            return undefined;\n        }\n        return new code.Position(value.line, value.character);\n    }\n    function asRange(value) {\n        if (!value) {\n            return undefined;\n        }\n        return new code.Range(asPosition(value.start), asPosition(value.end));\n    }\n    function asRanges(value) {\n        return value.map(value => asRange(value));\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === undefined || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return new code.MarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            let result = new code.MarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            let result = [];\n            for (let element of value) {\n                let item = new code.MarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            let result;\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return new code.MarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    return result;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    return result;\n            }\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return new code.MarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    function asCompletionResult(result) {\n        if (!result) {\n            return undefined;\n        }\n        if (Array.isArray(result)) {\n            let items = result;\n            return items.map(asCompletionItem);\n        }\n        let list = result;\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case ls.CompletionItemTag.Deprecated:\n                return code.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined || tags === null) {\n            return [];\n        }\n        const result = [];\n        for (let tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItem(item) {\n        let tags = asCompletionItemTags(item.tags);\n        let result = new protocolCompletionItem_1.default(item.label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        let insertText = asCompletionInsertText(item);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (Is.stringArray(item.commitCharacters)) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n            if (item.deprecated === true) {\n                tags.push(code.CompletionItemTag.Deprecated);\n            }\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        if (item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (tags.length > 0) {\n            result.tags = tags;\n        }\n        return result;\n    }\n    function asCompletionInsertText(item) {\n        if (item.textEdit) {\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.textEdit.newText), range: asCompletionRange(item.textEdit), fromEdit: true };\n            }\n            else {\n                return { text: item.textEdit.newText, range: asCompletionRange(item.textEdit), fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function asCompletionRange(value) {\n        if (ls.InsertReplaceEdit.is(value)) {\n            return { inserting: asRange(value.insert), replacing: asRange(value.replace) };\n        }\n        else {\n            return asRange(value.range);\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    function asTextEdits(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asTextEdit);\n    }\n    function asSignatureHelp(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = asSignatureInformations(item.signatures);\n        }\n        return result;\n    }\n    function asSignatureInformations(items) {\n        return items.map(asSignatureInformation);\n    }\n    function asSignatureInformation(item) {\n        let result = new code.SignatureInformation(item.label);\n        if (item.documentation !== undefined) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters !== undefined) {\n            result.parameters = asParameterInformations(item.parameters);\n        }\n        if (item.activeParameter !== undefined) {\n            result.activeParameter = item.activeParameter;\n        }\n        {\n            return result;\n        }\n    }\n    function asParameterInformations(item) {\n        return item.map(asParameterInformation);\n    }\n    function asParameterInformation(item) {\n        let result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        return result;\n    }\n    function asLocation(item) {\n        if (!item) {\n            return undefined;\n        }\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\n    }\n    function asDeclarationResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item);\n    }\n    function asDefinitionResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetSelectionRange),\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    function asLocationResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                let links = item;\n                return links.map((link) => asLocationLink(link));\n            }\n            else {\n                let locations = item;\n                return locations.map((location) => asLocation(location));\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    function asReferences(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(location => asLocation(location));\n    }\n    function asDocumentHighlights(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(asDocumentHighlight);\n    }\n    function asDocumentHighlight(item) {\n        let result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    function asSymbolInformations(values, uri) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(information => asSymbolInformation(information, uri));\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolTag(value) {\n        switch (value) {\n            case ls.SymbolTag.Deprecated:\n                return code.SymbolTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asSymbolTags(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        const result = [];\n        for (const item of items) {\n            const converted = asSymbolTag(item);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length === 0 ? undefined : result;\n    }\n    function asSymbolInformation(item, uri) {\n        // Symbol kind is one based in the protocol and zero based in code.\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\n        fillTags(result, item);\n        if (item.containerName) {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asDocumentSymbols(values) {\n        if (values === undefined || values === null) {\n            return undefined;\n        }\n        return values.map(asDocumentSymbol);\n    }\n    function asDocumentSymbol(value) {\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        fillTags(result, value);\n        if (value.children !== undefined && value.children.length > 0) {\n            let children = [];\n            for (let child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function fillTags(result, value) {\n        result.tags = asSymbolTags(value.tags);\n        if (value.deprecated) {\n            if (!result.tags) {\n                result.tags = [code.SymbolTag.Deprecated];\n            }\n            else {\n                if (!result.tags.includes(code.SymbolTag.Deprecated)) {\n                    result.tags = result.tags.concat(code.SymbolTag.Deprecated);\n                }\n            }\n        }\n    }\n    function asCommand(item) {\n        let result = { title: item.title, command: item.command };\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCommands(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asCommand);\n    }\n    const kindMapping = new Map();\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        let parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (let part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    function asCodeAction(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = new code.CodeAction(item.title);\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics) {\n            result.diagnostics = asDiagnostics(item.diagnostics);\n        }\n        if (item.edit) {\n            result.edit = asWorkspaceEdit(item.edit);\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== undefined && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asCodeLenses(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map((codeLens) => asCodeLens(codeLens));\n    }\n    function asWorkspaceEdit(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            item.documentChanges.forEach(change => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options);\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options);\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\n                }\n                else {\n                    throw new Error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            });\n        }\n        else if (item.changes) {\n            Object.keys(item.changes).forEach(key => {\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\n            });\n        }\n        return result;\n    }\n    function asDocumentLink(item) {\n        let range = asRange(item.range);\n        let target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        let link = new protocolDocumentLink_1.default(range, target);\n        if (item.tooltip !== undefined) {\n            link.tooltip = item.tooltip;\n        }\n        if (item.data !== undefined && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    function asDocumentLinks(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(asDocumentLink);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    function asColorInformations(colorInformation) {\n        if (Array.isArray(colorInformation)) {\n            return colorInformation.map(asColorInformation);\n        }\n        return undefined;\n    }\n    function asColorPresentation(cp) {\n        let presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    function asColorPresentations(colorPresentations) {\n        if (Array.isArray(colorPresentations)) {\n            return colorPresentations.map(asColorPresentation);\n        }\n        return undefined;\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return undefined;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    function asFoldingRanges(foldingRanges) {\n        if (Array.isArray(foldingRanges)) {\n            return foldingRanges.map(asFoldingRange);\n        }\n        return undefined;\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    function asSelectionRanges(selectionRanges) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        let result = [];\n        for (let range of selectionRanges) {\n            result.push(asSelectionRange(range));\n        }\n        return result;\n    }\n    return {\n        asUri,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asRanges,\n        asPosition,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges\n    };\n}\nexports.createConverter = createConverter;\n//# sourceMappingURL=protocolConverter.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Delayer = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                var result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = vscode_languageserver_protocol_1.RAL().timer.setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        let result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== void 0;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== void 0) {\n            vscode_languageserver_protocol_1.RAL().timer.clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\n//# sourceMappingURL=async.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorProviderFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideColorPresentations: (color, context, token) => {\n                const client = this._client;\n                const provideColorPresentations = (color, context, token) => {\n                    const requestParams = {\n                        color,\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                        range: client.code2ProtocolConverter.asRange(context.range)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                const client = this._client;\n                const provideDocumentColors = (document, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        };\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\n    }\n    asColor(color) {\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    asColorInformations(colorInformation) {\n        if (Array.isArray(colorInformation)) {\n            return colorInformation.map(ci => {\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\n            });\n        }\n        return [];\n    }\n    asColorPresentations(colorPresentations) {\n        if (Array.isArray(colorPresentations)) {\n            return colorPresentations.map(cp => {\n                let presentation = new vscode_1.ColorPresentation(cp.label);\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\n                return presentation;\n            });\n        }\n        return [];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n//# sourceMappingURL=colorProvider.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass ImplementationFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideImplementation: (document, position, token) => {\n                const client = this._client;\n                const provideImplementation = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n//# sourceMappingURL=implementation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideTypeDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideTypeDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n//# sourceMappingURL=typeDefinition.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = exports.arrayDiff = void 0;\nconst UUID = require(\"./utils/uuid\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === void 0) {\n        return undefined;\n    }\n    return target[key];\n}\nfunction arrayDiff(left, right) {\n    return left.filter(element => right.indexOf(element) < 0);\n}\nexports.arrayDiff = arrayDiff;\nclass WorkspaceFoldersFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._listeners = new Map();\n    }\n    get messages() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        let folders = vscode_1.workspace.workspaceFolders;\n        this.initializeWithFolders(folders);\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    initializeWithFolders(currentWorkspaceFolders) {\n        this._initialFolders = currentWorkspaceFolders;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            let workspaceFolders = () => {\n                let folders = vscode_1.workspace.workspaceFolders;\n                if (folders === void 0) {\n                    return null;\n                }\n                let result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register(this.messages, {\n                id: id,\n                registerOptions: undefined\n            });\n        }\n    }\n    sendInitialEvent(currentWorkspaceFolders) {\n        if (this._initialFolders && currentWorkspaceFolders) {\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\n            if (added.length > 0 || removed.length > 0) {\n                this.doSendEvent(added, removed);\n            }\n        }\n        else if (this._initialFolders) {\n            this.doSendEvent([], this._initialFolders);\n        }\n        else if (currentWorkspaceFolders) {\n            this.doSendEvent(currentWorkspaceFolders, []);\n        }\n    }\n    doSendEvent(addedFolders, removedFolders) {\n        let params = {\n            event: {\n                added: addedFolders.map(folder => this.asProtocol(folder)),\n                removed: removedFolders.map(folder => this.asProtocol(folder))\n            }\n        };\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n    }\n    register(_message, data) {\n        let id = data.id;\n        let client = this._client;\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            let didChangeWorkspaceFolders = (event) => {\n                this.doSendEvent(event.added, event.removed);\n            };\n            let middleware = client.clientOptions.middleware.workspace;\n            middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n        });\n        this._listeners.set(id, disposable);\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    dispose() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n//# sourceMappingURL=workspaceFolders.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideFoldingRanges: (document, context, token) => {\n                const client = this._client;\n                const provideFoldingRanges = (document, _, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(FoldingRangeFeature.asFoldingRanges, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        };\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\n    }\n    static asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\n                    return vscode_1.FoldingRangeKind.Comment;\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\n                    return vscode_1.FoldingRangeKind.Imports;\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\n                    return vscode_1.FoldingRangeKind.Region;\n            }\n        }\n        return void 0;\n    }\n    static asFoldingRanges(foldingRanges) {\n        if (Array.isArray(foldingRanges)) {\n            return foldingRanges.map(r => {\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, FoldingRangeFeature.asFoldingRangeKind(r.kind));\n            });\n        }\n        return [];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n//# sourceMappingURL=foldingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nclass DeclarationFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideDeclaration: (document, position, token) => {\n                const client = this._client;\n                const provideDeclaration = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n//# sourceMappingURL=declaration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(capabilites) {\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSelectionRanges: (document, positions, token) => {\n                const client = this._client;\n                const provideSelectionRanges = (document, positions, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        positions: client.code2ProtocolConverter.asPositions(positions)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error, null);\n                    });\n                };\n                const middleware = client.clientOptions.middleware;\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        };\n        return [vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, provider), provider];\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n//# sourceMappingURL=selectionRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst progressPart_1 = require(\"./progressPart\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressFeature {\n    constructor(_client) {\n        this._client = _client;\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(capabilities, 'window').workDoneProgress = true;\n    }\n    initialize() {\n        let client = this._client;\n        let createHandler = (params) => {\n            new progressPart_1.ProgressPart(this._client, params.token);\n        };\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n//# sourceMappingURL=progress.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst client_1 = require(\"./client\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar protocol2code;\n(function (protocol2code) {\n    function asCallHierarchyItem(converter, item) {\n        if (item === null) {\n            return undefined;\n        }\n        let result = new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind), item.name, item.detail || '', converter.asUri(item.uri), converter.asRange(item.range), converter.asRange(item.selectionRange));\n        if (item.tags !== undefined) {\n            result.tags = converter.asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    protocol2code.asCallHierarchyItem = asCallHierarchyItem;\n    function asCallHierarchyItems(converter, items) {\n        if (items === null) {\n            return undefined;\n        }\n        return items.map(item => asCallHierarchyItem(converter, item));\n    }\n    protocol2code.asCallHierarchyItems = asCallHierarchyItems;\n    function asCallHierarchyIncomingCall(converter, item) {\n        return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter, item.from), converter.asRanges(item.fromRanges));\n    }\n    protocol2code.asCallHierarchyIncomingCall = asCallHierarchyIncomingCall;\n    function asCallHierarchyIncomingCalls(converter, items) {\n        if (items === null) {\n            return undefined;\n        }\n        return items.map(item => asCallHierarchyIncomingCall(converter, item));\n    }\n    protocol2code.asCallHierarchyIncomingCalls = asCallHierarchyIncomingCalls;\n    function asCallHierarchyOutgoingCall(converter, item) {\n        return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter, item.to), converter.asRanges(item.fromRanges));\n    }\n    protocol2code.asCallHierarchyOutgoingCall = asCallHierarchyOutgoingCall;\n    function asCallHierarchyOutgoingCalls(converter, items) {\n        if (items === null) {\n            return undefined;\n        }\n        return items.map(item => asCallHierarchyOutgoingCall(converter, item));\n    }\n    protocol2code.asCallHierarchyOutgoingCalls = asCallHierarchyOutgoingCalls;\n})(protocol2code || (protocol2code = {}));\nvar code2protocol;\n(function (code2protocol) {\n    function asCallHierarchyItem(converter, value) {\n        const result = {\n            name: value.name,\n            kind: converter.asSymbolKind(value.kind),\n            uri: converter.asUri(value.uri),\n            range: converter.asRange(value.range),\n            selectionRange: converter.asRange(value.selectionRange)\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = converter.asSymbolTags(value.tags);\n        }\n        return result;\n    }\n    code2protocol.asCallHierarchyItem = asCallHierarchyItem;\n})(code2protocol || (code2protocol = {}));\nclass CallHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.clientOptions.middleware;\n    }\n    prepareCallHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareCallHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, params, token).then((result) => {\n                return protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter, result);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, error, null);\n            });\n        };\n        return middleware.prepareCallHierarchy\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\n            : prepareCallHierarchy(document, position, token);\n    }\n    provideCallHierarchyIncomingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyIncomingCalls = (item, token) => {\n            const params = {\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\n                return protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter, result);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyIncomingCalls\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\n            : provideCallHierarchyIncomingCalls(item, token);\n    }\n    provideCallHierarchyOutgoingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\n            const params = {\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\n                return protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter, result);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyOutgingCalls\n            ? middleware.provideCallHierarchyOutgingCalls(item, token, provideCallHierarchyOutgoingCalls)\n            : provideCallHierarchyOutgoingCalls(item, token);\n    }\n}\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilites = cap;\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new CallHierarchyProvider(client);\n        return [vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider), provider];\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n//# sourceMappingURL=callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensFeature = void 0;\nconst vscode = require(\"vscode\");\nconst client_1 = require(\"./client\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar protocol2code;\n(function (protocol2code) {\n    function asSemanticTokens(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new vscode.SemanticTokens(new Uint32Array(value.data), value.resultId);\n    }\n    protocol2code.asSemanticTokens = asSemanticTokens;\n    function asSemanticTokensEdit(value) {\n        return new vscode.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\n    }\n    protocol2code.asSemanticTokensEdit = asSemanticTokensEdit;\n    function asSemanticTokensEdits(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\n    }\n    protocol2code.asSemanticTokensEdits = asSemanticTokensEdits;\n    function asLegend(value) {\n        return value;\n    }\n    protocol2code.asLegend = asLegend;\n})(protocol2code || (protocol2code = {}));\nclass SemanticTokensFeature extends client_1.TextDocumentFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilites = cap;\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'semanticTokens');\n        capability.dynamicRegistration = true;\n        capability.tokenTypes = [\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enumMember,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.event,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.modifier,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.string,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator\n        ];\n        capability.tokenModifiers = [\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.definition,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.modification,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.defaultLibrary\n        ];\n    }\n    initialize(cap, documentSelector) {\n        const capabilities = cap;\n        const [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register(this.messages, { id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const hasEditProvider = options.documentProvider !== undefined && typeof options.documentProvider !== 'boolean' && options.documentProvider.edits === true;\n        const documentProvider = {\n            provideDocumentSemanticTokens: (document, token) => {\n                const client = this._client;\n                const middleware = client.clientOptions.middleware;\n                const provideDocumentSemanticTokens = (document, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, params, token).then((result) => {\n                        return protocol2code.asSemanticTokens(result);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, error, null);\n                    });\n                };\n                return middleware.provideDocumentSemanticTokens\n                    ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\n                    : provideDocumentSemanticTokens(document, token);\n            },\n            provideDocumentSemanticTokensEdits: hasEditProvider\n                ? (document, previousResultId, token) => {\n                    const client = this._client;\n                    const middleware = client.clientOptions.middleware;\n                    const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            previousResultId\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, params, token).then((result) => {\n                            if (vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)) {\n                                return protocol2code.asSemanticTokens(result);\n                            }\n                            else {\n                                return protocol2code.asSemanticTokensEdits(result);\n                            }\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentSemanticTokensEdits\n                        ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\n                        : provideDocumentSemanticTokensEdits(document, previousResultId, token);\n                }\n                : undefined\n        };\n        const hasRangeProvider = options.rangeProvider === true;\n        const rangeProvider = hasRangeProvider\n            ? {\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\n                    const client = this._client;\n                    const middleware = client.clientOptions.middleware;\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            range: client.code2ProtocolConverter.asRange(range)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, params, token).then((result) => {\n                            return protocol2code.asSemanticTokens(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentRangeSemanticTokens\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\n                        : provideDocumentRangeSemanticTokens(document, range, token);\n                }\n            }\n            : undefined;\n        const disposables = [];\n        const legend = protocol2code.asLegend(options.legend);\n        disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector, documentProvider, legend));\n        if (rangeProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector, rangeProvider, legend));\n        }\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { document: documentProvider, range: rangeProvider }];\n    }\n}\nexports.SemanticTokensFeature = SemanticTokensFeature;\n//# sourceMappingURL=semanticTokens.proposed.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.terminate = void 0;\nconst cp = require(\"child_process\");\nconst path_1 = require(\"path\");\nconst isWindows = (process.platform === 'win32');\nconst isMacintosh = (process.platform === 'darwin');\nconst isLinux = (process.platform === 'linux');\nfunction terminate(process, cwd) {\n    if (isWindows) {\n        try {\n            // This we run in Atom execFileSync is available.\n            // Ignore stderr since this is otherwise piped to parent.stderr\n            // which might be already closed.\n            let options = {\n                stdio: ['pipe', 'pipe', 'ignore']\n            };\n            if (cwd) {\n                options.cwd = cwd;\n            }\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\n            return true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else if (isLinux || isMacintosh) {\n        try {\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\n            return result.error ? false : true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else {\n        process.kill('SIGKILL');\n        return true;\n    }\n}\nexports.terminate = terminate;\n//# sourceMappingURL=processes.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"vscode-languageserver-protocol\"), exports);\n__exportStar(require(\"./client\"), exports);\n__exportStar(require(\"./commonClient\"), exports);\n//# sourceMappingURL=api.js.map",null,"/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions_1.availableLanguages) {\r\n                var value = vscodeOptions_1.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions_1.locale)) {\r\n                options.locale = vscodeOptions_1.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions_1._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions_1._languagePackId)) {\r\n                options.languagePackId = vscodeOptions_1._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions_1._corruptedFile) {\r\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\r\n                        fs.exists(dirname, function (exists) {\r\n                            if (exists) {\r\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const EMPTY_ELEMENTS: string[] = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr'];\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { window, workspace, Disposable, TextDocumentContentChangeEvent, TextDocument, Position, SnippetString } from 'vscode';\n\nexport function activateTagClosing(tagProvider: (document: TextDocument, position: Position) => Thenable<string>, supportedLanguages: { [id: string]: boolean }, configName: string): Disposable {\n\n\tlet disposables: Disposable[] = [];\n\tworkspace.onDidChangeTextDocument(event => onDidChangeTextDocument(event.document, event.contentChanges), null, disposables);\n\n\tlet isEnabled = false;\n\tupdateEnabledState();\n\twindow.onDidChangeActiveTextEditor(updateEnabledState, null, disposables);\n\n\tlet timeout: NodeJS.Timer | undefined = undefined;\n\n\tfunction updateEnabledState() {\n\t\tisEnabled = false;\n\t\tlet editor = window.activeTextEditor;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tlet document = editor.document;\n\t\tif (!supportedLanguages[document.languageId]) {\n\t\t\treturn;\n\t\t}\n\t\tif (!workspace.getConfiguration(undefined, document.uri).get<boolean>(configName)) {\n\t\t\treturn;\n\t\t}\n\t\tisEnabled = true;\n\t}\n\n\tfunction onDidChangeTextDocument(document: TextDocument, changes: readonly TextDocumentContentChangeEvent[]) {\n\t\tif (!isEnabled) {\n\t\t\treturn;\n\t\t}\n\t\tlet activeDocument = window.activeTextEditor && window.activeTextEditor.document;\n\t\tif (document !== activeDocument || changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof timeout !== 'undefined') {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\tlet lastChange = changes[changes.length - 1];\n\t\tlet lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastCharacter !== '>' && lastCharacter !== '/') {\n\t\t\treturn;\n\t\t}\n\t\tlet rangeStart = lastChange.range.start;\n\t\tlet version = document.version;\n\t\ttimeout = setTimeout(() => {\n\t\t\tlet position = new Position(rangeStart.line, rangeStart.character + lastChange.text.length);\n\t\t\ttagProvider(document, position).then(text => {\n\t\t\t\tif (text && isEnabled) {\n\t\t\t\t\tlet activeEditor = window.activeTextEditor;\n\t\t\t\t\tif (activeEditor) {\n\t\t\t\t\t\tlet activeDocument = activeEditor.document;\n\t\t\t\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\t\t\t\tlet selections = activeEditor.selections;\n\t\t\t\t\t\t\tif (selections.length && selections.some(s => s.active.isEqual(position))) {\n\t\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), selections.map(s => s.active));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), position);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\ttimeout = undefined;\n\t\t}, 100);\n\t}\n\treturn Disposable.from(...disposables);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { workspace, extensions, Uri, EventEmitter, Disposable } from 'vscode';\nimport { resolvePath, joinPath } from './requests';\n\nexport function getCustomDataSource(toDispose: Disposable[]) {\n\tlet pathsInWorkspace = getCustomDataPathsInAllWorkspaces();\n\tlet pathsInExtensions = getCustomDataPathsFromAllExtensions();\n\n\tconst onChange = new EventEmitter<void>();\n\n\ttoDispose.push(extensions.onDidChange(_ => {\n\t\tconst newPathsInExtensions = getCustomDataPathsFromAllExtensions();\n\t\tif (newPathsInExtensions.length !== pathsInExtensions.length || !newPathsInExtensions.every((val, idx) => val === pathsInExtensions[idx])) {\n\t\t\tpathsInExtensions = newPathsInExtensions;\n\t\t\tonChange.fire();\n\t\t}\n\t}));\n\ttoDispose.push(workspace.onDidChangeConfiguration(e => {\n\t\tif (e.affectsConfiguration('html.customData')) {\n\t\t\tpathsInWorkspace = getCustomDataPathsInAllWorkspaces();\n\t\t\tonChange.fire();\n\t\t}\n\t}));\n\n\treturn {\n\t\tget uris() {\n\t\t\treturn pathsInWorkspace.concat(pathsInExtensions);\n\t\t},\n\t\tget onDidChange() {\n\t\t\treturn onChange.event;\n\t\t}\n\t};\n}\n\n\nfunction getCustomDataPathsInAllWorkspaces(): string[] {\n\tconst workspaceFolders = workspace.workspaceFolders;\n\n\tconst dataPaths: string[] = [];\n\n\tif (!workspaceFolders) {\n\t\treturn dataPaths;\n\t}\n\n\tconst collect = (paths: string[] | undefined, rootFolder: Uri) => {\n\t\tif (Array.isArray(paths)) {\n\t\t\tfor (const path of paths) {\n\t\t\t\tif (typeof path === 'string') {\n\t\t\t\t\tdataPaths.push(resolvePath(rootFolder, path).toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfor (let i = 0; i < workspaceFolders.length; i++) {\n\t\tconst folderUri = workspaceFolders[i].uri;\n\t\tconst allHtmlConfig = workspace.getConfiguration('html', folderUri);\n\t\tconst customDataInspect = allHtmlConfig.inspect<string[]>('customData');\n\t\tif (customDataInspect) {\n\t\t\tcollect(customDataInspect.workspaceFolderValue, folderUri);\n\t\t\tif (i === 0) {\n\t\t\t\tif (workspace.workspaceFile) {\n\t\t\t\t\tcollect(customDataInspect.workspaceValue, workspace.workspaceFile);\n\t\t\t\t}\n\t\t\t\tcollect(customDataInspect.globalValue, folderUri);\n\t\t\t}\n\t\t}\n\n\t}\n\treturn dataPaths;\n}\n\nfunction getCustomDataPathsFromAllExtensions(): string[] {\n\tconst dataPaths: string[] = [];\n\tfor (const extension of extensions.all) {\n\t\tconst customData = extension.packageJSON?.contributes?.html?.customData;\n\t\tif (Array.isArray(customData)) {\n\t\t\tfor (const rp of customData) {\n\t\t\t\tdataPaths.push(joinPath(extension.extensionUri, rp).toString());\n\t\t\t}\n\t\t}\n\t}\n\treturn dataPaths;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar vscode = require(\"vscode\");\nvar appInsights = require(\"applicationinsights\");\nvar TelemetryReporter = /** @class */ (function () {\n    // tslint:disable-next-line\n    function TelemetryReporter(extensionId, extensionVersion, key) {\n        var _this = this;\n        this.extensionId = extensionId;\n        this.extensionVersion = extensionVersion;\n        this.userOptIn = false;\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\n        }\n        this.updateUserOptIn(key);\n        this.configListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\n    }\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\n        if (this.userOptIn !== config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true)) {\n            this.userOptIn = config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true);\n            if (this.userOptIn) {\n                this.createAppInsightsClient(key);\n            }\n            else {\n                this.dispose();\n            }\n        }\n    };\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\n        //check if another instance is already initialized\n        if (appInsights.defaultClient) {\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\n            // no other way to enable offline mode\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\n        }\n        else {\n            appInsights.setup(key)\n                .setAutoCollectRequests(false)\n                .setAutoCollectPerformance(false)\n                .setAutoCollectExceptions(false)\n                .setAutoCollectDependencies(false)\n                .setAutoDependencyCorrelation(false)\n                .setAutoCollectConsole(false)\n                .setUseDiskRetryCaching(true)\n                .start();\n            this.appInsightsClient = appInsights.defaultClient;\n        }\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\n        if (vscode && vscode.env) {\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\n        }\n        //check if it's an Asimov key to change the endpoint\n        if (key && key.indexOf('AIF-') === 0) {\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\n        }\n    };\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    TelemetryReporter.prototype.getCommonProperties = function () {\n        var commonProperties = Object.create(null);\n        commonProperties['common.os'] = os.platform();\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\n        commonProperties['common.extname'] = this.extensionId;\n        commonProperties['common.extversion'] = this.extensionVersion;\n        if (vscode && vscode.env) {\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\n            commonProperties['common.vscodeversion'] = vscode.version;\n        }\n        return commonProperties;\n    };\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\n        if (this.userOptIn && eventName && this.appInsightsClient) {\n            this.appInsightsClient.trackEvent({\n                name: this.extensionId + \"/\" + eventName,\n                properties: properties,\n                measurements: measurements\n            });\n            if (this.logStream) {\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\n            }\n        }\n    };\n    TelemetryReporter.prototype.dispose = function () {\n        var _this = this;\n        this.configListener.dispose();\n        var flushEventsToLogger = new Promise(function (resolve) {\n            if (!_this.logStream) {\n                return resolve(void 0);\n            }\n            _this.logStream.on('finish', resolve);\n            _this.logStream.end();\n        });\n        var flushEventsToAI = new Promise(function (resolve) {\n            if (_this.appInsightsClient) {\n                _this.appInsightsClient.flush({\n                    callback: function () {\n                        // all data flushed\n                        _this.appInsightsClient = undefined;\n                        resolve(void 0);\n                    }\n                });\n            }\n            else {\n                resolve(void 0);\n            }\n        });\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\n    };\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\n    return TelemetryReporter;\n}());\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar Logging = require(\"./Library/Logging\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\n// Default autocollection configuration\r\nvar _isConsole = true;\r\nvar _isConsoleLog = false;\r\nvar _isExceptions = true;\r\nvar _isPerformance = true;\r\nvar _isRequests = true;\r\nvar _isDependencies = true;\r\nvar _isDiskRetry = true;\r\nvar _isCorrelating = true;\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _isStarted = false;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param instrumentationKey the instrumentation key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(instrumentationKey) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(instrumentationKey);\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value) {\r\n        _isPerformance = value;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value) {\r\n        _isCorrelating = value;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, loose) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, loose);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, loose) {\n  var v = parse(version, loose);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, loose) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), loose);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, loose) {\n  if (version instanceof SemVer) {\n    if (version.loose === loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, loose);\n\n  debug('SemVer', version, loose);\n  this.loose = loose;\n  var m = version.trim().match(loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.loose, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, loose) {\n  if (comp instanceof Comparator) {\n    if (comp.loose === loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, loose);\n\n  debug('comparator', comp, loose);\n  this.loose = loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  return cmp(version, this.operator, this.semver, this.loose);\n};\n\nComparator.prototype.intersects = function(comp, loose) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, loose);\n    return satisfies(this.value, rangeTmp, loose);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, loose);\n    return satisfies(comp.semver, rangeTmp, loose);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, loose) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, loose) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, loose) {\n  if (range instanceof Range) {\n    if (range.loose === loose) {\n      return range;\n    } else {\n      return new Range(range.raw, loose);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, loose);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, loose);\n\n  this.loose = loose;\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.loose;\n  range = range.trim();\n  debug('range', range, loose);\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, loose);\n  }).join(' ').split(/\\s+/);\n  if (this.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, loose);\n  });\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, loose) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, loose);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, loose) {\n  return new Range(range, loose).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, loose) {\n  debug('comp', comp);\n  comp = replaceCarets(comp, loose);\n  debug('caret', comp);\n  comp = replaceTildes(comp, loose);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, loose);\n  debug('xrange', comp);\n  comp = replaceStars(comp, loose);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, loose) {\n  var r = loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, loose) {\n  debug('caret', comp, loose);\n  var r = loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, loose) {\n  debug('replaceXRanges', comp, loose);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, loose) {\n  comp = comp.trim();\n  var r = loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, loose) {\n  debug('replaceStars', comp, loose);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (version.prerelease.length) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, loose) {\n  try {\n    range = new Range(range, loose);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, loose) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, loose);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, loose) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, loose);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, loose) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, loose).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, loose) {\n  return outside(version, range, '<', loose);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, loose) {\n  return outside(version, range, '>', loose);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, loose) {\n  version = new SemVer(version, loose);\n  range = new Range(range, loose);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, loose)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, loose)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, loose)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, loose) {\n  var parsed = parse(version, loose);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, loose) {\n  r1 = new Range(r1, loose)\n  r2 = new Range(r2, loose)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"stream\");","module.exports = require(\"console\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore2 = {\r\n    versionSpecifier: \">= 2.0.0 < 2.2.0\",\r\n    patch: mongodbcorePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            },\r\n        },\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.2.x\",\r\n    patch: mongodbPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\",\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\",\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.14.x\",\r\n    patch: mysqlPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 112;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 113;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \"1.x\",\r\n    patch: postgresPool1PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port,\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values,\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values,\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.x\",\r\n    patch: postgres6PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: redisPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winstonPatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nexports.winston = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winstonPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nvar Zone$1 = (function (global) {\n    if (global['Zone']) {\n        throw new Error('Zone already loaded.');\n    }\n    var Zone = (function () {\n        function Zone(parent, zoneSpec) {\n            this._properties = null;\n            this._parent = parent;\n            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n            this._properties = zoneSpec && zoneSpec.properties || {};\n            this._zoneDelegate =\n                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n        }\n        Zone.assertZonePatched = function () {\n            if (global.Promise !== ZoneAwarePromise) {\n                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                    'has been overwritten.\\n' +\n                    'Most likely cause is that a Promise polyfill has been loaded ' +\n                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                    'If you must load one, do so before loading zone.js.)');\n            }\n        };\n        Object.defineProperty(Zone, \"current\", {\n            get: function () {\n                return _currentZoneFrame.zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone, \"currentTask\", {\n            get: function () {\n                return _currentTask;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"parent\", {\n            get: function () {\n                return this._parent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"name\", {\n            get: function () {\n                return this._name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Zone.prototype.get = function (key) {\n            var zone = this.getZoneWith(key);\n            if (zone)\n                return zone._properties[key];\n        };\n        Zone.prototype.getZoneWith = function (key) {\n            var current = this;\n            while (current) {\n                if (current._properties.hasOwnProperty(key)) {\n                    return current;\n                }\n                current = current._parent;\n            }\n            return null;\n        };\n        Zone.prototype.fork = function (zoneSpec) {\n            if (!zoneSpec)\n                throw new Error('ZoneSpec required!');\n            return this._zoneDelegate.fork(this, zoneSpec);\n        };\n        Zone.prototype.wrap = function (callback, source) {\n            if (typeof callback !== 'function') {\n                throw new Error('Expecting function got: ' + callback);\n            }\n            var _callback = this._zoneDelegate.intercept(this, callback, source);\n            var zone = this;\n            return function () {\n                return zone.runGuarded(_callback, this, arguments, source);\n            };\n        };\n        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n            task.runCount++;\n            if (task.zone != this)\n                throw new Error('A task can only be run in the zone which created it! (Creation: ' + task.zone.name +\n                    '; Execution: ' + this.name + ')');\n            var previousTask = _currentTask;\n            _currentTask = task;\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                if (task.type == 'macroTask' && task.data && !task.data.isPeriodic) {\n                    task.cancelFn = null;\n                }\n                try {\n                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n                _currentTask = previousTask;\n            }\n        };\n        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('microTask', this, source, callback, data, customSchedule, null));\n        };\n        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('macroTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('eventTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.cancelTask = function (task) {\n            var value = this._zoneDelegate.cancelTask(this, task);\n            task.runCount = -1;\n            task.cancelFn = null;\n            return value;\n        };\n        return Zone;\n    }());\n    Zone.__symbol__ = __symbol__;\n    \n    var ZoneDelegate = (function () {\n        function ZoneDelegate(zone, parentDelegate, zoneSpec) {\n            this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 };\n            this.zone = zone;\n            this._parentDelegate = parentDelegate;\n            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);\n            this._interceptZS =\n                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n            this._interceptDlgt =\n                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n            this._interceptCurrZone =\n                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);\n            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n            this._invokeDlgt =\n                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);\n            this._handleErrorZS =\n                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n            this._handleErrorDlgt =\n                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n            this._handleErrorCurrZone =\n                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);\n            this._scheduleTaskZS =\n                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n            this._scheduleTaskDlgt =\n                zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n            this._scheduleTaskCurrZone =\n                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);\n            this._invokeTaskZS =\n                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n            this._invokeTaskDlgt =\n                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n            this._invokeTaskCurrZone =\n                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);\n            this._cancelTaskZS =\n                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n            this._cancelTaskDlgt =\n                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n            this._cancelTaskCurrZone =\n                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);\n            this._hasTaskZS = zoneSpec && (zoneSpec.onHasTask ? zoneSpec : parentDelegate._hasTaskZS);\n            this._hasTaskDlgt =\n                zoneSpec && (zoneSpec.onHasTask ? parentDelegate : parentDelegate._hasTaskDlgt);\n            this._hasTaskCurrZone = zoneSpec && (zoneSpec.onHasTask ? this.zone : parentDelegate.zone);\n        }\n        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                new Zone(targetZone, zoneSpec);\n        };\n        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n            return this._interceptZS ?\n                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                callback;\n        };\n        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n            return this._invokeZS ?\n                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.handleError = function (targetZone, error) {\n            return this._handleErrorZS ?\n                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                true;\n        };\n        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n            try {\n                if (this._scheduleTaskZS) {\n                    return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                }\n                else if (task.scheduleFn) {\n                    task.scheduleFn(task);\n                }\n                else if (task.type == 'microTask') {\n                    scheduleMicroTask(task);\n                }\n                else {\n                    throw new Error('Task is missing scheduleFn.');\n                }\n                return task;\n            }\n            finally {\n                if (targetZone == this.zone) {\n                    this._updateTaskCount(task.type, 1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n            try {\n                return this._invokeTaskZS ?\n                    this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                    task.callback.apply(applyThis, applyArgs);\n            }\n            finally {\n                if (targetZone == this.zone && (task.type != 'eventTask') &&\n                    !(task.data && task.data.isPeriodic)) {\n                    this._updateTaskCount(task.type, -1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n            var value;\n            if (this._cancelTaskZS) {\n                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n            }\n            else if (!task.cancelFn) {\n                throw new Error('Task does not support cancellation, or is already canceled.');\n            }\n            else {\n                value = task.cancelFn(task);\n            }\n            if (targetZone == this.zone) {\n                // this should not be in the finally block, because exceptions assume not canceled.\n                this._updateTaskCount(task.type, -1);\n            }\n            return value;\n        };\n        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n            return this._hasTaskZS &&\n                this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n        };\n        ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n            var counts = this._taskCounts;\n            var prev = counts[type];\n            var next = counts[type] = prev + count;\n            if (next < 0) {\n                throw new Error('More tasks executed then were scheduled.');\n            }\n            if (prev == 0 || next == 0) {\n                var isEmpty = {\n                    microTask: counts.microTask > 0,\n                    macroTask: counts.macroTask > 0,\n                    eventTask: counts.eventTask > 0,\n                    change: type\n                };\n                try {\n                    this.hasTask(this.zone, isEmpty);\n                }\n                finally {\n                    if (this._parentDelegate) {\n                        this._parentDelegate._updateTaskCount(type, count);\n                    }\n                }\n            }\n        };\n        return ZoneDelegate;\n    }());\n    var ZoneTask = (function () {\n        function ZoneTask(type, zone, source, callback, options, scheduleFn, cancelFn) {\n            this.runCount = 0;\n            this.type = type;\n            this.zone = zone;\n            this.source = source;\n            this.data = options;\n            this.scheduleFn = scheduleFn;\n            this.cancelFn = cancelFn;\n            this.callback = callback;\n            var self = this;\n            this.invoke = function () {\n                _numberOfNestedTaskFrames++;\n                try {\n                    return zone.runTask(self, this, arguments);\n                }\n                finally {\n                    if (_numberOfNestedTaskFrames == 1) {\n                        drainMicroTaskQueue();\n                    }\n                    _numberOfNestedTaskFrames--;\n                }\n            };\n        }\n        ZoneTask.prototype.toString = function () {\n            if (this.data && typeof this.data.handleId !== 'undefined') {\n                return this.data.handleId;\n            }\n            else {\n                return Object.prototype.toString.call(this);\n            }\n        };\n        // add toJSON method to prevent cyclic error when\n        // call JSON.stringify(zoneTask)\n        ZoneTask.prototype.toJSON = function () {\n            return {\n                type: this.type,\n                source: this.source,\n                data: this.data,\n                zone: this.zone.name,\n                invoke: this.invoke,\n                scheduleFn: this.scheduleFn,\n                cancelFn: this.cancelFn,\n                runCount: this.runCount,\n                callback: this.callback\n            };\n        };\n        return ZoneTask;\n    }());\n    var ZoneFrame = (function () {\n        function ZoneFrame(parent, zone) {\n            this.parent = parent;\n            this.zone = zone;\n        }\n        return ZoneFrame;\n    }());\n    function __symbol__(name) {\n        return '__zone_symbol__' + name;\n    }\n    \n    var symbolSetTimeout = __symbol__('setTimeout');\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var _currentZoneFrame = new ZoneFrame(null, new Zone(null, null));\n    var _currentTask = null;\n    var _microTaskQueue = [];\n    var _isDrainingMicrotaskQueue = false;\n    var _uncaughtPromiseErrors = [];\n    var _numberOfNestedTaskFrames = 0;\n    function scheduleQueueDrain() {\n        // if we are not running in any task, and there has not been anything scheduled\n        // we must bootstrap the initial task creation by manually scheduling the drain\n        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n            // We are not running in Task, so we need to kickstart the microtask queue.\n            if (global[symbolPromise]) {\n                global[symbolPromise].resolve(0)[symbolThen](drainMicroTaskQueue);\n            }\n            else {\n                global[symbolSetTimeout](drainMicroTaskQueue, 0);\n            }\n        }\n    }\n    function scheduleMicroTask(task) {\n        scheduleQueueDrain();\n        _microTaskQueue.push(task);\n    }\n    function consoleError(e) {\n        var rejection = e && e.rejection;\n        if (rejection) {\n            console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n        }\n        console.error(e);\n    }\n    function drainMicroTaskQueue() {\n        if (!_isDrainingMicrotaskQueue) {\n            _isDrainingMicrotaskQueue = true;\n            while (_microTaskQueue.length) {\n                var queue = _microTaskQueue;\n                _microTaskQueue = [];\n                for (var i = 0; i < queue.length; i++) {\n                    var task = queue[i];\n                    try {\n                        task.zone.runTask(task, null, null);\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                }\n            }\n            while (_uncaughtPromiseErrors.length) {\n                var _loop_1 = function () {\n                    var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                    try {\n                        uncaughtPromiseError.zone.runGuarded(function () {\n                            throw uncaughtPromiseError;\n                        });\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                };\n                while (_uncaughtPromiseErrors.length) {\n                    _loop_1();\n                }\n            }\n            _isDrainingMicrotaskQueue = false;\n        }\n    }\n    function isThenable(value) {\n        return value && value.then;\n    }\n    function forwardResolution(value) {\n        return value;\n    }\n    function forwardRejection(rejection) {\n        return ZoneAwarePromise.reject(rejection);\n    }\n    var symbolState = __symbol__('state');\n    var symbolValue = __symbol__('value');\n    var source = 'Promise.then';\n    var UNRESOLVED = null;\n    var RESOLVED = true;\n    var REJECTED = false;\n    var REJECTED_NO_CATCH = 0;\n    function makeResolver(promise, state) {\n        return function (v) {\n            resolvePromise(promise, state, v);\n            // Do not return value or you will break the Promise spec.\n        };\n    }\n    function resolvePromise(promise, state, value) {\n        if (promise[symbolState] === UNRESOLVED) {\n            if (value instanceof ZoneAwarePromise && value.hasOwnProperty(symbolState) &&\n                value.hasOwnProperty(symbolValue) && value[symbolState] !== UNRESOLVED) {\n                clearRejectedNoCatch(value);\n                resolvePromise(promise, value[symbolState], value[symbolValue]);\n            }\n            else if (isThenable(value)) {\n                value.then(makeResolver(promise, state), makeResolver(promise, false));\n            }\n            else {\n                promise[symbolState] = state;\n                var queue = promise[symbolValue];\n                promise[symbolValue] = value;\n                for (var i = 0; i < queue.length;) {\n                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                }\n                if (queue.length == 0 && state == REJECTED) {\n                    promise[symbolState] = REJECTED_NO_CATCH;\n                    try {\n                        throw new Error('Uncaught (in promise): ' + value +\n                            (value && value.stack ? '\\n' + value.stack : ''));\n                    }\n                    catch (e) {\n                        var error_1 = e;\n                        error_1.rejection = value;\n                        error_1.promise = promise;\n                        error_1.zone = Zone.current;\n                        error_1.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(error_1);\n                        scheduleQueueDrain();\n                    }\n                }\n            }\n        }\n        // Resolving an already resolved promise is a noop.\n        return promise;\n    }\n    function clearRejectedNoCatch(promise) {\n        if (promise[symbolState] === REJECTED_NO_CATCH) {\n            promise[symbolState] = REJECTED;\n            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                if (promise === _uncaughtPromiseErrors[i].promise) {\n                    _uncaughtPromiseErrors.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n        clearRejectedNoCatch(promise);\n        var delegate = promise[symbolState] ? onFulfilled || forwardResolution : onRejected || forwardRejection;\n        zone.scheduleMicroTask(source, function () {\n            try {\n                resolvePromise(chainPromise, true, zone.run(delegate, null, [promise[symbolValue]]));\n            }\n            catch (error) {\n                resolvePromise(chainPromise, false, error);\n            }\n        });\n    }\n    var ZoneAwarePromise = (function () {\n        function ZoneAwarePromise(executor) {\n            var promise = this;\n            if (!(promise instanceof ZoneAwarePromise)) {\n                throw new Error('Must be an instanceof Promise.');\n            }\n            promise[symbolState] = UNRESOLVED;\n            promise[symbolValue] = []; // queue;\n            try {\n                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));\n            }\n            catch (e) {\n                resolvePromise(promise, false, e);\n            }\n        }\n        ZoneAwarePromise.toString = function () {\n            return 'function ZoneAwarePromise() { [native code] }';\n        };\n        ZoneAwarePromise.resolve = function (value) {\n            return resolvePromise(new this(null), RESOLVED, value);\n        };\n        ZoneAwarePromise.reject = function (error) {\n            return resolvePromise(new this(null), REJECTED, error);\n        };\n        ZoneAwarePromise.race = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                _a = [res, rej], resolve = _a[0], reject = _a[1];\n                var _a;\n            });\n            function onResolve(value) {\n                promise && (promise = null || resolve(value));\n            }\n            function onReject(error) {\n                promise && (promise = null || reject(error));\n            }\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var value = values_1[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then(onResolve, onReject);\n            }\n            return promise;\n        };\n        ZoneAwarePromise.all = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var count = 0;\n            var resolvedValues = [];\n            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                var value = values_2[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then((function (index) { return function (value) {\n                    resolvedValues[index] = value;\n                    count--;\n                    if (!count) {\n                        resolve(resolvedValues);\n                    }\n                }; })(count), reject);\n                count++;\n            }\n            if (!count)\n                resolve(resolvedValues);\n            return promise;\n        };\n        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n            var chainPromise = new this.constructor(null);\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n            }\n            return chainPromise;\n        };\n        ZoneAwarePromise.prototype.catch = function (onRejected) {\n            return this.then(null, onRejected);\n        };\n        return ZoneAwarePromise;\n    }());\n    // Protect against aggressive optimizers dropping seemingly unused properties.\n    // E.g. Closure Compiler in advanced mode.\n    ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n    ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n    ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n    ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n    var NativePromise = global[__symbol__('Promise')] = global['Promise'];\n    global['Promise'] = ZoneAwarePromise;\n    function patchThen(NativePromise) {\n        var NativePromiseProtototype = NativePromise.prototype;\n        var NativePromiseThen = NativePromiseProtototype[__symbol__('then')] =\n            NativePromiseProtototype.then;\n        NativePromiseProtototype.then = function (onResolve, onReject) {\n            var nativePromise = this;\n            return new ZoneAwarePromise(function (resolve, reject) {\n                NativePromiseThen.call(nativePromise, resolve, reject);\n            })\n                .then(onResolve, onReject);\n        };\n    }\n    if (NativePromise) {\n        patchThen(NativePromise);\n        if (typeof global['fetch'] !== 'undefined') {\n            var fetchPromise = void 0;\n            try {\n                // In MS Edge this throws\n                fetchPromise = global['fetch']();\n            }\n            catch (e) {\n                // In Chrome this throws instead.\n                fetchPromise = global['fetch']('about:blank');\n            }\n            // ignore output to prevent error;\n            fetchPromise.then(function () { return null; }, function () { return null; });\n            if (fetchPromise.constructor != NativePromise &&\n                fetchPromise.constructor != ZoneAwarePromise) {\n                patchThen(fetchPromise.constructor);\n            }\n        }\n    }\n    // This is not part of public API, but it is usefull for tests, so we expose it.\n    Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n    /*\n     * This code patches Error so that:\n     *   - It ignores un-needed stack frames.\n     *   - It Shows the associated Zone for reach frame.\n     */\n    var FrameType;\n    (function (FrameType) {\n        /// Skip this frame when printing out stack\n        FrameType[FrameType[\"blackList\"] = 0] = \"blackList\";\n        /// This frame marks zone transition\n        FrameType[FrameType[\"transition\"] = 1] = \"transition\";\n    })(FrameType || (FrameType = {}));\n    var NativeError = global[__symbol__('Error')] = global.Error;\n    // Store the frames which should be removed from the stack frames\n    var blackListedStackFrames = {};\n    // We must find the frame where Error was created, otherwise we assume we don't understand stack\n    var zoneAwareFrame;\n    global.Error = ZoneAwareError;\n    // How should the stack frames be parsed.\n    var frameParserStrategy = null;\n    var stackRewrite = 'stackRewrite';\n    // fix #595, create property descriptor\n    // for error properties\n    var createProperty = function (props, key) {\n        // if property is already defined, skip it.\n        if (props[key]) {\n            return;\n        }\n        // define a local property\n        // in case error property is not settable\n        var name = __symbol__(key);\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                // if local property has no value\n                // use internal error's property value\n                if (!this[name]) {\n                    var error_2 = this[__symbol__('error')];\n                    if (error_2) {\n                        this[name] = error_2[key];\n                    }\n                }\n                return this[name];\n            },\n            set: function (value) {\n                // setter will set value to local property value\n                this[name] = value;\n            }\n        };\n    };\n    // fix #595, create property descriptor\n    // for error method properties\n    var createMethodProperty = function (props, key) {\n        if (props[key]) {\n            return;\n        }\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function () {\n                var error = this[__symbol__('error')];\n                var errorMethod = (error && error[key]) || this[key];\n                if (errorMethod) {\n                    return errorMethod.apply(error, arguments);\n                }\n            }\n        };\n    };\n    var createErrorProperties = function () {\n        var props = Object.create(null);\n        var error = new NativeError();\n        var keys = Object.getOwnPropertyNames(error);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(error, key)) {\n                createProperty(props, key);\n            }\n        }\n        var proto = NativeError.prototype;\n        if (proto) {\n            var pKeys = Object.getOwnPropertyNames(proto);\n            for (var i = 0; i < pKeys.length; i++) {\n                var key = pKeys[i];\n                // skip constructor\n                if (key !== 'constructor' && key !== 'toString' && key !== 'toSource') {\n                    createProperty(props, key);\n                }\n            }\n        }\n        // some other properties are not\n        // in NativeError\n        createProperty(props, 'originalStack');\n        createProperty(props, 'zoneAwareStack');\n        // define toString, toSource as method property\n        createMethodProperty(props, 'toString');\n        createMethodProperty(props, 'toSource');\n        return props;\n    };\n    var errorProperties = createErrorProperties();\n    // for derived Error class which extends ZoneAwareError\n    // we should not override the derived class's property\n    // so we create a new props object only copy the properties\n    // from errorProperties which not exist in derived Error's prototype\n    var getErrorPropertiesForPrototype = function (prototype) {\n        // if the prototype is ZoneAwareError.prototype\n        // we just return the prebuilt errorProperties.\n        if (prototype === ZoneAwareError.prototype) {\n            return errorProperties;\n        }\n        var newProps = Object.create(null);\n        var cKeys = Object.getOwnPropertyNames(errorProperties);\n        var keys = Object.getOwnPropertyNames(prototype);\n        cKeys.forEach(function (cKey) {\n            if (keys.filter(function (key) {\n                return key === cKey;\n            })\n                .length === 0) {\n                newProps[cKey] = errorProperties[cKey];\n            }\n        });\n        return newProps;\n    };\n    /**\n     * This is ZoneAwareError which processes the stack frame and cleans up extra frames as well as\n     * adds zone information to it.\n     */\n    function ZoneAwareError() {\n        // make sure we have a valid this\n        // if this is undefined(call Error without new) or this is global\n        // or this is some other objects, we should force to create a\n        // valid ZoneAwareError by call Object.create()\n        if (!(this instanceof ZoneAwareError)) {\n            return ZoneAwareError.apply(Object.create(ZoneAwareError.prototype), arguments);\n        }\n        // Create an Error.\n        var error = NativeError.apply(this, arguments);\n        this[__symbol__('error')] = error;\n        // Save original stack trace\n        error.originalStack = error.stack;\n        // Process the stack trace and rewrite the frames.\n        if (ZoneAwareError[stackRewrite] && error.originalStack) {\n            var frames_1 = error.originalStack.split('\\n');\n            var zoneFrame = _currentZoneFrame;\n            var i = 0;\n            // Find the first frame\n            while (frames_1[i] !== zoneAwareFrame && i < frames_1.length) {\n                i++;\n            }\n            for (; i < frames_1.length && zoneFrame; i++) {\n                var frame = frames_1[i];\n                if (frame.trim()) {\n                    var frameType = blackListedStackFrames.hasOwnProperty(frame) && blackListedStackFrames[frame];\n                    if (frameType === FrameType.blackList) {\n                        frames_1.splice(i, 1);\n                        i--;\n                    }\n                    else if (frameType === FrameType.transition) {\n                        if (zoneFrame.parent) {\n                            // This is the special frame where zone changed. Print and process it accordingly\n                            frames_1[i] += \" [\" + zoneFrame.parent.zone.name + \" => \" + zoneFrame.zone.name + \"]\";\n                            zoneFrame = zoneFrame.parent;\n                        }\n                        else {\n                            zoneFrame = null;\n                        }\n                    }\n                    else {\n                        frames_1[i] += \" [\" + zoneFrame.zone.name + \"]\";\n                    }\n                }\n            }\n            error.stack = error.zoneAwareStack = frames_1.join('\\n');\n        }\n        // use defineProperties here instead of copy property value\n        // because of issue #595 which will break angular2.\n        Object.defineProperties(this, getErrorPropertiesForPrototype(Object.getPrototypeOf(this)));\n        return this;\n    }\n    // Copy the prototype so that instanceof operator works as expected\n    ZoneAwareError.prototype = NativeError.prototype;\n    ZoneAwareError[Zone.__symbol__('blacklistedStackFrames')] = blackListedStackFrames;\n    ZoneAwareError[stackRewrite] = false;\n    if (NativeError.hasOwnProperty('stackTraceLimit')) {\n        // Extend default stack limit as we will be removing few frames.\n        NativeError.stackTraceLimit = Math.max(NativeError.stackTraceLimit, 15);\n        // make sure that ZoneAwareError has the same property which forwards to NativeError.\n        Object.defineProperty(ZoneAwareError, 'stackTraceLimit', {\n            get: function () {\n                return NativeError.stackTraceLimit;\n            },\n            set: function (value) {\n                return NativeError.stackTraceLimit = value;\n            }\n        });\n    }\n    if (NativeError.hasOwnProperty('captureStackTrace')) {\n        Object.defineProperty(ZoneAwareError, 'captureStackTrace', {\n            // add named function here because we need to remove this\n            // stack frame when prepareStackTrace below\n            value: function zoneCaptureStackTrace(targetObject, constructorOpt) {\n                NativeError.captureStackTrace(targetObject, constructorOpt);\n            }\n        });\n    }\n    Object.defineProperty(ZoneAwareError, 'prepareStackTrace', {\n        get: function () {\n            return NativeError.prepareStackTrace;\n        },\n        set: function (value) {\n            if (!value || typeof value !== 'function') {\n                return NativeError.prepareStackTrace = value;\n            }\n            return NativeError.prepareStackTrace = function (error, structuredStackTrace) {\n                // remove additional stack information from ZoneAwareError.captureStackTrace\n                if (structuredStackTrace) {\n                    for (var i = 0; i < structuredStackTrace.length; i++) {\n                        var st = structuredStackTrace[i];\n                        // remove the first function which name is zoneCaptureStackTrace\n                        if (st.getFunctionName() === 'zoneCaptureStackTrace') {\n                            structuredStackTrace.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                return value.apply(this, [error, structuredStackTrace]);\n            };\n        }\n    });\n    // Now we need to populet the `blacklistedStackFrames` as well as find the\n    // run/runGuraded/runTask frames. This is done by creating a detect zone and then threading\n    // the execution through all of the above methods so that we can look at the stack trace and\n    // find the frames of interest.\n    var detectZone = Zone.current.fork({\n        name: 'detect',\n        onInvoke: function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            // Here only so that it will show up in the stack frame so that it can be black listed.\n            return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n        },\n        onHandleError: function (parentZD, current, target, error) {\n            if (error.originalStack && Error === ZoneAwareError) {\n                var frames_2 = error.originalStack.split(/\\n/);\n                var runFrame = false, runGuardedFrame = false, runTaskFrame = false;\n                while (frames_2.length) {\n                    var frame = frames_2.shift();\n                    // On safari it is possible to have stack frame with no line number.\n                    // This check makes sure that we don't filter frames on name only (must have\n                    // linenumber)\n                    if (/:\\d+:\\d+/.test(frame)) {\n                        // Get rid of the path so that we don't accidintely find function name in path.\n                        // In chrome the seperator is `(` and `@` in FF and safari\n                        // Chrome: at Zone.run (zone.js:100)\n                        // Chrome: at Zone.run (http://localhost:9876/base/build/lib/zone.js:100:24)\n                        // FireFox: Zone.prototype.run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        // Safari: run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        var fnName = frame.split('(')[0].split('@')[0];\n                        var frameType = FrameType.transition;\n                        if (fnName.indexOf('ZoneAwareError') !== -1) {\n                            zoneAwareFrame = frame;\n                        }\n                        if (fnName.indexOf('runGuarded') !== -1) {\n                            runGuardedFrame = true;\n                        }\n                        else if (fnName.indexOf('runTask') !== -1) {\n                            runTaskFrame = true;\n                        }\n                        else if (fnName.indexOf('run') !== -1) {\n                            runFrame = true;\n                        }\n                        else {\n                            frameType = FrameType.blackList;\n                        }\n                        blackListedStackFrames[frame] = frameType;\n                        // Once we find all of the frames we can stop looking.\n                        if (runFrame && runGuardedFrame && runTaskFrame) {\n                            ZoneAwareError[stackRewrite] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n    });\n    // carefully constructor a stack frame which contains all of the frames of interest which\n    // need to be detected and blacklisted.\n    var detectRunFn = function () {\n        detectZone.run(function () {\n            detectZone.runGuarded(function () {\n                throw new Error('blacklistStackFrames');\n            });\n        });\n    };\n    // Cause the error to extract the stack frames.\n    detectZone.runTask(detectZone.scheduleMacroTask('detect', detectRunFn, null, function () { return null; }, null));\n    return global['Zone'] = Zone;\n})(typeof window === 'object' && window || typeof self === 'object' && self || global);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Suppress closure compiler errors about unknown 'Zone' variable\n * @fileoverview\n * @suppress {undefinedVars}\n */\nvar zoneSymbol = function (n) { return \"__zone_symbol__\" + n; };\nvar _global$1 = typeof window === 'object' && window || typeof self === 'object' && self || global;\nfunction bindArguments(args, source) {\n    for (var i = args.length - 1; i >= 0; i--) {\n        if (typeof args[i] === 'function') {\n            args[i] = Zone.current.wrap(args[i], source + '_' + i);\n        }\n    }\n    return args;\n}\n\n\nvar isNode = (!('nw' in _global$1) && typeof process !== 'undefined' &&\n    {}.toString.call(process) === '[object process]');\n\n\n\n\n\nvar EVENT_TASKS = zoneSymbol('eventTasks');\n// For EventTarget\nvar ADD_EVENT_LISTENER = 'addEventListener';\nvar REMOVE_EVENT_LISTENER = 'removeEventListener';\nfunction findExistingRegisteredTask(target, handler, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        for (var i = 0; i < eventTasks.length; i++) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            var listener = data.handler;\n            if ((data.handler === handler || listener.listener === handler) &&\n                data.useCapturing === capture && data.eventName === name) {\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n                return eventTask;\n            }\n        }\n    }\n    return null;\n}\nfunction findAllExistingRegisteredTasks(target, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        var result = [];\n        for (var i = eventTasks.length - 1; i >= 0; i--) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            if (data.eventName === name && data.useCapturing === capture) {\n                result.push(eventTask);\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n            }\n        }\n        return result;\n    }\n    return null;\n}\nfunction attachRegisteredEvent(target, eventTask, isPrepend) {\n    var eventTasks = target[EVENT_TASKS];\n    if (!eventTasks) {\n        eventTasks = target[EVENT_TASKS] = [];\n    }\n    if (isPrepend) {\n        eventTasks.unshift(eventTask);\n    }\n    else {\n        eventTasks.push(eventTask);\n    }\n}\nvar defaultListenerMetaCreator = function (self, args) {\n    return {\n        useCapturing: args[2],\n        eventName: args[0],\n        handler: args[1],\n        target: self || _global$1,\n        name: args[0],\n        invokeAddFunc: function (addFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[addFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[addFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        },\n        invokeRemoveFunc: function (removeFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[removeFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[removeFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        }\n    };\n};\nfunction makeZoneAwareAddListener(addFnName, removeFnName, useCapturingParam, allowDuplicates, isPrepend, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (allowDuplicates === void 0) { allowDuplicates = false; }\n    if (isPrepend === void 0) { isPrepend = false; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var addFnSymbol = zoneSymbol(addFnName);\n    var removeFnSymbol = zoneSymbol(removeFnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    function scheduleEventListener(eventTask) {\n        var meta = eventTask.data;\n        attachRegisteredEvent(meta.target, eventTask, isPrepend);\n        return meta.invokeAddFunc(addFnSymbol, eventTask);\n    }\n    function cancelEventListener(eventTask) {\n        var meta = eventTask.data;\n        findExistingRegisteredTask(meta.target, eventTask.invoke, meta.eventName, meta.useCapturing, true);\n        return meta.invokeRemoveFunc(removeFnSymbol, eventTask);\n    }\n    return function zoneAwareAddListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var delegate = null;\n        if (typeof data.handler == 'function') {\n            delegate = data.handler;\n        }\n        else if (data.handler && data.handler.handleEvent) {\n            delegate = function (event) { return data.handler.handleEvent(event); };\n        }\n        var validZoneHandler = false;\n        try {\n            // In cross site contexts (such as WebDriver frameworks like Selenium),\n            // accessing the handler object here will cause an exception to be thrown which\n            // will fail tests prematurely.\n            validZoneHandler = data.handler && data.handler.toString() === '[object FunctionWrapper]';\n        }\n        catch (e) {\n            // Returning nothing here is fine, because objects in a cross-site context are unusable\n            return;\n        }\n        // Ignore special listeners of IE11 & Edge dev tools, see\n        // https://github.com/angular/zone.js/issues/150\n        if (!delegate || validZoneHandler) {\n            return data.invokeAddFunc(addFnSymbol, data.handler);\n        }\n        if (!allowDuplicates) {\n            var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, false);\n            if (eventTask) {\n                // we already registered, so this will have noop.\n                return data.invokeAddFunc(addFnSymbol, eventTask);\n            }\n        }\n        var zone = Zone.current;\n        var source = data.target.constructor['name'] + '.' + addFnName + ':' + data.eventName;\n        zone.scheduleEventTask(source, delegate, data, scheduleEventListener, cancelEventListener);\n    };\n}\nfunction makeZoneAwareRemoveListener(fnName, useCapturingParam, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, true);\n        if (eventTask) {\n            eventTask.zone.cancelTask(eventTask);\n        }\n        else {\n            data.invokeRemoveFunc(symbol, data.handler);\n        }\n    };\n}\nfunction makeZoneAwareRemoveAllListeners(fnName, useCapturingParam) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveAllListener(self, args) {\n        var target = self || _global$1;\n        if (args.length === 0) {\n            // remove all listeners without eventName\n            target[EVENT_TASKS] = [];\n            // we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n            // will do remove listener(cancelTask) for us\n            target[symbol]();\n            return;\n        }\n        var eventName = args[0];\n        var useCapturing = args[1] || defaultUseCapturing;\n        // call this function just remove the related eventTask from target[EVENT_TASKS]\n        findAllExistingRegisteredTasks(target, eventName, useCapturing, true);\n        // we don't need useCapturing here because useCapturing is just for DOM, and\n        // removeAllListeners should only be called by node eventEmitter\n        // and we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n        // will do remove listener(cancelTask) for us\n        target[symbol](eventName);\n    };\n}\nfunction makeZoneAwareListeners(fnName) {\n    var symbol = zoneSymbol(fnName);\n    return function zoneAwareEventListeners(self, args) {\n        var eventName = args[0];\n        var target = self || _global$1;\n        if (!target[EVENT_TASKS]) {\n            return [];\n        }\n        return target[EVENT_TASKS]\n            .filter(function (task) { return task.data.eventName === eventName; })\n            .map(function (task) { return task.data.handler; });\n    };\n}\nvar zoneAwareAddEventListener = makeZoneAwareAddListener(ADD_EVENT_LISTENER, REMOVE_EVENT_LISTENER);\nvar zoneAwareRemoveEventListener = makeZoneAwareRemoveListener(REMOVE_EVENT_LISTENER);\n\nvar originalInstanceKey = zoneSymbol('originalInstance');\n// wrap some native API on `window`\n\n\nfunction createNamedFn(name, delegate) {\n    try {\n        return (Function('f', \"return function \" + name + \"(){return f(this, arguments)}\"))(delegate);\n    }\n    catch (e) {\n        // if we fail, we must be CSP, just return delegate.\n        return function () {\n            return delegate(this, arguments);\n        };\n    }\n}\nfunction patchMethod(target, name, patchFn) {\n    var proto = target;\n    while (proto && Object.getOwnPropertyNames(proto).indexOf(name) === -1) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    if (!proto && target[name]) {\n        // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n        proto = target;\n    }\n    var delegateName = zoneSymbol(name);\n    var delegate;\n    if (proto && !(delegate = proto[delegateName])) {\n        delegate = proto[delegateName] = proto[name];\n        proto[name] = createNamedFn(name, patchFn(delegate, delegateName, name));\n    }\n    return delegate;\n}\n// TODO: support cancel task later if necessary\nfunction patchMacroTask(obj, funcName, metaCreator) {\n    var setNative = null;\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[data.callbackIndex] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(data.target, data.args);\n        return task;\n    }\n    setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n        var meta = metaCreator(self, args);\n        if (meta.callbackIndex >= 0 && typeof args[meta.callbackIndex] === 'function') {\n            var task = Zone.current.scheduleMacroTask(meta.name, args[meta.callbackIndex], meta, scheduleTask, null);\n            return task;\n        }\n        else {\n            // cause an error by calling it directly.\n            return delegate.apply(self, args);\n        }\n    }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar callAndReturnFirstParam = function (fn) {\n    return function (self, args) {\n        fn(self, args);\n        return self;\n    };\n};\n// For EventEmitter\nvar EE_ADD_LISTENER = 'addListener';\nvar EE_PREPEND_LISTENER = 'prependListener';\nvar EE_REMOVE_LISTENER = 'removeListener';\nvar EE_REMOVE_ALL_LISTENER = 'removeAllListeners';\nvar EE_LISTENERS = 'listeners';\nvar EE_ON = 'on';\nvar zoneAwareAddListener$1 = callAndReturnFirstParam(makeZoneAwareAddListener(EE_ADD_LISTENER, EE_REMOVE_LISTENER, false, true, false));\nvar zoneAwarePrependListener = callAndReturnFirstParam(makeZoneAwareAddListener(EE_PREPEND_LISTENER, EE_REMOVE_LISTENER, false, true, true));\nvar zoneAwareRemoveListener$1 = callAndReturnFirstParam(makeZoneAwareRemoveListener(EE_REMOVE_LISTENER, false));\nvar zoneAwareRemoveAllListeners = callAndReturnFirstParam(makeZoneAwareRemoveAllListeners(EE_REMOVE_ALL_LISTENER, false));\nvar zoneAwareListeners = makeZoneAwareListeners(EE_LISTENERS);\nfunction patchEventEmitterMethods(obj) {\n    if (obj && obj.addListener) {\n        patchMethod(obj, EE_ADD_LISTENER, function () { return zoneAwareAddListener$1; });\n        patchMethod(obj, EE_PREPEND_LISTENER, function () { return zoneAwarePrependListener; });\n        patchMethod(obj, EE_REMOVE_LISTENER, function () { return zoneAwareRemoveListener$1; });\n        patchMethod(obj, EE_REMOVE_ALL_LISTENER, function () { return zoneAwareRemoveAllListeners; });\n        patchMethod(obj, EE_LISTENERS, function () { return zoneAwareListeners; });\n        obj[EE_ON] = obj[EE_ADD_LISTENER];\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n// EventEmitter\nvar events;\ntry {\n    events = require('events');\n}\ncatch (err) {\n}\nif (events && events.EventEmitter) {\n    patchEventEmitterMethods(events.EventEmitter.prototype);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar fs;\ntry {\n    fs = require('fs');\n}\ncatch (err) {\n}\n// watch, watchFile, unwatchFile has been patched\n// because EventEmitter has been patched\nvar TO_PATCH_MACROTASK_METHODS = [\n    'access', 'appendFile', 'chmod', 'chown', 'close', 'exists', 'fchmod',\n    'fchown', 'fdatasync', 'fstat', 'fsync', 'ftruncate', 'futimes', 'lchmod',\n    'lchown', 'link', 'lstat', 'mkdir', 'mkdtemp', 'open', 'read',\n    'readdir', 'readFile', 'readlink', 'realpath', 'rename', 'rmdir', 'stat',\n    'symlink', 'truncate', 'unlink', 'utimes', 'write', 'writeFile',\n];\nif (fs) {\n    TO_PATCH_MACROTASK_METHODS.filter(function (name) { return !!fs[name] && typeof fs[name] === 'function'; })\n        .forEach(function (name) {\n        patchMacroTask(fs, name, function (self, args) {\n            return {\n                name: 'fs.' + name,\n                args: args,\n                callbackIndex: args.length > 0 ? args.length - 1 : -1,\n                target: self\n            };\n        });\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction patchTimer(window, setName, cancelName, nameSuffix) {\n    var setNative = null;\n    var clearNative = null;\n    setName += nameSuffix;\n    cancelName += nameSuffix;\n    var tasksByHandleId = {};\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[0] = function () {\n            task.invoke.apply(this, arguments);\n            delete tasksByHandleId[data.handleId];\n        };\n        data.handleId = setNative.apply(window, data.args);\n        tasksByHandleId[data.handleId] = task;\n        return task;\n    }\n    function clearTask(task) {\n        delete tasksByHandleId[task.data.handleId];\n        return clearNative(task.data.handleId);\n    }\n    setNative =\n        patchMethod(window, setName, function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var options = {\n                    handleId: null,\n                    isPeriodic: nameSuffix === 'Interval',\n                    delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,\n                    args: args\n                };\n                var task = zone.scheduleMacroTask(setName, args[0], options, scheduleTask, clearTask);\n                if (!task) {\n                    return task;\n                }\n                // Node.js must additionally support the ref and unref functions.\n                var handle = task.data.handleId;\n                if (handle.ref && handle.unref) {\n                    task.ref = handle.ref.bind(handle);\n                    task.unref = handle.unref.bind(handle);\n                }\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(window, args);\n            }\n        }; });\n    clearNative =\n        patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n            var task = typeof args[0] === 'number' ? tasksByHandleId[args[0]] : args[0];\n            if (task && typeof task.type === 'string') {\n                if (task.cancelFn && task.data.isPeriodic || task.runCount === 0) {\n                    // Do not cancel already canceled functions\n                    task.zone.cancelTask(task);\n                }\n            }\n            else {\n                // cause an error by calling it directly.\n                delegate.apply(window, args);\n            }\n        }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar set = 'set';\nvar clear = 'clear';\nvar _global = typeof window === 'object' && window || typeof self === 'object' && self || global;\n// Timers\nvar timers = require('timers');\npatchTimer(timers, set, clear, 'Timeout');\npatchTimer(timers, set, clear, 'Interval');\npatchTimer(timers, set, clear, 'Immediate');\nvar shouldPatchGlobalTimers = global.setTimeout !== timers.setTimeout;\nif (shouldPatchGlobalTimers) {\n    patchTimer(_global, set, clear, 'Timeout');\n    patchTimer(_global, set, clear, 'Interval');\n    patchTimer(_global, set, clear, 'Immediate');\n}\npatchNextTick();\n// Crypto\nvar crypto;\ntry {\n    crypto = require('crypto');\n}\ncatch (err) {\n}\n// TODO(gdi2290): implement a better way to patch these methods\nif (crypto) {\n    var nativeRandomBytes_1 = crypto.randomBytes;\n    crypto.randomBytes = function randomBytesZone(size, callback) {\n        if (!callback) {\n            return nativeRandomBytes_1(size);\n        }\n        else {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.randomBytes';\n            return nativeRandomBytes_1(size, zone.wrap(callback, source));\n        }\n    }.bind(crypto);\n    var nativePbkdf2_1 = crypto.pbkdf2;\n    crypto.pbkdf2 = function pbkdf2Zone() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var fn = args[args.length - 1];\n        if (typeof fn === 'function') {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.pbkdf2';\n            args[args.length - 1] = zone.wrap(fn, source);\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n        else {\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n    }.bind(crypto);\n}\n// HTTP Client\nvar httpClient;\ntry {\n    httpClient = require('_http_client');\n}\ncatch (err) {\n}\nif (httpClient && httpClient.ClientRequest) {\n    var ClientRequest_1 = httpClient.ClientRequest.bind(httpClient);\n    httpClient.ClientRequest = function (options, callback) {\n        if (!callback) {\n            return new ClientRequest_1(options);\n        }\n        else {\n            var zone = Zone.current;\n            return new ClientRequest_1(options, zone.wrap(callback, 'http.ClientRequest'));\n        }\n    };\n}\nfunction patchNextTick() {\n    var setNative = null;\n    function scheduleTask(task) {\n        var args = task.data;\n        args[0] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(process, args);\n        return task;\n    }\n    setNative =\n        patchMethod(process, 'nextTick', function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var task = zone.scheduleMicroTask('nextTick', args[0], args, scheduleTask);\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(process, args);\n            }\n        }; });\n}\n\n})));\n","module.exports = require(\"timers\");","module.exports = require(\"_http_client\");","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        // Message can have a trailing newline\r\n        var message = event.data.message;\r\n        if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n            message = message.substring(0, message.length - 1);\r\n        }\r\n        client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain ||\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./TelemetryType\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical,\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = bunyanToAILevelMap[event.data.level];\r\n        client.trackTrace({ message: event.data.result, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n        client.trackTrace({\r\n            message: event.data.message,\r\n            severity: AIlevel,\r\n            properties: event.data.meta\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar AutoCollectExceptions = (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    Object.defineProperty(AutoCollectExceptions, \"UNCAUGHT_EXCEPTION_HANDLER_NAME\", {\r\n        get: function () { return \"uncaughtException\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AutoCollectExceptions, \"UNHANDLED_REJECTION_HANDLER_NAME\", {\r\n        get: function () { return \"unhandledRejection\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            var self = this;\r\n            if (!this._exceptionListenerHandle) {\r\n                var handle = function (reThrow, error) {\r\n                    _this._client.trackException({ exception: error });\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    if (reThrow) {\r\n                        var THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION = error;\r\n                        throw THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION; // Error originated somewhere else in your app\r\n                    }\r\n                };\r\n                this._exceptionListenerHandle = handle.bind(this, true);\r\n                this._rejectionListenerHandle = handle.bind(this, false);\r\n                process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var urlObject = url.parse(this.url);\r\n        urlObject.search = undefined;\r\n        urlObject.hash = undefined;\r\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = urlObject.hostname;\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === 'string') {\r\n            options = url.parse(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path) {\r\n            var parsedQuery = url.parse(options.path);\r\n            options.pathname = parsedQuery.pathname;\r\n            options.search = parsedQuery.search;\r\n        }\r\n        // Simiarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            var parsedHost = url.parse(\"http://\" + options.host);\r\n            if (!parsedHost.port && options.port) {\r\n                options.hostname = options.host;\r\n                delete options.host;\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\r\n        options.hostname = options.hostname || 'localhost';\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            dependencyTypeName: 'mongodb'\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: this.method + \" \" + url.parse(this.url).pathname,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var requestUrl = url.parse(request.url);\r\n        var pathName = requestUrl.pathname;\r\n        var search = requestUrl.search;\r\n        var absoluteUrl = url.format({\r\n            protocol: encrypted ? \"https\" : \"http\",\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            if (request.headers[RequestResponseHeaders.requestIdHeader]) {\r\n                this.parentId = request.headers[RequestResponseHeaders.requestIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                var rootId = request.headers[RequestResponseHeaders.rootIdHeader];\r\n                this.parentId = request.headers[RequestResponseHeaders.parentIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(rootId || this.parentId);\r\n                this.correlationContextHeader = null;\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n            }\r\n            this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        return cookieValue.substr(0, cookieValue.indexOf('|'));\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param iKey the instrumentation key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(iKey) {\r\n        this._telemetryProcessors = [];\r\n        var config = new Config(iKey);\r\n        this.config = config;\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        var sender = new Sender(this.config);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            telemetry.target = url.parse(telemetry.data).host;\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            if (accepted) {\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar Config = (function () {\r\n    function Config(instrumentationKey) {\r\n        var _this = this;\r\n        this.endpointBase = \"https://dc.services.visualstudio.com\";\r\n        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();\r\n        this.endpointUrl = this.endpointBase + \"/v2/track\";\r\n        this.maxBatchSize = 250;\r\n        this.maxBatchIntervalMs = 15000;\r\n        this.disableAppInsights = false;\r\n        this.samplingPercentage = 100;\r\n        this.correlationIdRetryIntervalMs = 30 * 1000;\r\n        this.correlationHeaderExcludedDomains = [\r\n            \"*.core.windows.net\",\r\n            \"*.core.chinacloudapi.cn\",\r\n            \"*.core.cloudapi.de\",\r\n            \"*.core.usgovcloudapi.net\"\r\n        ];\r\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\r\n        this.profileQueryEndpoint = process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\r\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\r\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\r\n        this.httpAgent = undefined;\r\n        this.httpsAgent = undefined;\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\r\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Config._getInstrumentationKey = function () {\r\n        // check for both the documented env variable and the azure-prefixed variable\r\n        var iKey = process.env[Config.ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\r\n            || process.env[Config.legacy_ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\r\n        if (!iKey || iKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\r\n        }\r\n        return iKey;\r\n    };\r\n    // Azure adds this prefix to all environment variables\r\n    Config.ENV_azurePrefix = \"APPSETTING_\";\r\n    // This key is provided in the readme\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_http_proxy = \"http_proxy\";\r\n    Config.ENV_https_proxy = \"https_proxy\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext();\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        // note: this should return the host package.json\r\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n        if (!Context.appVersion[packageJsonPath]) {\r\n            Context.appVersion[packageJsonPath] = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        // note: this should return the sdk package.json\r\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\r\n        if (!Context.sdkVersion) {\r\n            Context.sdkVersion = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.sdkVersion = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Channel = (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // check if the incoming payload is too large, truncate if necessary\r\n        var payload = this._stringify(envelope);\r\n        if (typeof payload !== \"string\") {\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(payload);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // compose an array of payloads\r\n            var batch = this._buffer.join(\"\\n\");\r\n            // invoke send\r\n            if (isNodeCrashing) {\r\n                this._sender.saveOnCrash(batch);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer.length = 0;\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    Channel.prototype._stringify = function (envelope) {\r\n        try {\r\n            return JSON.stringify(envelope);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./SamplingTelemetryProcessor\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request \r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Util = require(\"./Util\");\r\nvar Sender = (function () {\r\n    function Sender(config, onSuccess, onError) {\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (Sender.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\r\n                }\r\n                catch (e) { }\r\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n    };\r\n    Sender.prototype.send = function (payload, callback) {\r\n        var _this = this;\r\n        var endpointUrl = this._config.endpointUrl;\r\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\r\n        var options = {\r\n            method: \"POST\",\r\n            withCredentials: false,\r\n            headers: {\r\n                \"Content-Type\": \"application/x-json-stream\"\r\n            }\r\n        };\r\n        zlib.gzip(payload, function (err, buffer) {\r\n            var dataToSend = buffer;\r\n            if (err) {\r\n                Logging.warn(err);\r\n                dataToSend = payload; // something went wrong so send without gzip\r\n                options.headers[\"Content-Length\"] = payload.length.toString();\r\n            }\r\n            else {\r\n                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                options.headers[\"Content-Length\"] = buffer.length;\r\n            }\r\n            Logging.info(Sender.TAG, options);\r\n            // Ensure this request is not captured by auto-collection.\r\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n            var requestCallback = function (res) {\r\n                res.setEncoding(\"utf-8\");\r\n                //returns empty if the data is accepted\r\n                var responseString = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    responseString += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    _this._numConsecutiveFailures = 0;\r\n                    Logging.info(Sender.TAG, responseString);\r\n                    if (typeof _this._onSuccess === \"function\") {\r\n                        _this._onSuccess(responseString);\r\n                    }\r\n                    if (typeof callback === \"function\") {\r\n                        callback(responseString);\r\n                    }\r\n                    if (_this._enableDiskRetryMode) {\r\n                        // try to send any cached events if the user is back online\r\n                        if (res.statusCode === 200) {\r\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);\r\n                            // store to disk in case of burst throttling\r\n                        }\r\n                        else if (res.statusCode === 408 ||\r\n                            res.statusCode === 429 ||\r\n                            res.statusCode === 439 ||\r\n                            res.statusCode === 500 ||\r\n                            res.statusCode === 503) {\r\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\r\n                            _this._storeToDisk(payload);\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n            req.on(\"error\", function (error) {\r\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                _this._numConsecutiveFailures++;\r\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                // Continue informing on each failure if verbose logging is being used\r\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                    if (_this._enableDiskRetryMode) {\r\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                    }\r\n                    Logging.warn(Sender.TAG, notice, error);\r\n                }\r\n                else {\r\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                    Logging.info(Sender.TAG, notice, error);\r\n                }\r\n                _this._onErrorHelper(error);\r\n                if (typeof callback === \"function\") {\r\n                    var errorMessage = \"error sending telemetry\";\r\n                    if (error && (typeof error.toString === \"function\")) {\r\n                        errorMessage = error.toString();\r\n                    }\r\n                    callback(errorMessage);\r\n                }\r\n                if (_this._enableDiskRetryMode) {\r\n                    _this._storeToDisk(payload);\r\n                }\r\n            });\r\n            req.write(dataToSend);\r\n            req.end();\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (payload) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(payload);\r\n        }\r\n    };\r\n    Sender.prototype._runICACLS = function (args, callback) {\r\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n        aclProc.on(\"error\", function (e) { return callback(e); });\r\n        aclProc.on(\"close\", function (code, signal) {\r\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n        });\r\n    };\r\n    Sender.prototype._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLIdentity = function (callback) {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return callback(null, Sender.ACL_IDENTITY);\r\n        }\r\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n            windowsHide: true,\r\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n        });\r\n        var data = \"\";\r\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n        psProc.on(\"error\", function (e) { return callback(e, null); });\r\n        psProc.on(\"close\", function (code, signal) {\r\n            Sender.ACL_IDENTITY = data && data.trim();\r\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\r\n        });\r\n    };\r\n    Sender.prototype._getACLIdentitySync = function () {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\",\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    Sender.prototype._applyACLRules = function (directory, callback) {\r\n        var _this = this;\r\n        if (!Sender.USE_ICACLS) {\r\n            return callback(null);\r\n        }\r\n        // For performance, only run ACL rules if we haven't already during this session\r\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n            // This is better than the alternative of potentially infinitely spawned processes\r\n            Sender.ACLED_DIRECTORIES[directory] = false;\r\n            // Restrict this directory to only current user and administrator access\r\n            this._getACLIdentity(function (err, identity) {\r\n                if (err) {\r\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                    return callback(err);\r\n                }\r\n                else {\r\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\r\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\r\n                        return callback(err);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\r\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\r\n        }\r\n    };\r\n    Sender.prototype._applyACLRulesSync = function (directory) {\r\n        if (Sender.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype._confirmDirExists = function (directory, callback) {\r\n        var _this = this;\r\n        fs.lstat(directory, function (err, stats) {\r\n            if (err && err.code === 'ENOENT') {\r\n                fs.mkdir(directory, function (err) {\r\n                    if (err && err.code !== 'EEXIST') {\r\n                        callback(err);\r\n                    }\r\n                    else {\r\n                        _this._applyACLRules(directory, callback);\r\n                    }\r\n                });\r\n            }\r\n            else if (!err && stats.isDirectory()) {\r\n                _this._applyACLRules(directory, callback);\r\n            }\r\n            else {\r\n                callback(err || new Error(\"Path existed but was not a directory\"));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\r\n        // Get the directory listing\r\n        fs.readdir(directory, function (err, files) {\r\n            if (err) {\r\n                return callback(err, -1);\r\n            }\r\n            var error = null;\r\n            var totalSize = 0;\r\n            var count = 0;\r\n            if (files.length === 0) {\r\n                callback(null, 0);\r\n                return;\r\n            }\r\n            // Query all file sizes\r\n            for (var i = 0; i < files.length; i++) {\r\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\r\n                    count++;\r\n                    if (err) {\r\n                        error = err;\r\n                    }\r\n                    else {\r\n                        if (fileStats.isFile()) {\r\n                            totalSize += fileStats.size;\r\n                        }\r\n                    }\r\n                    if (count === files.length) {\r\n                        // Did we get an error?\r\n                        if (error) {\r\n                            callback(error, -1);\r\n                        }\r\n                        else {\r\n                            callback(error, totalSize);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\r\n        var files = fs.readdirSync(directory);\r\n        var totalSize = 0;\r\n        for (var i = 0; i < files.length; i++) {\r\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n        }\r\n        return totalSize;\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (payload) {\r\n        var _this = this;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        // This will create the dir if it does not exist\r\n        // Default permissions on *nix are directory listing from other users but no file creations\r\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n        this._confirmDirExists(directory, function (error) {\r\n            if (error) {\r\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\r\n                _this._onErrorHelper(error);\r\n                return;\r\n            }\r\n            _this._getShallowDirectorySize(directory, function (err, size) {\r\n                if (err || size < 0) {\r\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\r\n                    _this._onErrorHelper(err);\r\n                    return;\r\n                }\r\n                else if (size > _this._maxBytesOnDisk) {\r\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                    return;\r\n                }\r\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n                //would require an external dependency\r\n                var fileName = new Date().getTime() + \".ai.json\";\r\n                var fileFullPath = path.join(directory, fileName);\r\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\r\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        try {\r\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n            if (!fs.existsSync(directory)) {\r\n                fs.mkdirSync(directory);\r\n            }\r\n            // Make sure permissions are valid\r\n            this._applyACLRulesSync(directory);\r\n            var dirSize = this._getShallowDirectorySizeSync(directory);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(directory, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        var _this = this;\r\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        fs.exists(tempDir, function (exists) {\r\n            if (exists) {\r\n                fs.readdir(tempDir, function (error, files) {\r\n                    if (!error) {\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (files.length > 0) {\r\n                            var firstFile = files[0];\r\n                            var filePath = path.join(tempDir, firstFile);\r\n                            fs.readFile(filePath, function (error, payload) {\r\n                                if (!error) {\r\n                                    // delete the file first to prevent double sending\r\n                                    fs.unlink(filePath, function (error) {\r\n                                        if (!error) {\r\n                                            _this.send(payload);\r\n                                        }\r\n                                        else {\r\n                                            _this._onErrorHelper(error);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    _this._onErrorHelper(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this._onErrorHelper(error);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    Sender.ACLED_DIRECTORIES = {};\r\n    Sender.ACL_IDENTITY = null;\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\r\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","module.exports = require(\"zlib\");","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n        }\r\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\r\n            if (data && data.baseData) {\r\n                // if no properties are specified just add the common ones\r\n                if (!data.baseData.properties) {\r\n                    data.baseData.properties = commonProperties;\r\n                }\r\n                else {\r\n                    // otherwise, check each of the common ones\r\n                    for (var name in commonProperties) {\r\n                        // only override if the property `name` has not been set on this item\r\n                        if (!data.baseData.properties[name]) {\r\n                            data.baseData.properties[name] = commonProperties[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // sanitize properties\r\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = telemetry.message;\r\n        trace.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        remoteDependency.name = telemetry.name;\r\n        remoteDependency.data = telemetry.data;\r\n        remoteDependency.target = telemetry.target;\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = telemetry.properties;\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var event = new Contracts.EventData();\r\n        event.name = telemetry.name;\r\n        event.properties = telemetry.properties;\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = telemetry.properties;\r\n        exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = telemetry.exception.message;\r\n        exceptionDetails.typeName = telemetry.exception.name;\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = telemetry.name;\r\n        requestData.url = telemetry.url;\r\n        requestData.source = telemetry.source;\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = telemetry.name;\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map"],"sourceRoot":""}